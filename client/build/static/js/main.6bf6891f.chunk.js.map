{"version":3,"sources":["store/hooks.ts","utils/custom-hooks/ScrollToTop.ts","utils/Spinner/Spinner.tsx","utils/RouteNotFound/RouteNotFound.tsx","constants.ts","features/auth/authSlice.ts","features/profile/profileSlice.ts","features/savedposts/savedpostsSlice.ts","utils/custom-hooks/useIsMountedRef.ts","utils/form/Feedback/Feedback.tsx","utils/form/Input/Input.tsx","auth/signup/signup.tsx","auth/signup/signup.formValidate.ts","auth/login/Login.tsx","auth/login/Login.formValidate.ts","features/activity/activitySlice.ts","features/chats/chatsSlice.ts","utils/Backdrop/Backdrop.tsx","utils/DropBox/DropBox.tsx","features/users/usersSlice.ts","utils/searchBox/SearchBoxResult.tsx","utils/searchBox/SearchBox.tsx","components/SearchBar/SearchBar.tsx","components/Header/Header.tsx","components/Footer/Footer.tsx","features/posts/postsSlice.ts","utils/timestamp/timestamp.ts","components/Post/PostIcons.tsx","pages/Chats/components/UserChatsMobile.tsx","pages/Chats/components/UserChatsDesktop.tsx","components/Post/PostCard.tsx","components/HomeContent/components/ProfileBox.tsx","components/HomeContent/HomeContent.tsx","pages/Home/Home.tsx","pages/Profile/components/ProfileSection.tsx","pages/Profile/Profile.tsx","pages/Comments/Comments.tsx","pages/Search/Search.tsx","pages/Chats/components/UsersList.tsx","pages/Chats/Chats.tsx","pages/Followers/Followers.tsx","pages/Following/Following.tsx","pages/Profile/components/PostsSection.tsx","pages/ViewProfile/components/ProfileSection.tsx","pages/ViewProfile/components/PostsSection.tsx","pages/ViewProfile/ViewProfile.tsx","pages/Addpost/AddPost.tsx","pages/Activity/Activity.tsx","pages/EditProfile/EditProfile.formValidate.ts","pages/EditProfile/EditProfile.tsx","pages/IndividualPostPage/IndividualPostIcon.tsx","pages/IndividualPostPage/IndividualPostPage.tsx","utils/PrivateRoute/PrivateRoute.tsx","utils/custom-hooks/usePaginatedPosts.tsx","App.tsx","utils/custom-hooks/useWindowSize.tsx","store/store.ts","index.tsx"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","ScrollToTop","pathname","useLocation","useEffect","window","scroll","behavior","top","Spinner","className","RouteNotFound","navigate","useNavigate","onClick","BASE_URL","user","JSON","parse","localStorage","getItem","initialState","token","login","_id","signupUser","createAsyncThunk","state","thunkApi","a","axios","post","res","data","response","status","rejectWithValue","message","loginUser","checkAuth","get","headers","authorization","authSlice","createSlice","name","reducers","logout","removeItem","extraReducers","builder","addCase","fulfilled","action","payload","setItem","stringify","rejected","actions","fetchProfile","fetchViewProfile","userId","fetchFollowers","fetchFollowing","updateConnections","updateProfile","file","profile","formData","FormData","append","profileSlice","pic","username","fullname","bio","website","gender","private","email","userposts","connections","followers","following","UpdateConnections","pending","fetchSavedPosts","savedPostPressed","postId","savedpostsSlice","posts","useIsMountedRef","isMountedRef","useRef","current","Feedback","valid","togglePassword","setTogglePassword","aria-hidden","Input","type","value","error","onChange","placeholder","Signup","dispatch","useState","password","setState","disabled","setError","signupStatus","setSetSignupStatus","feedback","setFeedback","handleChange","e","target","test","length","formValidate","handleSubmit","preventDefault","resultAction","unwrapResult","setTimeout","onSubmit","to","Login","emailOrUsername","loginStatus","setLoginStatus","loginAsGuestStatus","setLoginAsGuestStatus","loginAsGuest","fetchActivity","confirmRequest","deleteRequest","delete","activities","resetActivities","fetchChats","createChat","sendMessage","text","chatId","chatsSlice","chats","updateChat","chat","chatIndex","findIndex","c","resetChat","push","Backdrop","children","toggle","DropBox","handleBtn","path","fetchUsers","searchTerm","usersSlice","users","SearchBoxResult","setToggleDropbox","auth","src","alt","SearchBox","map","SearchBar","toggleDropbox","setSearchTerm","timeoutRef","clearTimeout","onFocus","Header","end","width","height","activeClassName","aria-label","fill","viewBox","d","clipRule","fillRule","Footer","fetchPosts","page","fetchComments","uploadPost","caption","likePressed","commentPressed","comment","fetchPost","postsSlice","hasMore","loading","increasePostsPageNumber","setLoading","concat","unshift","postIndex","timestamp","postDate","currentDate","Date","seconds","Math","floor","getTime","interval","toDateString","slice","socket","PostIcons","like","checkPostIsSavedOrNot","savedposts","find","p","style","marginRight","PostCard","lastElementRef","postedBy","comments","likes","createdAt","time","uid","extension","split","pop","isImg","includes","isVideo","setComment","controls","url","ref","ProfileBox","HomeContent","observer","useCallback","node","disconnect","IntersectionObserver","entries","isIntersecting","observe","i","margin","Home","ProfileSection","href","rel","Profile","Comments","mountedRef","useParams","setData","setStatus","then","originalPromiseResult","Search","show","setShow","input","setInput","onBlur","UsersList","filteredChats","filter","messages","Chats","UserChatsMobile","typing","setTyping","messagesEndRef","typingRef","io","emit","on","scrollIntoView","UserChatsDesktop","sendingStatus","setSendingStatus","Followers","setFollowers","Following","setFollowing","PostsSection","filteredPosts","background","isYouFollowingUser","isUserFollowingYou","isRequested","requests","handleConnections","userconnections","yourconnections","console","log","handleMessage","accountPrivate","ViewProfile","yourUserId","AddPost","setPost","setFile","uploadPostStatus","setUploadPostStatus","extensionErr","setExtensionErr","processing","setProcessing","canSave","every","Boolean","files","FileReader","readAsDataURL","onloadstart","onloadend","result","handlePost","accept","Activity","activity","reverse","some","EditProfile","errorMsg","setErrorMsg","popup","setPopup","htmlFor","checked","IndividualPostPage","maxHeight","objectFit","PrivateRoute","props","from","replace","usePaginatedPosts","App","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","Promise","all","element","store","configureStore","reducer","authReducer","postsReducer","savedpostsReducer","profileReducer","activityReducer","usersReducer","chatsReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6bf6891f.chunk.js","sourcesContent":["import { TypedUseSelectorHook,useDispatch,useSelector } from \"react-redux\";\r\nimport { AppDispatch, RootState } from \"./store\";\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector:TypedUseSelectorHook<RootState> = useSelector;","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst ScrollToTop = () => {\r\n    const {pathname} = useLocation();\r\n\r\n    useEffect(() => {\r\n       window.scroll({\r\n           behavior:\"smooth\",\r\n           top:0\r\n       })\r\n    },[pathname])\r\n\r\n    return null;\r\n};\r\n\r\nexport default ScrollToTop;","import \"./Spinner.css\";\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"loader\">\r\n      <div className=\"loader-circle c1\"></div>\r\n      <div className=\"loader-circle c2\"></div>\r\n      <div className=\"loader-circle c3\"></div>\r\n      <div className=\"loader-circle c4\"></div>\r\n      <div className=\"loader-circle c5\"></div>\r\n      <div className=\"loader-circle c6\"></div>\r\n      <div className=\"loader-circle c7\"></div>\r\n      <div className=\"loader-circle c8\"></div>\r\n      <div className=\"loader-circle c9\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Spinner;","import { useNavigate } from \"react-router-dom\";\r\nimport \"./RouteNotFound.css\";\r\n\r\nconst RouteNotFound = () => {\r\n    const navigate = useNavigate();\r\n    return (\r\n        <div className=\"route__not__found\">\r\n            <h1>404 Route Not Found!!</h1>\r\n            <button className=\"go__to__home__btn\" onClick={() => navigate(\"/\")}>GO TO HOMEPAGE</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RouteNotFound;","export const BASE_URL = \"https://insta-clone-10062000.herokuapp.com\"","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport { LoginState } from \"../../auth/login/Login.types\";\r\nimport { SignupState } from \"../../auth/signup/signup.types\";\r\nimport { BASE_URL } from \"../../constants\";\r\nimport { ServerError } from \"../../generic.types\";\r\nimport { AuthState,AuthResponse } from \"./authSlice.types\";\r\n\r\nlet user:AuthState = JSON.parse(localStorage?.getItem(\"token\")||\"{}\")\r\n  \r\nconst initialState:AuthState = user && user.token ? user : {\r\n    token:\"\",\r\n    login:false,\r\n    user:{\r\n        _id:\"\"\r\n    }\r\n}\r\n\r\nexport const signupUser = createAsyncThunk(\"auth/signup\",async(state:SignupState,thunkApi) => {\r\n        try {\r\n            const res = await axios.post<{success:boolean}>(`${BASE_URL}/signup`,state);\r\n            return res.data;\r\n        } catch (error) {\r\n            if(error.response.status === 422){\r\n               return thunkApi.rejectWithValue(error.response.data as ServerError);\r\n            }\r\n            return thunkApi.rejectWithValue({ message:\"something went wrong\" });\r\n        }\r\n})\r\n\r\nexport const loginUser = createAsyncThunk(\"auth/login\",async(state:LoginState,thunkApi) => {\r\n    try {\r\n        const res = await axios.post<AuthResponse>(`${BASE_URL}/signin`,state);\r\n        return res.data;\r\n    } catch (error) {\r\n        if(error.response.status === 401 || error.response.status === 422){\r\n           return thunkApi.rejectWithValue(error.response.data as ServerError);\r\n        }\r\n        return thunkApi.rejectWithValue({ message:\"something went wrong\" });\r\n    }\r\n})\r\n\r\nexport const checkAuth = createAsyncThunk(\"auth/checkauth\",async(token:string) => {\r\n       const res = await axios.get<AuthResponse>(`${BASE_URL}/protected`,{headers:{ authorization:`Bearer ${token}` }});\r\n       return res.data;\r\n})\r\n\r\nexport const authSlice = createSlice({\r\n    name:\"auth\",\r\n    initialState,\r\n    reducers:{\r\n       logout:(state) => {\r\n           localStorage.removeItem(\"token\");\r\n           state.token = \"\";\r\n           state.login = false;\r\n           state.user = {\r\n              _id:\"\"\r\n           }\r\n       }\r\n    },\r\n    extraReducers:(builder) => {\r\n       builder.addCase(loginUser.fulfilled,(state:AuthState,action:PayloadAction<AuthResponse|ServerError>) => {\r\n            if(\"token\" in action.payload){\r\n                const { token,login,user } = action.payload;\r\n                state.token = token;\r\n                state.login = login;\r\n                state.user = user;\r\n                localStorage.setItem(\"token\",JSON.stringify({token,login:true}));\r\n            }\r\n       })\r\n\r\n       builder.addCase(checkAuth.fulfilled,(state:AuthState,action:PayloadAction<AuthResponse|ServerError>) => {\r\n        if(\"token\" in action.payload){\r\n            const { token,login,user } = action.payload;\r\n            state.token = token;\r\n            state.login = login;\r\n            state.user = user;\r\n            localStorage.setItem(\"token\",JSON.stringify({token,login:true}));\r\n        }\r\n       })\r\n\r\n       builder.addCase(checkAuth.rejected,(state:AuthState) => {\r\n            state.token = \"\";\r\n            state.login = false;\r\n            state.user = {\r\n                _id:\"\"\r\n            };\r\n            localStorage.removeItem(\"token\");\r\n       })\r\n    }\r\n});\r\n\r\nexport const { logout } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { Connection, FollowersResponse, FollowingResponse, InitialProfileState, Profile, ProfileData, UpdateConnectionsResponse, ViewProfileData } from \"./profileSlice.types\";\r\n\r\nimport axios from \"axios\";\r\nimport { ServerError } from \"../../generic.types\";\r\nimport { BASE_URL } from \"../../constants\";\r\n\r\nconst initialState:InitialProfileState = {\r\n    profile:{\r\n        _id:\"\",\r\n        pic:\"\",\r\n        username:\"\",\r\n        fullname:\"\",\r\n        bio:\"\",\r\n        website:\"\",\r\n        gender:\"\",\r\n        private:false,\r\n        email:\"\"\r\n    },\r\n    userposts:[],\r\n    connections:{\r\n        followers:[],\r\n        following:[]\r\n    },\r\n    status:\"idle\"\r\n}\r\n\r\nexport const fetchProfile = createAsyncThunk<ProfileData,{token:string}>(\"profile/fetchprofile\",async({token}) => {\r\n    const res = await axios.get(`${BASE_URL}/profile`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const fetchViewProfile = createAsyncThunk<ViewProfileData,{token:string,userId:string}>(\"profile/fetchviewprofile\",async({token,userId}) => {\r\n    const res = await axios.get(`${BASE_URL}/profile/${userId}`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const fetchFollowers = createAsyncThunk<FollowersResponse,{token:string,userId:string}>(\"profile/fetchfollowers\",async({token,userId}) => {\r\n    const res = await axios.get(`${BASE_URL}/connections/followers/${userId}`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const fetchFollowing = createAsyncThunk<FollowingResponse,{token:string,userId:string}>(\"profile/fetchfollowing\",async({token,userId}) => {\r\n    const res = await axios.get(`${BASE_URL}/connections/following/${userId}`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const updateConnections = createAsyncThunk<UpdateConnectionsResponse,{token:string,userId:string}>(\"profile/updateconnections\",async({token,userId}) => {\r\n    const res = await axios.post(`${BASE_URL}/connections/${userId}`,{},{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const updateProfile = createAsyncThunk<{profile:Profile},{token:string,data:Profile,file:File|null}>(\"profile/update\",async({token,data,file},thunkApi) => {\r\n    \r\n    const profile = JSON.stringify(data)\r\n    \r\n    const formData = new FormData();\r\n    if(file){\r\n       formData.append(\"file\",file);\r\n    }\r\n    formData.append(\"data\",profile);\r\n    \r\n    try {\r\n        const res = await axios.post(`${BASE_URL}/profile/update`,formData,{\r\n            headers:{ \"Authorization\":`Bearer ${token}` }\r\n       });\r\n       return res.data;\r\n     } catch (error) {\r\n         if(error.response.status === 422 || error.response.status === 400){\r\n            return thunkApi.rejectWithValue(error.response.data as ServerError);\r\n         }\r\n         return thunkApi.rejectWithValue({ message:\"something went wrong\" });\r\n     }\r\n});\r\n\r\nconst profileSlice = createSlice({\r\n    name:\"profile\",\r\n    initialState,\r\n    reducers:{\r\n        UpdateConnections:(state,action:PayloadAction<{connections:Connection}>) => {\r\n            state.connections = action.payload.connections\r\n        }\r\n    },\r\n    extraReducers:(builder) => {\r\n        builder.addCase(fetchProfile.pending,(state:InitialProfileState) => {\r\n            state.status = \"pending\";\r\n        })\r\n        builder.addCase(fetchProfile.rejected,(state:InitialProfileState) => {\r\n            state.status = \"failed\";\r\n        })\r\n        builder.addCase(fetchProfile.fulfilled,(state:InitialProfileState,action:PayloadAction<ProfileData>) => {\r\n             const {userposts,profile,connections} = action.payload;\r\n           \r\n             state.profile = profile;\r\n             state.connections = connections;\r\n             state.userposts = userposts;\r\n             state.status = \"succeeded\";\r\n        })\r\n\r\n        builder.addCase(updateProfile.fulfilled,(state:InitialProfileState,action:PayloadAction<{profile:Profile}>) => {\r\n            state.profile = action.payload.profile\r\n        })\r\n    }\r\n})\r\n\r\nexport const { UpdateConnections } = profileSlice.actions;\r\n\r\nexport default profileSlice.reducer;","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { SavedPostsInitialState, SavedPostsResponse } from \"./savedposts.types\";\r\n\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../constants\";\r\n\r\nexport const fetchSavedPosts = createAsyncThunk<SavedPostsResponse,{token:string}>(\"savedposts/fetchsavedposts\",async({token}) => {\r\n    const res = await axios.get(`${BASE_URL}/savedposts`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nexport const savedPostPressed = createAsyncThunk<SavedPostsResponse,{token:string,postId:string}>(\"/savedposts/updatesavedposts\",async({token,postId}) => {\r\n    const res = await axios.post(`${BASE_URL}/savedposts/${postId}`,{},{\r\n        headers:{ authorization:`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nconst initialState:SavedPostsInitialState = {\r\n    posts:[],\r\n    status:\"idle\"\r\n}\r\n\r\nconst savedpostsSlice = createSlice({\r\n    name:\"savedposts\",\r\n    initialState,\r\n    reducers:{\r\n    },\r\n    extraReducers:(builder) => {\r\n        builder.addCase(fetchSavedPosts.pending,(state:SavedPostsInitialState) => {\r\n            state.status = \"pending\";\r\n        })\r\n        builder.addCase(fetchSavedPosts.rejected,(state:SavedPostsInitialState) => {\r\n            state.status = \"failed\";\r\n        })\r\n        builder.addCase(fetchSavedPosts.fulfilled,(state:SavedPostsInitialState,action:PayloadAction<SavedPostsResponse>) => {\r\n             state.posts = action.payload.posts;\r\n             state.status = \"succeeded\";\r\n        })\r\n        builder.addCase(savedPostPressed.fulfilled,(state:SavedPostsInitialState,action:PayloadAction<SavedPostsResponse>) => {\r\n            state.posts = action.payload.posts;\r\n        })\r\n    }\r\n})\r\n\r\nexport default savedpostsSlice.reducer;","import { useEffect, useRef } from \"react\";\r\n\r\nexport function useIsMountedRef(){\r\n    const isMountedRef = useRef<boolean|null>(null);\r\n\r\n    useEffect(() => {\r\n        isMountedRef.current = true;\r\n      return () => {\r\n        isMountedRef.current = false;\r\n      }\r\n    });\r\n    \r\n    return isMountedRef;\r\n}","import { Dispatch,SetStateAction } from \"react\";\r\nimport \"./Feedback.css\";\r\n\r\ntype FeedbackProps = {\r\n    valid:boolean;\r\n    togglePassword?:boolean;\r\n    setTogglePassword?:Dispatch<SetStateAction<boolean>>;\r\n}\r\n\r\nconst Feedback = ({valid,togglePassword,setTogglePassword}:FeedbackProps) => {\r\n    return valid ? (\r\n        <div className=\"feedback\">\r\n            <i className=\"fa fa-times-circle\" aria-hidden=\"true\"></i>\r\n            { setTogglePassword && <i onClick={setTogglePassword ? () => setTogglePassword(state => !state) : () => {}} className={togglePassword ? \"fa fa-eye-slash\" :\"fa fa-eye\"}></i>}\r\n        </div>\r\n    ) : (\r\n        <div className=\"feedback\">\r\n            <i className=\"fa fa-check\" aria-hidden=\"true\"></i>\r\n            { setTogglePassword && <i onClick={setTogglePassword ? () => setTogglePassword(state => !state) : () => {}} className={togglePassword ? \"fa fa-eye-slash\" :\"fa fa-eye\"}></i>}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Feedback;\r\n","import Feedback from \"../Feedback/Feedback\";\r\nimport { InputProps } from \"./Input.types\";\r\n\r\nimport \"./Input.css\";\r\n\r\nconst Input = ({type,value,error,onChange,name,placeholder,togglePassword,setTogglePassword}:InputProps) => {\r\n    return (\r\n        <div className=\"form__group\">\r\n           { value !== \"\" && <label className=\"form__label\">{placeholder}</label>}\r\n           <input type={type} name={name} value={value} onChange={onChange} placeholder={placeholder} className=\"form__control\"/>\r\n           { value !== \"\" && <Feedback valid={error} togglePassword={togglePassword} setTogglePassword={setTogglePassword}/>}\r\n       </div>\r\n    );\r\n};\r\n\r\nexport default Input;\r\n","import { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { SignupState,SignupError } from \"./signup.types\";\r\nimport { formValidate } from \"./signup.formValidate\";\r\nimport { useAppDispatch } from \"../../store/hooks\";\r\nimport { useIsMountedRef } from \"../../utils/custom-hooks/useIsMountedRef\";\r\nimport { signupUser } from \"../../features/auth/authSlice\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { Status } from \"../../generic.types\";\r\n\r\nimport Input from \"../../utils/form/Input/Input\";\r\n\r\nimport \"../auth.css\";\r\n\r\nconst Signup = () => {\r\n\r\n    const isMountedRef = useIsMountedRef();\r\n    const dispatch = useAppDispatch();\r\n\r\n    const [state,setState] = useState<SignupState>({\r\n        email:\"\",\r\n        fullname:\"\",\r\n        username:\"\",\r\n        password:\"\"\r\n    });\r\n\r\n    const [error,setError] = useState<SignupError>({\r\n        email:false,\r\n        fullname:false,\r\n        username:false,\r\n        password:false,\r\n        disabled:true,\r\n    });\r\n    \r\n    const [togglePassword,setTogglePassword] = useState<boolean>(false);\r\n    const [signupStatus,setSetSignupStatus] = useState<Status>(\"idle\");\r\n    const [feedback,setFeedback] = useState<string>(\"\");\r\n\r\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>):void => {\r\n        if(!isMountedRef.current) return;\r\n        const {value,name} = e.target;\r\n        formValidate({...state,[name]:value},setError);\r\n        setState( state => ({...state,[name]:value}) );\r\n    }\r\n\r\n    const handleSubmit = async(e:React.SyntheticEvent) => {\r\n        if(!isMountedRef.current) return;\r\n        e.preventDefault();\r\n        try {\r\n            setSetSignupStatus(\"pending\");\r\n            const resultAction = await dispatch(signupUser(state));\r\n            unwrapResult(resultAction);\r\n            setState({ email:\"\",fullname:\"\",username:\"\",password:\"\" });\r\n            setError({ email:false,fullname:false,username:false,password:false,disabled:true });\r\n            setSetSignupStatus(\"succeeded\");\r\n            setFeedback(\"\");\r\n            setTimeout(() => {\r\n                setSetSignupStatus(\"idle\");\r\n            },3000)\r\n        } catch (error) {\r\n            setFeedback(error.message);\r\n            setSetSignupStatus(\"idle\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth__container\">\r\n\r\n            <form className=\"section1\" onSubmit={handleSubmit}>\r\n                <div className=\"insta__logo\"></div>\r\n                <p className=\"signup__title\">Sign up to see photos and videos from your friends.</p>\r\n                <Input type=\"email\" name=\"email\" value={state.email} error={error.email} onChange={handleChange} placeholder=\"Email\"/>\r\n                <Input type=\"text\" name=\"fullname\" value={state.fullname} error={error.fullname} onChange={handleChange} placeholder=\"Full Name\"/>\r\n                <Input type=\"text\" name=\"username\" value={state.username} error={error.username} onChange={handleChange} placeholder=\"Username\"/>\r\n                <Input type={togglePassword ? \"text\" :\"password\"} togglePassword={togglePassword} setTogglePassword={setTogglePassword} name=\"password\" value={state.password} error={error.password} onChange={handleChange} placeholder=\"Password\"/>\r\n                <input type=\"submit\" className=\"submit__btn\" disabled={error.disabled || signupStatus !== \"idle\"} value={signupStatus === \"pending\" ? \"Signing...\" : \"Sign up\" }/>\r\n                <small className=\"auth__invalid__feedback\">{feedback}</small>\r\n                { signupStatus === \"succeeded\" && <small className=\"auth__valid__feedback\">User registered successfully</small>}\r\n            </form>\r\n\r\n            <div className=\"section2\">\r\n                <p className=\"section2__title\">Have an account? <Link to=\"/\" className=\"section2__title__Link\">Log in</Link></p>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Signup;","import { Dispatch,SetStateAction } from \"react\";\r\nimport { SignupState,SignupError } from \"./signup.types\";\r\n\r\nexport const formValidate = (state:SignupState,setError:Dispatch<SetStateAction<SignupError>>):void => {\r\n    let email = false,password = false,username = false,fullname = false;\r\n\r\n    if(!/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/.test(state.email)){\r\n        email = true;\r\n    }\r\n\r\n    if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$/.test(state.password)){\r\n        password = true;\r\n    }\r\n\r\n    if(state.username.length < 5){\r\n        username = true\r\n    }\r\n\r\n    if(state.fullname.length < 3){\r\n        fullname = true\r\n    }\r\n\r\n    if(!email && !password && !username && !fullname){\r\n       return setError( (state:any) => ({...state,email,password,username,fullname,disabled:false}) );\r\n    };\r\n    \r\n    setError( (state:any) => ({...state,email,password,username,fullname,disabled:true}) );\r\n}","import { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { LoginState,LoginError } from \"./Login.types\";\r\nimport { formValidate } from \"./Login.formValidate\";\r\nimport { useIsMountedRef } from \"../../utils/custom-hooks/useIsMountedRef\";\r\nimport { useAppDispatch } from \"../../store/hooks\";\r\nimport { loginUser } from \"../../features/auth/authSlice\";\r\nimport { Status } from \"../../generic.types\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\n\r\nimport Input from \"../../utils/form/Input/Input\";\r\n\r\nimport \"../auth.css\";\r\n\r\n\r\nconst Login = () => {\r\n\r\n    const isMountedRef = useIsMountedRef();\r\n    \r\n    const [state,setState] = useState<LoginState>({\r\n        emailOrUsername:\"\",\r\n        password:\"\"\r\n    });\r\n\r\n    const [error,setError] = useState<LoginError>({\r\n        emailOrUsername:false,\r\n        password:false,\r\n        disabled:true,\r\n    });\r\n\r\n    const [togglePassword,setTogglePassword] = useState<boolean>(false);\r\n    const [feedback,setFeedback] = useState<string>(\"\");\r\n    const [loginStatus,setLoginStatus] = useState<Status>(\"idle\");\r\n    const [loginAsGuestStatus,setLoginAsGuestStatus] = useState<Status>(\"idle\");\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>):void => {\r\n        if(!isMountedRef.current) return; \r\n        const {value,name} = e.target;\r\n        formValidate({...state,[name]:value},setError);\r\n        setState( state => ({...state,[name]:value}) );\r\n    }\r\n\r\n    const handleSubmit = async(e:React.SyntheticEvent) => {\r\n        if(!isMountedRef.current) return; \r\n        e.preventDefault();\r\n        try {\r\n            setLoginStatus(\"pending\")\r\n            const resultAction = await dispatch(loginUser(state));\r\n            unwrapResult(resultAction);\r\n            setState({ emailOrUsername:\"\", password:\"\" });\r\n            setError({ emailOrUsername:false,password:false,disabled:true });\r\n            setLoginStatus(\"succeeded\");\r\n            setFeedback(\"\");\r\n        } catch (error) {\r\n            setFeedback(error.message);\r\n        }\r\n        finally {\r\n            setLoginStatus(\"idle\");\r\n        }\r\n    }\r\n\r\n    const loginAsGuest = async(e:React.SyntheticEvent) => {\r\n        e.preventDefault();\r\n        setLoginAsGuestStatus(\"pending\")\r\n        try {\r\n            const resultAction = await dispatch(loginUser({emailOrUsername:\"avengers\",password:\"demo1234\"}));\r\n            unwrapResult(resultAction);\r\n            setLoginAsGuestStatus(\"idle\")\r\n        } catch (error) {\r\n            setFeedback(\"Something went wrong with guest login. Please signup and then try again\");\r\n            setLoginAsGuestStatus(\"idle\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth__container\">\r\n            \r\n            <form className=\"section1\">\r\n                <div className=\"insta__logo\"></div>\r\n                <p className=\"signup__title\">Sign up to see photos and videos from your friends.</p>\r\n                <Input type=\"text\" name=\"emailOrUsername\" value={state.emailOrUsername} error={error.emailOrUsername} onChange={handleChange} placeholder=\"Email or username\"/>\r\n                <Input type={togglePassword ? \"text\" : \"password\"} togglePassword={togglePassword} setTogglePassword={setTogglePassword} name=\"password\" value={state.password} error={error.password} onChange={handleChange} placeholder=\"Password\"/>\r\n                <input type=\"submit\" className=\"submit__btn\"  onClick={handleSubmit} disabled={error.disabled || loginStatus !== \"idle\"} value={ loginStatus === \"idle\" ? \"Log In\" : \"Logging...\"}/>\r\n                <div className=\"separator\">\r\n                    <div className=\"separator__line\"></div>\r\n                    <div className=\"separator__text\">OR</div>\r\n                    <div className=\"separator__line\"></div>\r\n                </div>\r\n                <button className=\"submit__btn\" disabled={loginAsGuestStatus !== \"idle\"} onClick={loginAsGuest}>{ loginAsGuestStatus === \"idle\" ? \"Login as guest\" : \"Logging...\"}</button>\r\n                <small className=\"auth__invalid__feedback\">{feedback}</small>\r\n            </form>\r\n\r\n            <div className=\"section2\">\r\n                <p className=\"section2__title\">Don't have an account? <Link to=\"/signup\" className=\"section2__title__Link\">Sign up</Link></p>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;","import { Dispatch,SetStateAction } from \"react\";\r\nimport { LoginError, LoginState } from \"./Login.types\";\r\n\r\nexport const formValidate = (state:LoginState,setError:Dispatch<SetStateAction<LoginError>>):void => {\r\n    let emailOrUsername = false,password = false;\r\n\r\n    if(state.emailOrUsername.length < 5){\r\n        emailOrUsername = true;\r\n    }\r\n\r\n    if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$/.test(state.password)){\r\n        password = true;\r\n    }\r\n\r\n    if(!emailOrUsername && !password){\r\n       return setError( (state) => ({...state,emailOrUsername,password,disabled:false}) );\r\n    };\r\n    setError( (state) => ({...state,emailOrUsername,password,disabled:true}) );\r\n}","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { ActivityResponse,ActivityInitialState, ConfirmRequestResponse } from \"./activitySlice.types\";\r\n\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../constants\";\r\n\r\nexport const fetchActivity = createAsyncThunk<ActivityResponse,{token:string}>(\"activity/fetchactivity\",async({token}) => {\r\n    const res = await axios.get(`${BASE_URL}/activities`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const confirmRequest = createAsyncThunk<ConfirmRequestResponse,{token:string,userId:string}>(\"activity/confirmrequest\",async({token,userId}) => {\r\n    const res = await axios.post(`${BASE_URL}/activities/requests/${userId}`,{},{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n});\r\n\r\nexport const deleteRequest = createAsyncThunk<ActivityResponse,{token:string,userId:string}>(\"activity/deleterequest\",async({token,userId}) => {\r\n    const res = await axios.delete(`${BASE_URL}/activities/requests/${userId}`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n});\r\n\r\nconst initialState:ActivityInitialState = {\r\n    activities:null,\r\n    status:\"idle\"\r\n}\r\n\r\nconst savedpostsSlice = createSlice({\r\n    name:\"activity\",\r\n    initialState,\r\n    reducers:{\r\n        resetActivities:(state:ActivityInitialState) => {\r\n            state.status = \"idle\"\r\n            state.activities = null\r\n        }\r\n    },\r\n    extraReducers:(builder) => {\r\n        builder.addCase(fetchActivity.pending,(state:ActivityInitialState) => {\r\n            state.status = \"pending\";\r\n        })\r\n        builder.addCase(fetchActivity.rejected,(state:ActivityInitialState) => {\r\n            state.status = \"failed\";\r\n        })\r\n        builder.addCase(fetchActivity.fulfilled,(state:ActivityInitialState,action:PayloadAction<ActivityResponse>) => {\r\n             state.activities = action.payload.activities;\r\n             state.status = \"succeeded\";\r\n        })\r\n\r\n        builder.addCase(confirmRequest.fulfilled,(state:ActivityInitialState,action:PayloadAction<ConfirmRequestResponse>) => {\r\n            state.activities = action.payload.activities;\r\n        })\r\n\r\n        builder.addCase(deleteRequest.fulfilled,(state:ActivityInitialState,action:PayloadAction<ActivityResponse>) => {\r\n            state.activities = action.payload.activities;\r\n        })\r\n    }\r\n})\r\n\r\nexport const { resetActivities } = savedpostsSlice.actions;\r\n\r\nexport default savedpostsSlice.reducer;","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { Chat, ChatsInitialState, FetchChatsResponse } from \"./chatsSlice.types\";\r\n\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../constants\";\r\n\r\nexport const fetchChats = createAsyncThunk<FetchChatsResponse,{token:string}>(\"chats/fetchchats\",async({token}) => {\r\n    const res = await axios.get(`${BASE_URL}/chats`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nexport const createChat = createAsyncThunk<{chat:Chat},{token:string,userId:string}>(\"chats/createChat\",async({token,userId}) => {\r\n    const res = await axios.post(`${BASE_URL}/chats/${userId}`,{},{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nexport const sendMessage = createAsyncThunk<{chat:Chat},{token:string,text:string,chatId:string}>(\"chats/sendmessage\",async({token,text,chatId}) => {\r\n    const res = await axios.post(`${BASE_URL}/chats/message/${chatId}`,{ text },{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nconst initialState:ChatsInitialState = {\r\n    chats:[],\r\n    status:\"idle\"\r\n}\r\n\r\nconst chatsSlice = createSlice({\r\n    name:\"chats\",\r\n    initialState,\r\n    reducers:{\r\n        updateChat:(state:ChatsInitialState,action:PayloadAction<{chat:Chat}>) => {\r\n            const { chat } = action.payload;\r\n            const chatIndex = state.chats.findIndex(c => c._id === chat._id);\r\n            state.chats[chatIndex] = chat;\r\n        },\r\n        resetChat:(state:ChatsInitialState) => {\r\n            state.status = \"idle\"\r\n            state.chats = []\r\n        }\r\n    },\r\n    extraReducers:(builder) => {\r\n        builder.addCase(fetchChats.pending,(state:ChatsInitialState) => {\r\n            state.status = \"pending\";\r\n        })\r\n        builder.addCase(fetchChats.rejected,(state:ChatsInitialState) => {\r\n            state.status = \"failed\";\r\n        })\r\n        builder.addCase(fetchChats.fulfilled,(state:ChatsInitialState,action:PayloadAction<FetchChatsResponse>) => {\r\n             state.chats = action.payload.chats;\r\n             state.status = \"succeeded\";\r\n        })\r\n        builder.addCase(createChat.fulfilled,(state:ChatsInitialState,action:PayloadAction<{chat:Chat}>) => {\r\n           const { chat } = action.payload;\r\n           state.chats.push(chat);\r\n        })\r\n    }\r\n})\r\n\r\nexport const {updateChat,resetChat} = chatsSlice.actions;\r\n\r\nexport default chatsSlice.reducer;","import { BackdropProps } from \"./Backdrop.types\";\r\nimport \"./Backdrop.css\";\r\n\r\nconst Backdrop = ({children,toggle,className}:BackdropProps) => {\r\n    return (\r\n        <div className={`backdrop ${className}`} onClick={() => toggle(false)}>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Backdrop;\r\n","import { Dispatch,SetStateAction } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAppDispatch } from \"../../store/hooks\";\r\nimport { logout } from \"../../features/auth/authSlice\";\r\n\r\nimport \"./DropBox.css\";\r\nimport { resetChat } from \"../../features/chats/chatsSlice\";\r\nimport { resetActivities } from \"../../features/activity/activitySlice\";\r\n\r\ntype DropBoxProps = {\r\n    toggle:Dispatch<SetStateAction<boolean>>\r\n}\r\n\r\nconst DropBox = ({toggle}:DropBoxProps) => {\r\n    const navigate = useNavigate();\r\n    const dispatch = useAppDispatch();\r\n\r\n    const handleBtn = (path:string) => {\r\n        if(path === \"/\"){\r\n            dispatch(logout());\r\n            dispatch(resetChat());\r\n            dispatch(resetActivities());\r\n        }\r\n        navigate(path);\r\n        toggle(false)\r\n    }\r\n\r\n    return (\r\n            <div className=\"dropbox\">\r\n              <button className=\"dropbox__btn\" onClick={() => handleBtn(\"/profile\")}>\r\n                 <i className=\"fas fa-user\"></i><span>Profile</span>\r\n             </button>\r\n\r\n             <button className=\"dropbox__btn\" onClick={() => handleBtn(\"/profile/save\")}>\r\n                 <i className=\"fas fa-save\"></i><span>Saved</span>\r\n             </button>\r\n\r\n             <button className=\"dropbox__btn logout\" onClick={() => handleBtn(\"/\")}>\r\n                 Log Out\r\n             </button>\r\n          </div>\r\n    )\r\n};\r\n\r\nexport default DropBox;","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { UsersInitialState, UsersResponse } from \"./usersSlice.types\";\r\n\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../constants\";\r\n\r\nexport const fetchUsers = createAsyncThunk<UsersResponse,{token:string,searchTerm:string}>(\"users/fetchusers\",async({token,searchTerm}) => {\r\n    const res = await axios.get(`${BASE_URL}/users/${searchTerm}`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nconst initialState:UsersInitialState = {\r\n    users:[],\r\n    status:\"idle\"\r\n}\r\n\r\nconst usersSlice = createSlice({\r\n    name:\"users\",\r\n    initialState,\r\n    reducers:{\r\n    },\r\n    extraReducers:(builder) => {\r\n        builder.addCase(fetchUsers.pending,(state:UsersInitialState) => {\r\n            state.status = \"pending\";\r\n        })\r\n        builder.addCase(fetchUsers.rejected,(state:UsersInitialState) => {\r\n            state.status = \"failed\";\r\n        })\r\n        builder.addCase(fetchUsers.fulfilled,(state:UsersInitialState,action:PayloadAction<UsersResponse>) => {\r\n             state.users = action.payload.users;\r\n             state.status = \"idle\";\r\n        })\r\n      \r\n    }\r\n})\r\n\r\nexport default usersSlice.reducer;","import { Dispatch, SetStateAction } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { User } from \"../../features/users/usersSlice.types\";\r\nimport { useAppSelector } from \"../../store/hooks\";\r\n\r\ntype SearchBoxResultProps = {\r\n  user:User,\r\n  setToggleDropbox?:Dispatch<SetStateAction<boolean>>\r\n}\r\n\r\nconst SearchBoxResult = ({user,setToggleDropbox}:SearchBoxResultProps) => {\r\n\r\n  const userId = useAppSelector(state => state.auth.user?._id);\r\n \r\n  return (\r\n    <Link to={user._id === userId ? \"/profile\" : `/viewprofile/${user._id}`} onClick={setToggleDropbox ? () => setToggleDropbox(false) : () => {}} className=\"searchBox__result\">\r\n      <div className=\"avatar\">\r\n        <img className=\"avatar__img\" src={user.pic} alt=\"avatar\"/>\r\n      </div>\r\n      <div className=\"result__content\">\r\n        <h5 className=\"username\">{user.username}</h5>\r\n        <div className=\"fullname\">{user.fullname}</div>\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default SearchBoxResult;\r\n","import { Dispatch, SetStateAction } from \"react\";\r\nimport { useAppSelector } from \"../../store/hooks\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\n\r\nimport SearchBoxResult from \"./SearchBoxResult\";\r\n\r\nimport \"./SearchBox.css\";\r\n\r\ntype SearchBoxProps = {\r\n  setToggleDropbox:Dispatch<SetStateAction<boolean>>\r\n}\r\n\r\nconst SearchBox = ({setToggleDropbox}:SearchBoxProps) => {\r\n    const { users,status } = useAppSelector(state => state.users)\r\n    \r\n    return (\r\n        <div className=\"searchBox\">\r\n            {\r\n                users.length !== 0 && status === \"idle\" && \r\n                 <div className=\"searchBox__results\">\r\n                      {\r\n                          users.map(user => (\r\n                            <SearchBoxResult key={user._id} user={user} setToggleDropbox={setToggleDropbox}/>\r\n                          ))\r\n                      }\r\n                 </div>\r\n            }\r\n              \r\n            {\r\n                users.length === 0 && status === \"idle\" && \r\n                  <>\r\n                    <h4 className=\"searchBox__heading\">Search</h4>\r\n                    <div className=\"searchBox__empty\">\r\n                        No results found\r\n                    </div>\r\n                  </>\r\n            }   \r\n\r\n            { status === \"pending\" && \r\n              <Spinner/>\r\n            } \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchBox;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { fetchUsers } from \"../../features/users/usersSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport Backdrop from \"../../utils/Backdrop/Backdrop\";\r\nimport SearchBox from \"../../utils/searchBox/SearchBox\";\r\nimport \"./SearchBar.css\";\r\n\r\nconst SearchBar = () => {\r\n    \r\n    const [toggleDropbox,setToggleDropbox] = useState(false);\r\n    const [searchTerm,setSearchTerm] = useState<string>(\"\");\r\n    const timeoutRef = useRef<any>(null);\r\n\r\n    const token = useAppSelector(state => state.auth.token);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n        const { value } = e.target;\r\n        setSearchTerm(value);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(timeoutRef.current !== null){\r\n            clearTimeout(timeoutRef.current)\r\n        }\r\n\r\n        timeoutRef.current = setTimeout(() => {\r\n           timeoutRef.current = null;\r\n           if(searchTerm !== \"\"){\r\n              dispatch(fetchUsers({ token,searchTerm }))\r\n           }\r\n        },1000)\r\n\r\n    },[searchTerm,token,dispatch])\r\n\r\n    return (\r\n        <div className=\"search__bar\">\r\n            { toggleDropbox && <Backdrop toggle={setToggleDropbox} className=\"search__bar__backdrop\"/>}\r\n            <i className=\"fa fa-search\"></i>\r\n            <input type=\"search\" value={searchTerm} onFocus={() => setToggleDropbox(true)} onChange={handleChange} className=\"search__input\" placeholder=\"Search\"/>\r\n            { toggleDropbox && <SearchBox setToggleDropbox={setToggleDropbox}/> }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchBar;\r\n","import { useState } from \"react\";\r\nimport { NavLink, useNavigate } from \"react-router-dom\";\r\nimport { resetActivities } from \"../../features/activity/activitySlice\";\r\nimport { logout } from \"../../features/auth/authSlice\";\r\nimport { resetChat } from \"../../features/chats/chatsSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport Backdrop from \"../../utils/Backdrop/Backdrop\";\r\nimport DropBox from \"../../utils/DropBox/DropBox\";\r\nimport SearchBar from \"../SearchBar/SearchBar\";\r\nimport \"./Header.css\";\r\n\r\nconst Header = () => {\r\n  const [toggleDropbox,setToggleDropbox] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const handleProfile = () => {\r\n     setToggleDropbox(state => !state)\r\n  }\r\n\r\n  const handleLogout = () => {\r\n     dispatch(logout())\r\n     dispatch(resetChat())\r\n     dispatch(resetActivities());\r\n     navigate(\"/\")\r\n  }\r\n\r\n  const { profile } = useAppSelector(state => state.profile);\r\n\r\n  return (\r\n        <div className=\"header\">\r\n            { toggleDropbox && <Backdrop toggle={setToggleDropbox}/> }\r\n          \r\n\r\n            <NavLink end to=\"/\">\r\n               <div className=\"insta__logo\">\r\n                 <img src=\"https://i.imgur.com/zqpwkLQ.png\" alt=\"instagram\" width=\"100%\" height=\"100%\"/>\r\n               </div>\r\n            </NavLink>\r\n\r\n            <SearchBar/>\r\n\r\n            <div className=\"right__section\">\r\n\r\n              <NavLink end to=\"/\" className=\"nav__link\" activeClassName=\"active__link\">\r\n                 <svg aria-label=\"Home\" className=\"not__active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z\"></path></svg>\r\n                 <svg aria-label=\"Home\" className=\"active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z\"></path></svg>\r\n              </NavLink>\r\n\r\n              <NavLink end to=\"/post/add\" className=\"nav__link\" activeClassName=\"active__link\">\r\n                 <div className=\"add__post__icon1 not__active\"></div>\r\n                 <div className=\"add__post__icon2 active\"></div>\r\n              </NavLink>\r\n\r\n              <NavLink end to=\"/chats\" className=\"nav__link messenger\" activeClassName=\"active__link\">\r\n                 <svg aria-label=\"Messenger\" className=\"not__active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M36.2 16.7L29 22.2c-.5.4-1.2.4-1.7 0l-5.4-4c-1.6-1.2-3.9-.8-5 .9l-6.8 10.7c-.7 1 .6 2.2 1.6 1.5l7.3-5.5c.5-.4 1.2-.4 1.7 0l5.4 4c1.6 1.2 3.9.8 5-.9l6.8-10.7c.6-1.1-.7-2.2-1.7-1.5zM24 1C11 1 1 10.5 1 23.3 1 30 3.7 35.8 8.2 39.8c.4.3.6.8.6 1.3l.2 4.1c0 1 .9 1.8 1.8 1.8.2 0 .5 0 .7-.2l4.6-2c.2-.1.5-.2.7-.2.2 0 .3 0 .5.1 2.1.6 4.3.9 6.7.9 13 0 23-9.5 23-22.3S37 1 24 1zm0 41.6c-2 0-4-.3-5.9-.8-.4-.1-.8-.2-1.3-.2-.7 0-1.3.1-2 .4l-3 1.3V41c0-1.3-.6-2.5-1.6-3.4C6.2 34 4 28.9 4 23.3 4 12.3 12.6 4 24 4s20 8.3 20 19.3-8.6 19.3-20 19.3z\"></path></svg>\r\n                 <svg aria-label=\"Messenger\" className=\"active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path clipRule=\"evenodd\" d=\"M10.2 29.8c-.7 1 .6 2.2 1.6 1.5l7.3-5.5c.5-.4 1.2-.4 1.7 0l5.4 4c1.6 1.2 3.9.8 5-.9L38 18.2c.7-1-.6-2.2-1.6-1.5L29 22.2c-.5.4-1.2.4-1.7 0l-5.4-4c-1.6-1.2-3.9-.8-5 .9l-6.7 10.7zM24 1c13 0 23 9.5 23 22.3S37 45.6 24 45.6c-2.3 0-4.6-.3-6.7-.9-.4-.1-.8-.1-1.2.1l-4.6 2c-1.1.6-2.5-.3-2.5-1.6l-.1-4.1c0-.5-.2-1-.6-1.3C3.7 35.8 1 30 1 23.3 1 10.5 11 1 24 1z\" fillRule=\"evenodd\"></path></svg>\r\n              </NavLink>\r\n\r\n              <NavLink end to=\"/activity\" className=\"nav__link\" activeClassName=\"active__link\">\r\n                 <svg aria-label=\"Activity Feed\" className=\"not__active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path></svg>\r\n                 <svg aria-label=\"Activity Feed\" className=\"active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path></svg>\r\n              </NavLink>\r\n\r\n              <button className=\"logout__btn\"  onClick={handleLogout}>\r\n                 <i className=\"fa fa-sign-out\"></i>\r\n              </button>\r\n\r\n              <button className=\"profile__btn\" onClick={handleProfile}>\r\n                  <img className=\"profile__icon\" alt=\"profile\" src={profile.pic}/>\r\n              </button>\r\n\r\n              {toggleDropbox && <DropBox toggle={setToggleDropbox}/>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../store/hooks\";\r\nimport \"./Footer.css\";\r\n\r\nconst Footer = () => {\r\n    const { profile } = useAppSelector(state => state.profile);\r\n\r\n    return (\r\n        <footer className=\"footer\">\r\n              <NavLink end to=\"/\" className=\"nav__link\" activeClassName=\"active__link\">\r\n                 <svg aria-label=\"Home\" className=\"not__active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z\"></path></svg>\r\n                 <svg aria-label=\"Home\" className=\"active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z\"></path></svg>\r\n              </NavLink>\r\n\r\n              <NavLink end to=\"/search\">\r\n                  <i className=\"fa fa-search\"></i>\r\n              </NavLink>\r\n\r\n              <NavLink end to=\"/post/add\" className=\"nav__link\" activeClassName=\"active__link\">\r\n                 <div className=\"add__post__icon1 not__active\"></div>\r\n                 <div className=\"add__post__icon2 active\"></div>\r\n              </NavLink>\r\n\r\n              <NavLink end to=\"/activity\" className=\"nav__link\" activeClassName=\"active__link\">\r\n                 <svg aria-label=\"Activity Feed\" className=\"not__active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path></svg>\r\n                 <svg aria-label=\"Activity Feed\" className=\"active\" fill=\"#262626\" height=\"22\" viewBox=\"0 0 48 48\" width=\"22\"><path d=\"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path></svg>\r\n              </NavLink>\r\n\r\n              <NavLink to=\"/profile\">\r\n                  <div className=\"avatar\">\r\n                     <img className=\"avatar\" alt=\"profile\" src={profile.pic}/>\r\n                  </div>\r\n              </NavLink>\r\n        </footer>\r\n    );\r\n};\r\n\r\nexport default Footer;\r\n","import { createSlice,createAsyncThunk, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { PostData,PostsIntialState, PostResponse,UploadPostData, PostWithPopulateComment } from \"./posts.types\";\r\n\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../constants\";\r\n\r\nconst initialState:PostsIntialState = {\r\n    posts:[],\r\n    status:\"idle\",\r\n    hasMore:true,\r\n    page:1,\r\n    loading:true\r\n};\r\n\r\nexport const fetchPosts = createAsyncThunk<PostData,{token:string,page:number}>(\"posts/fetchPosts\",async({token,page}) => {\r\n    const res = await axios.get(`${BASE_URL}/posts?page=${page}&limit=5`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nexport const fetchComments = createAsyncThunk<{post:PostWithPopulateComment},{token:string,postId:string}>(\"posts/fetchcomments\",async({token,postId},thunkApi) => {\r\n    const res = await axios.get(`${BASE_URL}/posts/${postId}/comment`,{\r\n         headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nexport const uploadPost = createAsyncThunk<PostResponse,UploadPostData>(\"posts/uploadpost\",async({file,caption,token}) => {\r\n    const formData = new FormData();\r\n          formData.append(\"file\",file);\r\n          formData.append(\"caption\",caption);\r\n\r\n    const res = await axios.post(`${BASE_URL}/posts`,formData,{\r\n            headers:{ \"Authorization\":`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nexport const likePressed = createAsyncThunk<PostResponse,{token:string,postId:string}>(\"posts/likepressed\",async({token,postId}) => {\r\n    const res = await axios.post(`${BASE_URL}/posts/${postId}/like`,{},{\r\n         headers:{ authorization:`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nexport const commentPressed = createAsyncThunk<PostResponse,{token:string,comment:string,postId:string}>(\"posts/commentpressed\",async({token,comment,postId}) => {\r\n    const res = await axios.post(`${BASE_URL}/posts/${postId}/comment`,{comment},{\r\n         headers:{ authorization:`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nexport const fetchPost = createAsyncThunk<PostResponse,{token:string,postId:string}>(\"posts/fetchpost\",async({token,postId}) => {\r\n    const res = await axios.get(`${BASE_URL}/posts/${postId}`,{\r\n         headers:{ authorization:`Bearer ${token}` }\r\n    });\r\n    return res.data;\r\n})\r\n\r\nconst postsSlice = createSlice({\r\n    name:\"posts\",\r\n    initialState,\r\n    reducers:{\r\n        increasePostsPageNumber:(state:PostsIntialState) => {\r\n           state.page = state.page + 1;\r\n        },\r\n        setLoading:(state:PostsIntialState,action:PayloadAction<{loading:boolean}>) => {\r\n            state.loading = action.payload.loading;\r\n        }\r\n    },\r\n    extraReducers:(builder) => {\r\n        builder.addCase(fetchPosts.rejected,(state:PostsIntialState) => {\r\n            state.status = \"failed\"\r\n        })\r\n\r\n        builder.addCase(fetchPosts.pending,(state:PostsIntialState) => {\r\n            state.status = \"pending\"\r\n        })\r\n\r\n        builder.addCase(fetchPosts.fulfilled,(state:PostsIntialState,action:PayloadAction<PostData>) => {\r\n            state.status = \"succeeded\"\r\n            state.hasMore = action.payload.posts.length > 0\r\n            state.posts = state.posts.concat(action.payload.posts)\r\n        })\r\n\r\n        builder.addCase(uploadPost.fulfilled,(state:PostsIntialState,action:PayloadAction<PostResponse>) => {\r\n           state.posts.unshift(action.payload.post)\r\n        })\r\n\r\n        builder.addCase(likePressed.fulfilled,(state:PostsIntialState,action:PayloadAction<PostResponse>) => {\r\n            const postIndex = state.posts.findIndex((post) => post._id === action.payload.post._id );\r\n            state.posts[postIndex] = action.payload.post;\r\n        })\r\n\r\n        builder.addCase(commentPressed.fulfilled,(state:PostsIntialState,action:PayloadAction<PostResponse>) => {\r\n            const postIndex = state.posts.findIndex((post) => post._id === action.payload.post._id );\r\n            state.posts[postIndex] = action.payload.post;\r\n        })\r\n\r\n    }\r\n})\r\n\r\nexport const {setLoading,increasePostsPageNumber} = postsSlice.actions;\r\n\r\nexport default postsSlice.reducer;","export function timestamp(postDate:Date) {\r\n    const currentDate = new Date();\r\n\r\n    let seconds = Math.floor( (currentDate.getTime() - postDate.getTime()) / 1000);\r\n  \r\n    let interval = seconds / 31536000;\r\n  \r\n    if (interval > 1) {\r\n      return postDate.toDateString().slice(4);\r\n    }\r\n\r\n    interval = seconds / 2592000;\r\n    if (interval > 1) {\r\n      return Math.floor(interval) + (Math.floor(interval) > 1 ? \" MONTHS\" : \" MONTH\");\r\n    }\r\n\r\n    interval = seconds / 86400;\r\n    if (interval > 1) {\r\n      return Math.floor(interval) + (Math.floor(interval) > 1 ? \" DAYS\" : \" DAY\");\r\n    }\r\n\r\n    interval = seconds / 3600;\r\n    if (interval > 1) {\r\n      return Math.floor(interval) + (Math.floor(interval) > 1 ? \" HOURS\" : \" HOUR\");\r\n    }\r\n\r\n    interval = seconds / 60;\r\n    if (interval > 1) {\r\n      return Math.floor(interval) + (Math.floor(interval) > 1 ? \" MINUTES\" : \" MINUTE\");\r\n    }\r\n    return Math.floor(seconds) + (Math.floor(interval) > 1 ? \" SECONDS\" : \" SECOND\");\r\n}","import { useNavigate } from \"react-router-dom\";\r\nimport { likePressed } from \"../../features/posts/postsSlice\";\r\nimport { savedPostPressed } from \"../../features/savedposts/savedpostsSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\n\r\ntype PostIconProps = {\r\n   like:boolean;\r\n   postId:string;\r\n}\r\n\r\nconst PostIcons = ({like,postId}:PostIconProps) => {\r\n   \r\n    const {token} = useAppSelector(state => state.auth);\r\n    const {posts} = useAppSelector(state => state.savedposts);\r\n\r\n    const checkPostIsSavedOrNot = posts.find(p => p._id === postId);\r\n\r\n    const dispatch = useAppDispatch();\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div className=\"post__icons\">\r\n               <div>\r\n                   <button className=\"icon\" onClick={() => dispatch(likePressed({token,postId}))}>\r\n                      { !like ? <svg aria-label=\"Like\" style={{ marginRight:\"0.5rem\" }} fill=\"#262626\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path d=\"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path></svg>\r\n                      :<svg aria-label=\"Unlike\" style={{ marginRight:\"0.5rem\" }} fill=\"#ed4956\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path d=\"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path></svg>}\r\n                   </button>\r\n\r\n                   <button className=\"icon\" onClick={() => navigate(`/comments/${postId}`)}>\r\n                      <svg aria-label=\"Comment\" fill=\"#262626\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path clipRule=\"evenodd\" d=\"M47.5 46.1l-2.8-11c1.8-3.3 2.8-7.1 2.8-11.1C47.5 11 37 .5 24 .5S.5 11 .5 24 11 47.5 24 47.5c4 0 7.8-1 11.1-2.8l11 2.8c.8.2 1.6-.6 1.4-1.4zm-3-22.1c0 4-1 7-2.6 10-.2.4-.3.9-.2 1.4l2.1 8.4-8.3-2.1c-.5-.1-1-.1-1.4.2-1.8 1-5.2 2.6-10 2.6-11.4 0-20.6-9.2-20.6-20.5S12.7 3.5 24 3.5 44.5 12.7 44.5 24z\" fillRule=\"evenodd\"></path></svg>\r\n                   </button>\r\n               </div>\r\n               \r\n               <div>\r\n                  <button className=\"icon\" onClick={() => dispatch(savedPostPressed({token,postId}))}>\r\n                     { !checkPostIsSavedOrNot ? <svg aria-label=\"Save\" fill=\"#262626\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path d=\"M43.5 48c-.4 0-.8-.2-1.1-.4L24 29 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1zM24 26c.8 0 1.6.3 2.2.9l15.8 16V3H6v39.9l15.8-16c.6-.6 1.4-.9 2.2-.9z\"></path></svg>\r\n                     : <svg aria-label=\"Remove\" fill=\"#262626\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path d=\"M43.5 48c-.4 0-.8-.2-1.1-.4L24 28.9 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1z\"></path></svg>}\r\n                  </button>\r\n               </div>\r\n         </div>\r\n    );\r\n};\r\n\r\nexport default PostIcons;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { fetchChats, sendMessage, updateChat } from \"../../../features/chats/chatsSlice\";\r\nimport { Chat } from \"../../../features/chats/chatsSlice.types\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../store/hooks\";\r\nimport io from \"socket.io-client\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nlet socket:any;\r\nlet endpoint = \"https://insta-clone-10062000.herokuapp.com\";\r\n\r\nconst UserChatsMobile = () => {\r\n  \r\n    const [input,setInput] = useState<string>(\"\");\r\n    const [typing,setTyping] = useState<boolean>(false);\r\n\r\n    const messagesEndRef = useRef<any>(null);\r\n    const typingRef = useRef<any>(null);\r\n\r\n    const { chatId } = useParams();\r\n    const { chats } = useAppSelector((state) => state.chats);\r\n    const userId = useAppSelector((state) => state.auth.user?._id);\r\n    const token = useAppSelector(state => state.auth.token);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const chat = chats.find(chat => chat._id === chatId);\r\n    const user = chat?.users.find( user => user._id !== userId );\r\n\r\n    const handleSubmit = (e:React.SyntheticEvent) => {\r\n      e.preventDefault();\r\n      if( chat && input !==\"\" ){\r\n        dispatch(sendMessage({ token,text:input,chatId:chat?._id }))\r\n        .then(unwrapResult)\r\n        .then((originalPromiseResult) => {\r\n           socket.emit(\"sendMessage\",chatId,originalPromiseResult.chat)\r\n        });\r\n        setInput(\"\");\r\n      }\r\n    }\r\n\r\n    const { status } = useAppSelector((state) => state.chats);\r\n\r\n    useEffect(() => {\r\n        if (status === \"idle\") {\r\n          dispatch(fetchChats({ token }));\r\n        }\r\n    }, [status,dispatch,token]);\r\n\r\n    useEffect(() => {\r\n      socket = io(endpoint)\r\n      if(userId){\r\n         socket.emit(\"joinRoom\",chatId,userId)\r\n      }\r\n      socket.on(\"receiveMsg\",(chat:Chat) => {\r\n         dispatch(updateChat({chat}))\r\n      })\r\n      socket.on(\"typing\",() => {\r\n         setTyping(true)\r\n      })\r\n      socket.on(\"stopTyping\",() => {\r\n         setTyping(false)\r\n      })\r\n    },[chatId,userId,dispatch])\r\n    \r\n    useEffect(() => {\r\n      messagesEndRef.current?.scrollIntoView();\r\n    },[chat?.messages])\r\n\r\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n      setInput(e.target.value)\r\n      if(typingRef.current !== null){\r\n         clearTimeout(typingRef.current)\r\n      }\r\n      socket.emit(\"typing\",chatId);\r\n      typingRef.current = setTimeout(() => {\r\n        typingRef.current = null;\r\n        socket.emit(\"stopTyping\",chatId);\r\n      },500)\r\n   }\r\n    \r\n    return (\r\n        <div className=\"userchats userchatsmobile\">\r\n            <div className=\"chats\">\r\n\r\n                 {\r\n                    chat?.messages.map(message => message?.user?._id !== userId ? (\r\n                      <div className=\"received\" key={message?._id}>\r\n                        <Link to={`/viewprofile/${user?._id}`}>\r\n                           <img width=\"30px\" className=\"user__pic\" alt=\"users\" height=\"30px\" src={message?.user?.pic}/>\r\n                        </Link>\r\n                        <p className=\"received__message\">\r\n                           {message?.text}\r\n                        </p>\r\n                     </div>\r\n                    ):\r\n                    (\r\n                      <div className=\"send\" key={message?._id}>\r\n                        <p className=\"send__message\">\r\n                           {message?.text}\r\n                        </p>\r\n                      </div>\r\n                    )\r\n                    )\r\n                 }\r\n\r\n               <div ref={messagesEndRef}/>\r\n            </div>\r\n\r\n            <form className=\"userchats__form\" onSubmit={handleSubmit}>\r\n                {typing && <span className=\"typing\"><strong>{user?.username}</strong> is typing...</span>}\r\n                <div className=\"form__group\">\r\n                  <input type=\"text\" value={input} onChange={handleChange} className=\"chats__input\" placeholder=\"Message...\"/>\r\n                  <input type=\"submit\" className=\"send__btn\" disabled={input === \"\"} value=\"Send\"/>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserChatsMobile;","import { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { sendMessage, updateChat } from \"../../../features/chats/chatsSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../store/hooks\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { Chat } from \"../../../features/chats/chatsSlice.types\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport io from \"socket.io-client\";\r\n\r\nlet socket:any;\r\nlet endpoint = \"https://insta-clone-10062000.herokuapp.com/\";\r\n\r\nconst UserChatsDesktop = () => {\r\n\r\n    const [input,setInput] = useState<string>(\"\");\r\n    const [typing,setTyping] = useState<boolean>(false);\r\n    const [sendingStatus,setSendingStatus] = useState<boolean>(false);\r\n\r\n    const messagesEndRef = useRef<any>(null);\r\n    const typingRef = useRef<any>(null);\r\n\r\n    const { chatId } = useParams();\r\n    const { chats } = useAppSelector((state) => state.chats);\r\n    const userId = useAppSelector((state) => state.auth.user?._id);\r\n    const token = useAppSelector(state => state.auth.token);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const chat = chats.find(chat => chat._id === chatId);\r\n    const user = chat?.users.find( user => user._id !== userId );\r\n\r\n    useEffect(() => {\r\n       socket = io(endpoint)\r\n       if(userId){\r\n          socket.emit(\"joinRoom\",chatId,userId)\r\n       }\r\n       socket.on(\"receiveMsg\",(chat:Chat) => {\r\n          dispatch(updateChat({chat}))\r\n       })\r\n       socket.on(\"typing\",() => {\r\n          setTyping(true)\r\n       })\r\n       socket.on(\"stopTyping\",() => {\r\n          setTyping(false)\r\n       })\r\n    },[chatId,userId,dispatch])\r\n\r\n    useEffect(() => {\r\n      messagesEndRef.current?.scrollIntoView();\r\n    },[chat?.messages])\r\n\r\n    const handleSubmit = (e:React.SyntheticEvent) => {\r\n      e.preventDefault();\r\n      if( chat && input !==\"\" ){\r\n        setSendingStatus(true)\r\n        dispatch(sendMessage({ token,text:input,chatId:chat?._id }))\r\n        .then(unwrapResult)\r\n        .then((originalPromiseResult) => {\r\n           socket.emit(\"sendMessage\",chatId,originalPromiseResult.chat)\r\n           setSendingStatus(false);\r\n           setInput(\"\");\r\n        });\r\n      }\r\n    }\r\n\r\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n       setInput(e.target.value)\r\n       if(typingRef.current !== null){\r\n          clearTimeout(typingRef.current)\r\n       }\r\n       socket.emit(\"typing\",chatId);\r\n       typingRef.current = setTimeout(() => {\r\n         typingRef.current = null;\r\n         socket.emit(\"stopTyping\",chatId);\r\n       },500)\r\n    }\r\n     \r\n    return (\r\n        <div className=\"userchats\">\r\n            <header >\r\n               <Link to={`/viewprofile/${user?._id}`} className=\"userchats__header\">\r\n                 <img width=\"30px\" className=\"user__pic\" alt=\"users\" height=\"30px\" src={user?.pic}/>\r\n                 <div className=\"username\">{user?.username}</div>\r\n               </Link>\r\n            </header>\r\n\r\n            <div className=\"chats\">\r\n\r\n                 {\r\n                    chat?.messages.map(message => message?.user?._id !== userId ? (\r\n                      <div className=\"received\" key={message?._id}>\r\n                        <Link to={`/viewprofile/${user?._id}`}>\r\n                           <img width=\"30px\" className=\"user__pic\" alt=\"users\" height=\"30px\" src={message?.user?.pic}/>\r\n                        </Link>\r\n                        <p className=\"received__message\">\r\n                           {message?.text}\r\n                        </p>\r\n                     </div>\r\n                    ):\r\n                    (\r\n                      <div className=\"send\" key={message?._id}>\r\n                        <p className=\"send__message\">\r\n                           {message?.text}\r\n                        </p>\r\n                      </div>\r\n                    )\r\n                    )\r\n                 }\r\n               <div ref={messagesEndRef}/>\r\n\r\n            </div>\r\n\r\n            <form className=\"userchats__form\" onSubmit={handleSubmit}>\r\n                {typing && <span className=\"typing\"><strong>{user?.username}</strong> is typing...</span>}\r\n                { sendingStatus && <span className=\"sending\">sending...</span>}\r\n\r\n                <div className=\"form__group\">\r\n                  <input type=\"text\" value={input} onChange={handleChange} className=\"chats__input\" placeholder=\"Message...\"/>\r\n                  <input type=\"submit\" className=\"send__btn\" disabled={input === \"\" || sendingStatus} value=\"Send\"/>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserChatsDesktop;","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Post } from \"../../features/posts/posts.types\";\r\nimport { timestamp } from \"../../utils/timestamp/timestamp\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport { commentPressed } from \"../../features/posts/postsSlice\";\r\n\r\nimport PostIcons from \"./PostIcons\";\r\n\r\nimport ReactPlayer from \"react-player\";\r\n\r\nimport \"./Post.css\";\r\n\r\nconst PostCard = ({lastElementRef,_id,file,postedBy,caption,comments,likes,createdAt}:Post) => {\r\n    const time = timestamp(new Date(createdAt));\r\n    const userId = useAppSelector(state => state.auth.user?._id);\r\n    const { token } = useAppSelector(state => state.auth);\r\n    const dispatch = useAppDispatch();\r\n    const like = likes.find( uid => uid === userId );\r\n    const extension = file.split(\".\").pop() || \"\";\r\n\r\n    const isImg = [\"jpg\",\"png\",\"jpeg\"].includes(extension);\r\n    const isVideo = [\"mp3\",\"mp4\"].includes(extension);\r\n\r\n    const [comment,setComment] = useState<string>(\"\");\r\n\r\n    const handleSubmit = (e:React.SyntheticEvent) => {\r\n        e.preventDefault();\r\n        dispatch(commentPressed({token,comment,postId:_id}));\r\n        setComment(\"\");\r\n    }\r\n    \r\n    return (\r\n        <div className=\"post\">\r\n            <div className=\"post__header\">\r\n                <Link to={postedBy._id === userId ? \"/profile\" : `/viewprofile/${postedBy._id}`} className=\"avatar\">\r\n                  <img className=\"avatar__img\" alt=\"profile\" src={postedBy.pic}/>\r\n                  <span className=\"username\">{postedBy.username}</span>\r\n                </Link>\r\n                {/* Implement this options later\r\n                <div className=\"options\">...</div> */}\r\n            </div>\r\n\r\n            {isImg && <img alt=\"pic\" width=\"100%\" height=\"auto\" src={file}/>}\r\n            {isVideo && <ReactPlayer controls={true} url={file} width=\"100%\" height=\"auto\"/>}\r\n            \r\n            <div className=\"post__footer\">\r\n                <PostIcons postId={_id} like={like ? true : false}/>\r\n                <h6 className=\"post__likes\">{likes.length} likes</h6>\r\n                <div className=\"post__caption\">\r\n                    <strong>{postedBy.username}</strong> {caption}\r\n                </div>\r\n                <Link to={`/comments/${_id}`} className=\"post__comments\">{ comments.length === 0 ? \"no comments\" : `View all ${comments.length} comments` }</Link>\r\n                \r\n                <div className=\"post__time\">\r\n                    {time} AGO\r\n                </div>\r\n\r\n                <form className=\"commentBox\" ref={lastElementRef} onSubmit={handleSubmit}>\r\n                  <input type=\"text\" value={comment} onChange={(e) => setComment(e.target.value)} className=\"add__comment\" placeholder=\"Add a comment...\"/>\r\n                  <button type=\"submit\" className=\"post__btn\" disabled={comment === \"\"}>Post</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostCard;","import { Link } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../../store/hooks\";\r\n\r\nconst ProfileBox = () => {\r\n  const user = useAppSelector(state => state.profile.profile);\r\n  const profile = useAppSelector(state => state.profile)\r\n  \r\n  return (\r\n     <div className=\"profile__box\">\r\n         <Link to=\"/profile\" className=\"avatar\">\r\n         <img\r\n            className=\"avatar__img\"\r\n            alt=\"profile\"\r\n            src={user?.pic}\r\n         />\r\n         \r\n          <span className=\"fullname\">{user?.fullname}</span>\r\n         </Link>\r\n         <div className=\"profile__details\">\r\n            <Link to=\"/profile\" className=\"profile__detail\">\r\n               <div>\r\n                  <span> {profile.userposts.length}</span>\r\n               </div>\r\n               <span> Posts</span>\r\n            </Link>\r\n            <Link to={`/followers/${user?._id}`} className=\"profile__detail\">\r\n               <div>\r\n                 <i className=\"far fa-user\"></i>\r\n                 <span> {profile.connections.followers.length}</span>\r\n               </div>\r\n               <span> Followers</span>\r\n            </Link>\r\n            <Link to={`/following/${user?._id}`} className=\"profile__detail\">\r\n               <div>\r\n                 <i className=\"far fa-user\"></i>\r\n                 <span> {profile.connections.following.length}</span>\r\n               </div>\r\n               <span> Following</span>\r\n            </Link>\r\n         </div>\r\n     </div>\r\n  );\r\n};\r\n\r\nexport default ProfileBox;\r\n","import { useCallback } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { increasePostsPageNumber } from \"../../features/posts/postsSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport Post from \"../Post/PostCard\";\r\nimport ProfileBox from \"./components/ProfileBox\";\r\nimport \"./HomeContent.css\";\r\n\r\nconst HomeContent = () => {\r\n    const {hasMore,loading,posts} = useAppSelector(state => state.posts);\r\n    const dispatch = useAppDispatch();\r\n    const observer = useRef<IntersectionObserver>();\r\n\r\n    const lastElementRef = useCallback((node) => {\r\n        if(loading) return;\r\n        if(observer.current) observer.current.disconnect()\r\n        observer.current = new IntersectionObserver(entries => {\r\n            if(entries[0].isIntersecting && hasMore){\r\n                dispatch(increasePostsPageNumber())\r\n            }\r\n        })\r\n        if(node) observer.current.observe(node)\r\n    },[loading,dispatch,hasMore])\r\n\r\n    return (\r\n        <div className=\"home__content\">\r\n            <div className=\"left__section\">\r\n                {\r\n                    posts.map( (post,i) => {\r\n                       if(i+1 === posts.length){\r\n                         return <Post lastElementRef={lastElementRef} key={post._id} {...post} />\r\n                       }\r\n                       return <Post key={post._id} {...post} />\r\n                    })\r\n                }\r\n               <div style={{margin:\"1.5rem 0\"}}>{loading && <Spinner/>}</div>\r\n                {!loading && posts.length === 0 && <div className=\"no__posts__found\">Follow your friends to see posts</div> }\r\n            </div>\r\n            <div className=\"right__section\">\r\n                <ProfileBox/>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HomeContent;","import HomeContent from \"../../components/HomeContent/HomeContent\";\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div>\r\n           <HomeContent/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n","import { Link, useNavigate } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../../store/hooks\";\r\n\r\nconst ProfileSection = () => {\r\n    const {connections,profile,userposts} = useAppSelector(state => state.profile);\r\n    const navigate = useNavigate();\r\n\r\n    return (\r\n        <div className=\"profile__section\">\r\n               <img className=\"profile__avatar\" alt=\"profile\" src={profile.pic}/>\r\n               <span className=\"username__mobile\">{profile.username}</span>\r\n               <div className=\"profile__details\">\r\n                   <div className=\"section__1\">\r\n                       <span className=\"username__desktop\">{profile.username}</span>\r\n                       <button className=\"edit__profile__btn\" onClick={() => navigate(\"/profile/edit\")}>Edit Profile</button>\r\n                   </div>\r\n                   <div className=\"section__2\">\r\n                       <div><span>{userposts.length}</span> posts</div>\r\n                       <Link to={`/followers/${profile._id}`} className=\"nav__link\"><span>{connections?.followers.length}</span> followers</Link>\r\n                       <Link to={`/following/${profile._id}`} className=\"nav__link\"><span>{connections?.following.length}</span> following</Link>\r\n                   </div>\r\n                   <div className=\"section__3\">\r\n                       <div className=\"fullname\">{profile.fullname}</div>\r\n                       <p className=\"bio\">{profile.bio}</p>\r\n                       <a href={profile.website} rel=\"noreferrer\" target=\"_blank\" className=\"website__link\">{profile.website}</a>\r\n                   </div>\r\n               </div>\r\n            </div>\r\n    );\r\n};\r\n\r\nexport default ProfileSection;\r\n","import { Outlet } from \"react-router-dom\";\r\nimport ProfileSection from \"./components/ProfileSection\";\r\nimport \"./Profile.css\";\r\n\r\nconst Profile = () => {\r\n    return (\r\n        <div className=\"profile__container\">\r\n            <ProfileSection/>\r\n            <Outlet/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n","import { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { PostWithPopulateComment } from \"../../features/posts/posts.types\";\r\nimport { fetchComments } from \"../../features/posts/postsSlice\";\r\nimport { Status } from \"../../generic.types\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport { useIsMountedRef } from \"../../utils/custom-hooks/useIsMountedRef\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { timestamp } from \"../../utils/timestamp/timestamp\";\r\nimport \"./Comments.css\";\r\n\r\nconst Comments = () => {\r\n    const mountedRef = useIsMountedRef();\r\n    const dispatch = useAppDispatch();\r\n    const { postId } = useParams();\r\n    const { token } = useAppSelector(state => state.auth);\r\n\r\n    const [data,setData] = useState<PostWithPopulateComment|null>(null);\r\n    const [status,setStatus] = useState<Status>(\"idle\");\r\n    const time = data?.createdAt ? timestamp(new Date(data?.createdAt)) : 0;\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        (async function(){\r\n            if(mountedRef.current){\r\n                dispatch(fetchComments({token,postId}))\r\n                .then(unwrapResult)\r\n                .then(originalPromiseResult => {\r\n                    setData(originalPromiseResult.post)\r\n                    setStatus(\"succeeded\")\r\n                })\r\n          }})()\r\n    },[dispatch,token,postId,mountedRef])\r\n\r\n    return (\r\n        <div className=\"comments__container\">\r\n           { status === \"succeeded\" &&  <>\r\n            <div className=\"comments__header\">\r\n                <button className=\"backBtn\" onClick={() => navigate(-1)}><i className=\"fa fa-arrow-left\" aria-hidden=\"true\"></i></button>\r\n                <h3>Comments</h3>\r\n            </div>\r\n\r\n            <div className=\"post__caption\">\r\n                <div className=\"avatar\">\r\n                  <img className=\"avatar\" alt=\"post\" src={data?.postedBy.pic}/>\r\n                </div>\r\n                <div className=\"caption__content\">\r\n                    <div>\r\n                      <span className=\"username\">{data?.postedBy.username}</span>\r\n                      <span className=\"caption\">{data?.caption}</span>\r\n                    </div>\r\n                    <div>\r\n                        <span className=\"post__time\">{time}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            </>\r\n            }\r\n\r\n            {\r\n                data?.comments.map( comment => {\r\n                    let time = timestamp(new Date(comment.createdAt));\r\n                    return(\r\n                    <div className=\"comments\" key={comment._id}>\r\n                       <div className=\"avatar\">\r\n                          <img className=\"avatar\" alt=\"post\" src={comment.user.pic}/>\r\n                       </div>\r\n                       <div className=\"caption__content\">\r\n                         <div>\r\n                            <span className=\"username\">{comment.user.username}</span>\r\n                            <span className=\"caption\">{comment.text}</span>\r\n                         </div>\r\n                         <div>\r\n                            <span className=\"post__time\">{time}</span>\r\n                            {/* Implement this later\r\n                            <button className=\"likes__btn\">{comment.likes.length} likes</button>\r\n                            <button className=\"reply__btn\">Reply</button> */}\r\n                          </div>\r\n                       </div>\r\n                    </div>\r\n                )})\r\n            }\r\n\r\n            { status !== \"succeeded\" && \r\n              <div className=\"spinner__container\">\r\n                  <Spinner/>\r\n              </div>\r\n            }       \r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Comments;","import { useEffect, useRef, useState } from \"react\";\r\nimport { fetchUsers } from \"../../features/users/usersSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport SearchBoxResult from \"../../utils/searchBox/SearchBoxResult\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport \"./Search.css\";\r\n\r\nconst Search = () => {\r\n    const [show,setShow] = useState<boolean>(false);\r\n    const [input,setInput] = useState<string>(\"\");\r\n    const timeoutRef = useRef<any>(null);\r\n    const token = useAppSelector(state => state.auth.token);\r\n    const { users,status } = useAppSelector(state => state.users);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n        const {value} = e.target;\r\n        setInput(value);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(timeoutRef.current !== null){\r\n            clearTimeout(timeoutRef.current)\r\n        }\r\n\r\n        timeoutRef.current = setTimeout(() => {\r\n           timeoutRef.current = null;\r\n           if(input !== \"\"){\r\n              dispatch(fetchUsers({ token,searchTerm:input }))\r\n           }\r\n        },1000)\r\n\r\n    },[input,token,dispatch])\r\n\r\n    return (\r\n        <div className=\"search__container\">\r\n            \r\n            { status === \"pending\" && \r\n              <div className=\"spinner__container\">\r\n                  <Spinner/>\r\n              </div>\r\n            } \r\n            \r\n            <div className=\"search__header\">\r\n               { show && \r\n                  <button className=\"back__btn\">\r\n                      <i className=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>\r\n                  </button>\r\n               }\r\n                <input className=\"search__input\" value={input} placeholder=\"Search\" onChange={handleChange} onBlur={() => setShow(false)} onFocus={() => setShow(true)}/>\r\n            </div>\r\n\r\n            <div className=\"searchBox__results\">\r\n               { \r\n                 users.map(user => (\r\n                     <SearchBoxResult key={user._id} user={user}/>\r\n                 ))\r\n               }\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;\r\n","import { useLocation } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../../../store/hooks\";\r\n\r\nconst UsersList = () => {\r\n  const { pathname } = useLocation();\r\n  const { chats } = useAppSelector((state) => state.chats);\r\n  const userId = useAppSelector((state) => state.auth.user?._id);\r\n  const username = useAppSelector((state) => state.profile.profile.username);\r\n\r\n  const filteredChats = chats.filter( chat => chat.messages.length !== 0 || pathname === `/chats/${chat._id}` )\r\n\r\n  return (\r\n    <div className=\"userslist\">\r\n      <header className=\"userslist__header\">{username}</header>\r\n      {/* <div className=\"userslist__search__bar\">\r\n        <input className=\"search__input\" placeholder=\"Search\" />\r\n      </div> */}\r\n\r\n      {filteredChats.map((chat) => {\r\n        const user = chat.users.find( user => user._id !== userId )\r\n        return (\r\n          <Link to={`/chats/${chat._id}`} state={{ messages:chat.messages }} className=\"users\" key={chat._id}>\r\n            <img\r\n              width=\"60px\"\r\n              className=\"user__pic\"\r\n              alt=\"users\"\r\n              height=\"60px\"\r\n              src={user?.pic}\r\n            />\r\n            <div className=\"user__details\">\r\n              <div className=\"username\">{user?.username}</div>\r\n              {/* <div className=\"status\">Active now</div> */}\r\n            </div>\r\n          </Link>\r\n        );\r\n      })}\r\n\r\n      {\r\n         filteredChats.length === 0 && <div className=\"nochatsfound\">No chats found</div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsersList;\r\n","import UsersList from \"./components/UsersList\";\r\nimport { Outlet } from \"react-router\";\r\nimport { useEffect } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport { fetchChats } from \"../../features/chats/chatsSlice\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport \"./Chats.css\";\r\n\r\nconst Chats = () => {\r\n    const dispatch = useAppDispatch();\r\n    const { status } = useAppSelector((state) => state.chats);\r\n    const token = useAppSelector((state) => state.auth.token);\r\n\r\n    useEffect(() => {\r\n        if (status === \"idle\") {\r\n          dispatch(fetchChats({ token }));\r\n        }\r\n      }, [status,dispatch,token]);\r\n      \r\n    return (\r\n        <div className=\"chats__box\">\r\n             { status === \"succeeded\" && \r\n               <div className=\"chats__container\">\r\n                  <UsersList/>\r\n                  <Outlet/>\r\n               </div> \r\n             }\r\n             { status !== \"succeeded\" && \r\n               <div className=\"spinner__container\">\r\n                  <Spinner/>\r\n               </div>\r\n             }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chats;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useAppSelector } from \"../../store/hooks\";\r\nimport { fetchFollowers } from \"../../features/profile/profileSlice\";\r\nimport { FollowersOrFollowing } from \"../../features/profile/profileSlice.types\";\r\nimport { useAppDispatch } from \"../../store/hooks\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Status } from \"../../generic.types\";\r\n\r\nimport \"./Followers.css\";\r\n\r\nconst Followers = () => {\r\n    const [followers,setFollowers] = useState<FollowersOrFollowing[]>([]);\r\n    const dispatch = useAppDispatch();\r\n    const token = useAppSelector(state => state.auth.token);\r\n    const userId = useParams().userId;\r\n    const [status,setStatus] = useState<Status>(\"idle\");\r\n\r\n    useEffect(() => {\r\n           dispatch(fetchFollowers({token,userId}))\r\n          .then(unwrapResult)\r\n          .then( originalPromiseResult => {\r\n            setFollowers(originalPromiseResult.followers)\r\n            setStatus(\"succeeded\")\r\n          } )\r\n    },[token,userId,dispatch]);\r\n\r\n    return (\r\n        <div className=\"follow__container\">\r\n            <h4 className=\"follow__heading\">Followers</h4>\r\n            {\r\n              followers.map( user => (\r\n                <div className=\"follower\" key={user._id}>\r\n                <Link to={`/viewprofile/${user._id}`} className=\"user\">\r\n                  <img className=\"user__pic\" alt=\"users\" src={user.pic}/>\r\n                  <div className=\"user__details\">\r\n                    <span className=\"username\">{user.username}</span>\r\n                    <span className=\"fullname\">{user.fullname}</span>\r\n                  </div>\r\n                </Link>\r\n               </div>\r\n              ) )\r\n            }\r\n\r\n            { followers.length === 0 && status === \"succeeded\" && <p className=\"no__followers__found\">No followers found</p> }\r\n            { status !== \"succeeded\" && <div className=\"spinner__container\"> <Spinner/> </div>} \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Followers;","import { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Link,useParams } from \"react-router-dom\";\r\nimport { fetchFollowing } from \"../../features/profile/profileSlice\";\r\nimport { FollowersOrFollowing } from \"../../features/profile/profileSlice.types\";\r\nimport { Status } from \"../../generic.types\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\n\r\nconst Following = () => {\r\n    const [following,setFollowing] = useState<FollowersOrFollowing[]>([]);\r\n    const dispatch = useAppDispatch();\r\n    const token = useAppSelector(state => state.auth.token);\r\n   \r\n    const userId = useParams().userId;\r\n    const [status,setStatus] = useState<Status>(\"idle\");\r\n\r\n    useEffect(() => {\r\n      dispatch(fetchFollowing({token,userId}))\r\n     .then(unwrapResult)\r\n     .then( originalPromiseResult => {\r\n       setFollowing(originalPromiseResult.following)\r\n       setStatus(\"succeeded\")\r\n      } )\r\n    },[token,userId,dispatch]);\r\n\r\n    return (\r\n        <div className=\"follow__container\">\r\n            <h4 className=\"follow__heading\">Following</h4>\r\n            {\r\n              following.map( user => (\r\n                <div className=\"follower\" key={user._id}>\r\n                <Link to={`/viewprofile/${user._id}`} className=\"user\">\r\n                  <img className=\"user__pic\" alt=\"users\" src={user.pic}/>\r\n                  <div className=\"user__details\">\r\n                    <span className=\"username\">{user.username}</span>\r\n                    <span className=\"fullname\">{user.fullname}</span>\r\n                  </div>\r\n                </Link>\r\n            </div>\r\n              ) )\r\n            }\r\n\r\n           { following.length === 0 && status === \"succeeded\" && <p className=\"no__followers__found\">No following found</p> }\r\n           { status !== \"succeeded\" && <div className=\"spinner__container\"> <Spinner/> </div>} \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Following;\r\n","import ReactPlayer from \"react-player\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { Post as Savedpost } from \"../../../features/savedposts/savedposts.types\";\r\nimport { Post } from \"../../../features/posts/posts.types\";\r\nimport { useAppSelector } from \"../../../store/hooks\";\r\n\r\nconst PostsSection = () => {\r\n    const pathname = useLocation().pathname;\r\n    const navigate = useNavigate();\r\n    const posts = useAppSelector(state => state.profile.userposts);\r\n    const savedposts = useAppSelector(state => state.savedposts.posts);\r\n    const filteredPosts = pathname === \"/profile\" ? posts : savedposts;\r\n    \r\n    return (\r\n        <div className=\"posts__section\">\r\n             <div className=\"section__1\">\r\n                 <button className={ pathname === \"/profile\" ? \"post__btn active\" : \"post__btn\" } onClick={() => navigate(\"/profile\")}>\r\n                    <svg aria-label=\"Posts\" fill=\"#262626\" height=\"12\" viewBox=\"0 0 48 48\" width=\"12\"><path clipRule=\"evenodd\" d=\"M45 1.5H3c-.8 0-1.5.7-1.5 1.5v42c0 .8.7 1.5 1.5 1.5h42c.8 0 1.5-.7 1.5-1.5V3c0-.8-.7-1.5-1.5-1.5zm-40.5 3h11v11h-11v-11zm0 14h11v11h-11v-11zm11 25h-11v-11h11v11zm14 0h-11v-11h11v11zm0-14h-11v-11h11v11zm0-14h-11v-11h11v11zm14 28h-11v-11h11v11zm0-14h-11v-11h11v11zm0-14h-11v-11h11v11z\" fillRule=\"evenodd\"></path></svg>\r\n                    {\" \"}POSTS\r\n                 </button>\r\n                 <button className={ pathname === \"/profile/save\" ? \"saved__btn active\" : \"saved__btn\" } onClick={() => navigate(\"/profile/save\")}>\r\n                    <svg aria-label=\"Saved\" fill=\"#262626\" height=\"12\" viewBox=\"0 0 48 48\" width=\"12\"><path d=\"M43.5 48c-.4 0-.8-.2-1.1-.4L24 29 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1zM24 26c.8 0 1.6.3 2.2.9l15.8 16V3H6v39.9l15.8-16c.6-.6 1.4-.9 2.2-.9z\"></path></svg>\r\n                    {\" \"}SAVED\r\n                 </button>\r\n             </div>\r\n             <div className=\"section__2\">\r\n                 {\r\n                       filteredPosts.map( (post:Savedpost|Post) => {\r\n                       const extension = post.file.split(\".\").pop() || \"\";\r\n                       const isImg = [\"jpg\",\"png\",\"jpeg\"].includes(extension);\r\n                       const isVideo = [\"mp3\",\"mp4\"].includes(extension);\r\n                       \r\n                       return(\r\n                        <Link to={`/posts/${post._id}`} key={post._id}>\r\n                          { isImg && <img width=\"100%\" alt=\"post\" height=\"auto\" src={post.file}/>}\r\n                          { isVideo && <ReactPlayer url={post.file} controls={true} style={{background:\"black\"}} width=\"100%\" height=\"auto\"/>}\r\n                       </Link>\r\n                       )\r\n                    })\r\n                 }\r\n                \r\n             </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostsSection;\r\n","import { Dispatch, SetStateAction, useEffect } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { UpdateConnections, updateConnections } from \"../../../features/profile/profileSlice\";\r\nimport { Connection, UserActivity, Profile, ViewProfileData } from \"../../../features/profile/profileSlice.types\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../store/hooks\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { fetchChats,createChat } from \"../../../features/chats/chatsSlice\";\r\n\r\ntype Post = {\r\n    _id:string;\r\n    file:string;\r\n}\r\n\r\ntype ProfileSectionProps = {\r\n    profile:Profile;\r\n    posts:Post[];\r\n    connections:Connection;\r\n    activities:UserActivity;\r\n    setData:Dispatch<SetStateAction<ViewProfileData|undefined>>;\r\n    isYouFollowingUser:string|undefined;\r\n}\r\n\r\nconst ProfileSection = ({profile,posts,isYouFollowingUser,activities,connections,setData}:ProfileSectionProps) => {\r\n\r\n    const userId = useAppSelector(state => state.auth.user?._id);\r\n    const token = useAppSelector(state => state.auth.token);\r\n    const { chats,status } = useAppSelector(state => state.chats);\r\n    const dispatch = useAppDispatch();\r\n    const navigate = useNavigate();\r\n    \r\n    const isUserFollowingYou = connections.following.find( uid => uid === userId );\r\n    const isRequested = activities?.requests.find( uid => uid === userId);\r\n\r\n    const handleConnections = () => {\r\n        dispatch(updateConnections({token,userId:profile._id}))\r\n        .then(unwrapResult).then( originalPromiseResult => {\r\n            setData(state => {\r\n                if(state){\r\n                    return ({...state,connections:originalPromiseResult.userconnections,activities:originalPromiseResult.activities})\r\n                }\r\n            })\r\n            dispatch(UpdateConnections({connections:originalPromiseResult.yourconnections}))\r\n        })\r\n    }\r\n\r\n    const handleMessage = (userId:string) => {\r\n        const chatId = chats.find(chat => chat.users.find( user => user._id === userId));\r\n        if(!chatId){\r\n            console.log(\"not found\");\r\n            dispatch(createChat({token,userId}))\r\n            .then(unwrapResult).then(originalPromiseResult => {\r\n                navigate(`/chats/${originalPromiseResult.chat._id}`)\r\n            })\r\n            return\r\n        }\r\n        console.log(\"found\");\r\n        navigate(`/chats/${chatId._id}`)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (status === \"idle\") {\r\n          dispatch(fetchChats({ token }));\r\n        }\r\n    }, [status,dispatch,token]);\r\n\r\n    const getConnectButton = () => {\r\n        if(isYouFollowingUser){\r\n            return <button className=\"secondary__btn\" onClick={handleConnections}>Following</button>\r\n        }\r\n        else if(isRequested){\r\n            return <button className=\"secondary__btn\" onClick={handleConnections}>Requested</button>\r\n        }\r\n        else if(isUserFollowingYou){\r\n            return <button className=\"primary__btn\" onClick={handleConnections}>Follow back</button>\r\n        }\r\n        else{\r\n            return <button className=\"primary__btn\" onClick={handleConnections}>Follow</button>\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div className=\"profile__section\">\r\n               <img className=\"profile__avatar\" alt=\"profile\" src={profile.pic}/>\r\n               <span className=\"username__mobile\">{profile.username}</span>\r\n               <div className=\"profile__details\">\r\n                   <div className=\"section__1\">\r\n                       <span className=\"username__desktop\">{profile.username}</span>\r\n                       <div className=\"profile__btn__container\">\r\n                          { getConnectButton() }\r\n                          <button className=\"secondary__btn\" onClick={() => handleMessage(profile._id)}>Message</button>\r\n                       </div>\r\n                   </div>\r\n                   <div className=\"section__2\">\r\n                       <div><span>{posts.length}</span> posts</div>\r\n                       <Link to={ isYouFollowingUser || !profile.private ? `/followers/${profile._id}` : \"\"} className=\"nav__link\"><span>{connections?.followers.length}</span> followers</Link>\r\n                       <Link to={ isYouFollowingUser || !profile.private ? `/following/${profile._id}` : \"\"} className=\"nav__link\"><span>{connections?.following.length}</span> following</Link>\r\n                   </div>\r\n                   <div className=\"section__3\">\r\n                       <div className=\"fullname\">{profile.fullname}</div>\r\n                       <p className=\"bio\">{profile.bio}</p>\r\n                       <a href={profile.website} rel=\"noreferrer\" target=\"_blank\" className=\"website__link\">{profile.website}</a>\r\n                   </div>\r\n               </div>\r\n            </div>\r\n    );\r\n};\r\n\r\nexport default ProfileSection;","import ReactPlayer from \"react-player\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\ntype Post = {\r\n   _id:string;\r\n   file:string;\r\n}\r\n\r\ntype PostsSectionProps = {\r\n   posts:Post[];\r\n   accountPrivate:boolean;\r\n   isYouFollowingUser:string|undefined;\r\n}\r\n\r\nconst PostsSection = ({posts,accountPrivate,isYouFollowingUser}:PostsSectionProps) => {\r\n\r\n    return (\r\n        <div className=\"posts__section\">\r\n             <div className=\"section__1\">\r\n                 <button className=\"post__btn active\">\r\n                    <svg aria-label=\"Posts\" fill=\"#262626\" height=\"12\" viewBox=\"0 0 48 48\" width=\"12\"><path clipRule=\"evenodd\" d=\"M45 1.5H3c-.8 0-1.5.7-1.5 1.5v42c0 .8.7 1.5 1.5 1.5h42c.8 0 1.5-.7 1.5-1.5V3c0-.8-.7-1.5-1.5-1.5zm-40.5 3h11v11h-11v-11zm0 14h11v11h-11v-11zm11 25h-11v-11h11v11zm14 0h-11v-11h11v11zm0-14h-11v-11h11v11zm0-14h-11v-11h11v11zm14 28h-11v-11h11v11zm0-14h-11v-11h11v11zm0-14h-11v-11h11v11z\" fillRule=\"evenodd\"></path></svg>\r\n                    {\" \"}POSTS\r\n                 </button>\r\n             </div>\r\n             \r\n         {  (!accountPrivate || isYouFollowingUser) &&  <div className=\"section__2\">\r\n                 {\r\n                       posts.map( (post:Post) => {\r\n                       const extension = post.file.split(\".\").pop() || \"\";\r\n                       const isImg = [\"jpg\",\"png\",\"jpeg\"].includes(extension);\r\n                       const isVideo = [\"mp3\",\"mp4\"].includes(extension);\r\n                       return(\r\n                        <Link to={`/posts/${post._id}`} key={post._id}>\r\n                          { isImg && <img width=\"100%\" className=\"post__file\" alt=\"post\" height=\"auto\" src={post.file}/>}\r\n                          { isVideo && <ReactPlayer url={post.file} width=\"100%\" height=\"auto\"/>}\r\n                       </Link>\r\n                       )\r\n                    })\r\n                 }\r\n\r\n             </div>}\r\n            { !isYouFollowingUser && accountPrivate &&\r\n             <div className=\"private__account__template\">\r\n                  <i className=\"fa fa-lock\"> This Account is Private</i>\r\n                  <p className=\"template__content\">Follow to see their photos and videos.</p>\r\n             </div>\r\n             }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostsSection;","import { useEffect, useState } from \"react\";\r\nimport { fetchViewProfile } from \"../../features/profile/profileSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport { useIsMountedRef } from \"../../utils/custom-hooks/useIsMountedRef\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { ViewProfileData } from \"../../features/profile/profileSlice.types\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport ProfileSection from \"./components/ProfileSection\";\r\nimport PostsSection from \"./components/PostsSection\";\r\n\r\nimport \"../Profile/Profile.css\";\r\nimport \"./ViewProfile.css\";\r\nimport { Status } from \"../../generic.types\";\r\n\r\nconst ViewProfile = () => {\r\n    const dispatch = useAppDispatch();\r\n    const mountedRef = useIsMountedRef();\r\n    const token = useAppSelector(state => state.auth.token);\r\n    const yourUserId = useAppSelector(state => state.auth.user?._id);\r\n    const userId = useParams().userId;\r\n    const [data,setData] = useState<ViewProfileData>();\r\n    const [status,setStatus] = useState<Status>(\"idle\");\r\n    const isYouFollowingUser = data?.connections.followers.find( uid => uid === yourUserId );\r\n\r\n    useEffect(() => {\r\n        (async function(){\r\n            if(mountedRef.current){\r\n                dispatch(fetchViewProfile({token,userId}))\r\n                .then(unwrapResult)\r\n                .then(originalPromiseResult => {\r\n                    setData(originalPromiseResult)\r\n                    setStatus(\"succeeded\")\r\n                })\r\n          }})()\r\n    },[dispatch,token,userId,mountedRef])\r\n  \r\n    return (\r\n        <div className=\"profile__container viewprofile\">\r\n            { status !== \"succeeded\" && <div className=\"spinner__container\"> <Spinner/> </div>} \r\n\r\n            { data && <ProfileSection isYouFollowingUser={isYouFollowingUser} profile={data?.profile} activities={data.activities} posts={data?.userposts} connections={data?.connections} setData={setData}/>}\r\n            { data && <PostsSection isYouFollowingUser={isYouFollowingUser} posts={data?.userposts} accountPrivate={data.profile.private}/>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ViewProfile;","import Input from \"../../utils/form/Input/Input\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { useState } from \"react\";\r\nimport { Post } from \"./AddPost.types\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport { uploadPost } from \"../../features/posts/postsSlice\";\r\nimport { Status } from \"../../generic.types\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { useIsMountedRef } from \"../../utils/custom-hooks/useIsMountedRef\";\r\nimport \"./AddPost.css\";\r\n\r\nconst AddPost = () => {\r\n    const isMountedRef = useIsMountedRef();\r\n\r\n    const [post,setPost] = useState<Post>({src:null,extension:\"\",caption:\"\"});\r\n    const [file,setFile] = useState<File|null>(null);\r\n    const [uploadPostStatus,setUploadPostStatus] = useState<Status>(\"idle\");\r\n    const [extensionErr,setExtensionErr] = useState<boolean>(false);\r\n    const [processing,setProcessing] = useState<boolean>(false);\r\n\r\n    const canSave = [post.src].every(Boolean) && uploadPostStatus === \"idle\";\r\n    const isImg =  [\"jpg\", \"png\",\"jpeg\"].includes(post.extension);\r\n    const isVideo = post.extension === \"mp4\";\r\n   \r\n    const { token } = useAppSelector(state => state.auth);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n        setExtensionErr(false)\r\n        const {name,type,value,files} = e.target;\r\n\r\n        if(type === \"file\" && files){\r\n            let extension = files[0].name.split('.').pop() || \"\";\r\n            let isExtensionValid = [\"jpg\", \"png\", \"jpeg\",\"mp4\"].includes(extension);\r\n\r\n            if(isExtensionValid){\r\n                const file = new FileReader();\r\n                file.readAsDataURL(files[0]);\r\n                file.onloadstart = () => {\r\n                    setProcessing(true)\r\n                }\r\n                file.onloadend = () => {\r\n                    setProcessing(false)\r\n                    setFile(files[0]);\r\n                    setPost(state => ({ ...state,[name]:file.result,extension }));\r\n                }\r\n            }\r\n            else{\r\n                setExtensionErr(true)\r\n            }\r\n            return;\r\n        }\r\n\r\n        setPost(state => ({ ...state,[name]:value }))\r\n    }\r\n\r\n    const handlePost = async(e:React.FormEvent) => {\r\n        e.preventDefault();\r\n        if(!isMountedRef.current) return;\r\n        if(file && canSave){\r\n            try {\r\n                setUploadPostStatus(\"pending\");\r\n                const resultAction = await dispatch(uploadPost({file,caption:post.caption,token}));\r\n                unwrapResult(resultAction);\r\n                setPost({src:null,caption:\"\",extension:\"\"});\r\n                setFile(null);\r\n                setUploadPostStatus(\"succeeded\");\r\n            } catch(error){\r\n                setUploadPostStatus(\"failed\");\r\n            }\r\n            finally{\r\n                setTimeout(() => {\r\n                    setUploadPostStatus(\"idle\")\r\n                },3000)\r\n            }\r\n        }\r\n    }\r\n \r\n    return (\r\n        <div className=\"addpost__container\">\r\n            {extensionErr && <div className=\"invalid__feedback\">Please select only image and videos</div>}\r\n            {processing && <div className=\"valid__feedback\">Processing...</div>}\r\n            {uploadPostStatus === \"failed\" && <div className=\"invalid__feedback\">something went wrong!!</div>}\r\n            {uploadPostStatus === \"pending\" && <div className=\"valid__feedback\">Uploading...</div>}\r\n            {uploadPostStatus === \"succeeded\" && <div className=\"valid__feedback\">post successfully uploaded!!</div>}\r\n \r\n            {   \r\n                isImg && typeof post.src === \"string\" &&\r\n                <div className=\"file__container\">\r\n                    <button className=\"dismiss__btn\" onClick={() => setPost(state => ({...state,src:null}))}><i className=\"fa fa-window-close\"></i></button>\r\n                    <img className=\"file\" alt=\"users\" src={post.src}/>\r\n                </div>\r\n            }\r\n\r\n            {   \r\n                isVideo && typeof post.src === \"string\" &&\r\n                <div className=\"file__container\">\r\n                    <button className=\"dismiss__btn\" onClick={() => setPost(state => ({...state,src:null}))}><i className=\"fa fa-window-close\"></i></button>\r\n                    <ReactPlayer width=\"100%\" height=\"100%\" controls={true} url={post.src}/>\r\n                </div>\r\n            }\r\n            \r\n            <form onSubmit={handlePost}>\r\n                { \r\n                  !post.src && !processing && \r\n                  <div className=\"form__group upload__icon\">\r\n                    <i className=\"fa fa-plus\"></i>\r\n                    <input type=\"file\" name=\"src\" className=\"upload__file\" onChange={handleChange} accept=\".jpg,.jpeg,.png,.mp4\"/>\r\n                    <small></small>\r\n                  </div>\r\n                }\r\n\r\n                <Input type=\"text\" name=\"caption\" value={post.caption} error={false} onChange={handleChange} placeholder=\"Caption\" />\r\n                <div className=\"form__group\">\r\n                  <input type=\"submit\" disabled={!canSave} className=\"submit__btn\" value={[\"idle\",\"succeeded\"].includes(uploadPostStatus) ? \"POST\" : \"POSTING...\"}/>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AddPost;","import { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { useEffect } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { confirmRequest, deleteRequest, fetchActivity } from \"../../features/activity/activitySlice\";\r\nimport { UpdateConnections } from \"../../features/profile/profileSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { timestamp } from \"../../utils/timestamp/timestamp\";\r\nimport \"./Activity.css\";\r\n\r\nconst Activity = () => {\r\n    const { activities,status } = useAppSelector(state => state.activity);\r\n    const token = useAppSelector(state => state.auth.token);\r\n    const dispatch = useAppDispatch()\r\n    \r\n    useEffect(() => {\r\n        if(status === \"idle\"){\r\n            dispatch(fetchActivity({token}));\r\n        }\r\n     },[status,token,dispatch]);\r\n\r\n     const handleConfirm = (userId:string) => {\r\n         dispatch(confirmRequest({token,userId}))\r\n         .then(unwrapResult)\r\n         .then(originalPromiseResult => {\r\n             dispatch(UpdateConnections({connections:originalPromiseResult.connections}))\r\n         })\r\n     }\r\n     \r\n     const handleDelete = (userId:string) => {\r\n        dispatch(deleteRequest({token,userId}))\r\n    }\r\n\r\n    return (\r\n        <div className=\"activity\">\r\n            { status !== \"succeeded\" && <div className=\"spinner__container\"> <Spinner/> </div>} \r\n\r\n            <h4 className=\"activity__heading\">Activity</h4>\r\n\r\n            {\r\n                activities?.requests.map( user => (\r\n                    <div className=\"activity__content\" key={user._id}>\r\n                      <Link to=\"\" className=\"userpic__and__activity\">\r\n                         <img alt=\"profile\" className=\"userpic\" src={user.pic}/>\r\n                         <p className=\"description\"><strong>{user.username}</strong> has requested to follow you.</p>\r\n                      </Link>\r\n                      <button className=\"primary__btn\" onClick={() => handleConfirm(user._id)}>Confirm</button>\r\n                      <button className=\"secondary__btn\" onClick={() => handleDelete(user._id)}>Delete</button>\r\n                   </div>\r\n                )).reverse()\r\n            }\r\n\r\n            {\r\n                activities?.activity.map( activity => {\r\n                 const extension = activity?.file?.split(\".\").pop();\r\n                 const isImg = [\"jpg\",\"png\",\"jpeg\"].some(type => type === extension);\r\n                 const isVideo = [\"mp3\",\"mp4\"].some(type => type === extension);\r\n                 \r\n                 return(\r\n                    <Link to={`/viewprofile/${activity.user._id}`} className=\"activity__content\" key={activity._id}>\r\n                      <div className=\"userpic__and__activity\">\r\n                        <img alt=\"profile\" className=\"userpic\" src={activity.user.pic}/>\r\n                        <div>\r\n                           <p className=\"description\"><strong>{activity.user.username}</strong> {activity.text}</p>\r\n                           <span className=\"timestamp\">{timestamp(new Date(activity.createdAt))}</span>\r\n                        </div>\r\n                      </div>\r\n                      { isImg && <img alt=\"post\" className=\"post\" src={activity.file}/> }\r\n                      { isVideo && <ReactPlayer width=\"50px\" height=\"50px\" url={activity.file}/> }\r\n                    </Link>\r\n                )}).reverse()\r\n            }\r\n            \r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Activity;\r\n","import { Dispatch,SetStateAction } from \"react\";\r\nimport { Profile } from \"../../features/profile/profileSlice.types\";\r\nimport { EditProfileErrors } from \"./EditProfile\";\r\n\r\nexport const formValidate = (state:Profile,setError:Dispatch<SetStateAction<EditProfileErrors>>):void => {\r\n    let username = false,fullname = false,email = false;\r\n\r\n    if(!/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/.test(state.email)){\r\n        email = true;\r\n    }\r\n\r\n    if(state.username.length < 5){\r\n        username = true;\r\n    }\r\n\r\n    if(state.fullname.length < 3){\r\n        fullname = true\r\n    }\r\n\r\n    if(!email && !username && !fullname){\r\n       return setError( (state:any) => ({...state,email,username,fullname,disabled:false}) );\r\n    };\r\n    \r\n    setError( (state:any) => ({...state,email,username,fullname,disabled:true}) );\r\n}","import { useEffect, useState } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport { formValidate } from \"./EditProfile.formValidate\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { Profile } from \"../../features/profile/profileSlice.types\";\r\nimport { updateProfile } from \"../../features/profile/profileSlice\";\r\n\r\nimport Input from \"../../utils/form/Input/Input\";\r\n\r\nimport \"./EditProfile.css\";\r\nimport { Status } from \"../../generic.types\";\r\nimport Backdrop from \"../../utils/Backdrop/Backdrop\";\r\n\r\nexport type EditProfileErrors = {\r\n    username:boolean;\r\n    fullname:boolean;\r\n    email:boolean;\r\n    disabled:boolean;\r\n}\r\n\r\nconst EditProfile = () => {\r\n    const profile = useAppSelector(state => state.profile.profile);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const token = useAppSelector(state => state.auth.token);\r\n\r\n    useEffect(() => {\r\n       if(profile){\r\n         setData(profile)\r\n       }\r\n    },[profile])\r\n    \r\n    const [data,setData] = useState<Profile>({\r\n        _id:\"\",\r\n        username:\"\",\r\n        fullname:\"\",\r\n        email:\"\",\r\n        bio:\"\",\r\n        pic:\"\",\r\n        private:false,\r\n        website:\"\",\r\n        gender:\"\"\r\n    }); \r\n    \r\n    const [error,setError] = useState<EditProfileErrors>({\r\n        username:false,\r\n        fullname:false,\r\n        email:false,\r\n        disabled:true\r\n    }); \r\n\r\n    const [status,setStatus] = useState<Status>(\"idle\");\r\n    const [errorMsg,setErrorMsg] = useState<string>(\"\");\r\n    const [popup,setPopup] = useState<boolean>(false);\r\n    const [file,setFile] = useState<File|null>(null);\r\n\r\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name,value,type,files } = e.target;\r\n        if(name === \"private\"){\r\n            setData( state => ({...state,[name]:value === \"yes\" ? true : false}) )\r\n            formValidate({...data,[name]:value === \"yes\" ? true : false},setError)\r\n            return\r\n        }\r\n        if(type === \"file\" && files){\r\n            let extension = files[0].name.split('.').pop() || \"\";\r\n            let isValidExtension = [\"jpg\", \"png\", \"jpeg\"].includes(extension);\r\n            \r\n            if(isValidExtension){\r\n                const file = new FileReader();\r\n                file.readAsDataURL(files[0]);\r\n                file.onloadend = () => {\r\n                    setFile(files[0]);\r\n                    setData(state => ({ ...state,[name]:file.result }));\r\n                }\r\n                setPopup(false)\r\n                setError(state => ({ ...state,disabled:false}))\r\n            }\r\n            else{\r\n                setStatus(\"failed\");\r\n                setErrorMsg(\"Invalid image\");\r\n                setTimeout(() => {\r\n                    setStatus(\"idle\");\r\n                },2000)\r\n                setPopup(false)\r\n            }\r\n            return;\r\n         }\r\n\r\n        setData( state => ({...state,[name]:value}) )\r\n        formValidate({...data,[name]:value},setError)\r\n    }\r\n\r\n    const handleSubmit = async() => {\r\n        try {\r\n        setStatus(\"pending\");\r\n        const resultAction = await dispatch(updateProfile({token,data,file}));\r\n        unwrapResult(resultAction);\r\n        setStatus(\"succeeded\");\r\n        } catch (error) {\r\n            setStatus(\"failed\");\r\n            setErrorMsg(error.message);\r\n        }\r\n        finally{\r\n            setError({ username:false,fullname:false,email:false,disabled:true })\r\n            setTimeout(() => {\r\n               setStatus(\"idle\")\r\n            },2000)\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div className=\"edit__profile\">\r\n           { popup && \r\n              <Backdrop toggle={setPopup} className=\"editprofile__backdrop\"/>\r\n           }\r\n\r\n           {  popup && \r\n                 <div className=\"popup__container\">\r\n                      <h4 className=\"popup__heading\">Change Profile Photo</h4>\r\n                      <div className=\"upload__btn__container\">\r\n                         <input type=\"file\" name=\"pic\" accept=\".png,.jpg,.jpeg\" className=\"uploadfile\" onChange={handleChange}/>\r\n                         <div className=\"popup__options upload__btn\">Upload Photo</div>\r\n                      </div>\r\n                      <button className=\"popup__options cancel__btn\" onClick={() => setPopup(false)}>Cancel</button>\r\n                  </div>\r\n            }\r\n\r\n\r\n           <section className=\"section__1\">\r\n               <img src={data?.pic} alt=\"pic\" className=\"userPic\"/>\r\n               <div className=\"username__container\">\r\n                   <div className=\"username\">{data.username}</div>\r\n                   <button className=\"change__pic__btn\" onClick={() => setPopup(true)}>Change Profile Photo</button>\r\n               </div>\r\n           </section>\r\n\r\n           <section className=\"section__2\">\r\n               <Input type=\"text\" error={error.fullname} name=\"fullname\" value={data.fullname} onChange={handleChange} placeholder=\"fullname\"/>\r\n               <Input type=\"text\" error={error.username} name=\"username\"  value={data.username} onChange={handleChange} placeholder=\"username\"/>\r\n               <Input type=\"text\" error={false} name=\"website\"  value={data.website} onChange={handleChange} placeholder=\"website\"/>\r\n               <Input type=\"text\" error={false} name=\"bio\"  value={data.bio} onChange={handleChange} placeholder=\"bio\"/>\r\n               <Input type=\"email\" error={error.email} name=\"email\"  value={data.email} onChange={handleChange} placeholder=\"email\"/>\r\n               \r\n               <label htmlFor=\"gender\" className=\"gender__label\">\r\n                 Gender:\r\n                 <input type=\"radio\" className=\"radio__input\" name=\"gender\" onChange={handleChange} checked={data.gender === \"male\"} value=\"male\"/>male\r\n                 <input type=\"radio\" className=\"radio__input\" name=\"gender\" onChange={handleChange} checked={data.gender === \"female\"} value=\"female\"/>female\r\n               </label>\r\n\r\n               <label htmlFor=\"private\" className=\"private__label\">\r\n                 Private:\r\n                 <input type=\"radio\" className=\"radio__input\" onChange={handleChange} checked={data.private} name=\"private\" value=\"yes\"/>yes\r\n                 <input type=\"radio\" className=\"radio__input\" onChange={handleChange} checked={!data.private} name=\"private\" value=\"no\"/>no\r\n               </label>\r\n\r\n               <button className=\"submit__btn\" onClick={handleSubmit} disabled={error.disabled || status === \"pending\"}>{ status === \"pending\" ? \"Saving...\" : \"Submit\"}</button>\r\n               \r\n           </section>\r\n\r\n           { status === \"succeeded\" && <div className=\"valid__feedback\">Profile saved.</div>}\r\n           { status === \"failed\" && <div className=\"invalid__feedback\">{errorMsg}</div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditProfile;\r\n","import { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { Dispatch, SetStateAction } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Post } from \"../../features/posts/posts.types\";\r\nimport { likePressed } from \"../../features/posts/postsSlice\";\r\nimport { savedPostPressed } from \"../../features/savedposts/savedpostsSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\n\r\ntype PostIconProps = {\r\n   like:boolean;\r\n   postId:string;\r\n   setPost:Dispatch<SetStateAction<Post>>\r\n}\r\n\r\nconst PostIcons = ({like,postId,setPost}:PostIconProps) => {\r\n   \r\n    const {token} = useAppSelector(state => state.auth);\r\n    const {posts} = useAppSelector(state => state.savedposts);\r\n\r\n    const checkPostIsSavedOrNot = posts.find(p => p._id === postId);\r\n\r\n    const dispatch = useAppDispatch();\r\n    const navigate = useNavigate();\r\n    \r\n    const handleLike = () => {\r\n        dispatch(likePressed({token,postId}))\r\n        .then(unwrapResult).then(originalPromiseResult => {\r\n            setPost(originalPromiseResult.post)\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"post__icons\">\r\n               <div>\r\n                   <button className=\"icon\" onClick={handleLike}>\r\n                      { !like ? <svg aria-label=\"Like\" style={{ marginRight:\"0.5rem\" }} fill=\"#262626\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path d=\"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path></svg>\r\n                      :<svg aria-label=\"Unlike\" style={{ marginRight:\"0.5rem\" }} fill=\"#ed4956\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path d=\"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z\"></path></svg>}\r\n                   </button>\r\n\r\n                   <button className=\"icon\" onClick={() => navigate(`/comments/${postId}`)}>\r\n                      <svg aria-label=\"Comment\" fill=\"#262626\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path clipRule=\"evenodd\" d=\"M47.5 46.1l-2.8-11c1.8-3.3 2.8-7.1 2.8-11.1C47.5 11 37 .5 24 .5S.5 11 .5 24 11 47.5 24 47.5c4 0 7.8-1 11.1-2.8l11 2.8c.8.2 1.6-.6 1.4-1.4zm-3-22.1c0 4-1 7-2.6 10-.2.4-.3.9-.2 1.4l2.1 8.4-8.3-2.1c-.5-.1-1-.1-1.4.2-1.8 1-5.2 2.6-10 2.6-11.4 0-20.6-9.2-20.6-20.5S12.7 3.5 24 3.5 44.5 12.7 44.5 24z\" fillRule=\"evenodd\"></path></svg>\r\n                   </button>\r\n               </div>\r\n               \r\n               <div>\r\n                  <button className=\"icon\" onClick={() => dispatch(savedPostPressed({token,postId}))}>\r\n                     { !checkPostIsSavedOrNot ? <svg aria-label=\"Save\" fill=\"#262626\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path d=\"M43.5 48c-.4 0-.8-.2-1.1-.4L24 29 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1zM24 26c.8 0 1.6.3 2.2.9l15.8 16V3H6v39.9l15.8-16c.6-.6 1.4-.9 2.2-.9z\"></path></svg>\r\n                     : <svg aria-label=\"Remove\" fill=\"#262626\" height=\"24\" viewBox=\"0 0 48 48\" width=\"24\"><path d=\"M43.5 48c-.4 0-.8-.2-1.1-.4L24 28.9 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1z\"></path></svg>}\r\n                  </button>\r\n               </div>\r\n         </div>\r\n    );\r\n};\r\n\r\nexport default PostIcons;","import React, { useEffect, useState } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { Post } from \"../../features/posts/posts.types\";\r\nimport { timestamp } from \"../../utils/timestamp/timestamp\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\nimport { commentPressed, fetchPost } from \"../../features/posts/postsSlice\";\r\n\r\nimport ReactPlayer from \"react-player\";\r\nimport { useIsMountedRef } from \"../../utils/custom-hooks/useIsMountedRef\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport PostIcons from \"./IndividualPostIcon\";\r\nimport \"./IndividualPostPage.css\";\r\nimport Spinner from \"../../utils/Spinner/Spinner\";\r\nimport { Status } from \"../../generic.types\";\r\n\r\nconst IndividualPostPage = () => {\r\n    const mountedRef = useIsMountedRef();\r\n    const dispatch = useAppDispatch();\r\n    const { token } = useAppSelector(state => state.auth);\r\n    const { postId } = useParams();\r\n\r\n    const [status,setStatus] = useState<Status>(\"idle\");\r\n\r\n    const [post,setPost] = useState<Post>({\r\n        _id: \"\",\r\n        file: \"\",\r\n        postedBy:{\r\n            _id:\"\",\r\n            pic:\"\",\r\n            username:\"\",\r\n            fullname:\"\"\r\n        },\r\n        caption: \"\",\r\n        likes: [],\r\n        comments: [],\r\n        createdAt: \"\",\r\n    })\r\n\r\n    const extension = post.file.split(\".\").pop() || \"\";\r\n \r\n    const isImg = [\"jpg\",\"png\",\"jpeg\"].includes(extension);\r\n    const isVideo = [\"mp3\",\"mp4\"].includes(extension);\r\n    const userId = useAppSelector(state => state.auth.user?._id)\r\n    const like = post.likes.find( uid => uid === userId );\r\n    const time = timestamp(new Date(post.createdAt));\r\n\r\n    const [comment,setComment] = useState<string>(\"\");\r\n\r\n    const handleSubmit = (e:React.SyntheticEvent) => {\r\n        e.preventDefault();\r\n        dispatch(commentPressed({token,comment,postId}))\r\n        .then(unwrapResult).then(originalPromiseResult => {\r\n            setPost(originalPromiseResult.post)\r\n        });\r\n        setComment(\"\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        (async function(){\r\n            if(mountedRef.current){\r\n                dispatch(fetchPost({token,postId}))\r\n                .then(unwrapResult)\r\n                .then(originalPromiseResult => {\r\n                    setPost(originalPromiseResult.post)\r\n                    setStatus(\"succeeded\");\r\n                })\r\n          }})()\r\n    },[dispatch,mountedRef,token,postId])\r\n    \r\n    return (\r\n        <div className=\"post individualPost\">\r\n            \r\n            { status !== \"succeeded\" && \r\n              <div className=\"spinner__container\">\r\n                  <Spinner/>\r\n              </div>\r\n            } \r\n            <div className=\"post__header\">\r\n                <Link to={post.postedBy._id === userId ? \"/profile\" : `/viewprofile/${post.postedBy._id}`} className=\"avatar\">\r\n                  <img className=\"avatar__img\" alt=\"profile\" src={post.postedBy.pic}/>\r\n                  <span className=\"username\">{post.postedBy.username}</span>\r\n                </Link>\r\n                <div className=\"options\">...</div>\r\n            </div>\r\n\r\n            {isImg && <img alt=\"pic\" width=\"100%\" style={{ maxHeight:\"700px\",objectFit:\"cover\" }} height=\"auto\" src={post.file}/>}\r\n            {isVideo && <ReactPlayer controls={true} url={post.file} width=\"100%\" style={{ maxHeight:\"700px\" }} height=\"auto\"/>}\r\n            \r\n            <div className=\"post__footer\">\r\n                <PostIcons setPost={setPost} postId={post._id} like={like ? true : false}/>\r\n                <h6 className=\"post__likes\">{post.likes.length} likes</h6>\r\n                <div className=\"post__caption\">\r\n                    <strong>{post.postedBy.username}</strong> {post.caption}\r\n                </div>\r\n                <Link to={`/comments/${post._id}`} className=\"post__comments\">{ post.comments.length === 0 ? \"no comments\" : `View all ${post.comments.length} comments` }</Link>\r\n                \r\n                <div className=\"post__time\">\r\n                    {time} AGO\r\n                </div>\r\n\r\n                <form className=\"commentBox\" onSubmit={handleSubmit}>\r\n                  <input type=\"text\" value={comment} onChange={(e) => setComment(e.target.value)} className=\"add__comment\" placeholder=\"Add a comment...\"/>\r\n                  <button type=\"submit\" className=\"post__btn\" disabled={comment === \"\"}>Post</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default IndividualPostPage;","import React from 'react';\r\n\r\nimport { Route,Navigate } from 'react-router-dom';\r\nimport { useAppSelector } from '../../store/hooks';\r\n\r\ntype Props = {\r\n    path:string;\r\n    element:React.ReactElement;\r\n    children?:React.ReactNode\r\n}\r\n\r\nconst PrivateRoute = ({path,children,...props}:Props) => {\r\n    \r\n    const isUserloggedIn = useAppSelector(state => state.auth.login)\r\n   \r\n    return isUserloggedIn ? (\r\n        <Route path={path} {...props}>\r\n            {children}\r\n        </Route>\r\n    ) : (\r\n        <Navigate state={{from:path}} to=\"/\" replace/>\r\n    )\r\n}\r\n\r\nexport default PrivateRoute;","\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { useEffect } from \"react\";\r\nimport { fetchPosts, setLoading } from \"../../features/posts/postsSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../../store/hooks\";\r\n\r\nconst usePaginatedPosts = (page:number) => {\r\n    const dispatch = useAppDispatch();\r\n    const token = useAppSelector(state => state.auth.token);\r\n\r\n    useEffect(() => {\r\n       dispatch(setLoading({loading:true}))\r\n       try {\r\n          dispatch(fetchPosts({token,page}))\r\n          .then(unwrapResult)\r\n          .then(() => {\r\n            dispatch(setLoading({loading:false}))\r\n          })\r\n       } catch (error) {\r\n          \r\n       }\r\n\r\n    },[page,dispatch,token])\r\n\r\n    return null\r\n}\r\n\r\nexport default usePaginatedPosts;\r\n","import { useEffect, useState } from \"react\";\n\nimport { useAppSelector,useAppDispatch } from \"./store/hooks\";\nimport { Route, Routes, useLocation } from \"react-router-dom\";\n\nimport { useWindowSize } from \"./utils/custom-hooks/useWindowSize\";\nimport ScrollToTop from \"./utils/custom-hooks/ScrollToTop\";\nimport Spinner from \"./utils/Spinner/Spinner\";\nimport RouteNotFound from \"./utils/RouteNotFound/RouteNotFound\";\n\nimport { checkAuth } from \"./features/auth/authSlice\";\nimport { fetchProfile } from \"./features/profile/profileSlice\";\nimport { fetchSavedPosts } from \"./features/savedposts/savedpostsSlice\";\n\nimport Signup from \"./auth/signup/signup\";\nimport Login from \"./auth/login/Login\";\n\nimport Header from \"./components/Header/Header\";\nimport Footer from \"./components/Footer/Footer\";\n\nimport Home from \"./pages/Home/Home\";\nimport Profile from \"./pages/Profile/Profile\";\nimport Comments from \"./pages/Comments/Comments\";\nimport Search from \"./pages/Search/Search\";\nimport Chats from \"./pages/Chats/Chats\";\nimport UserChatsMobile from \"./pages/Chats/components/UserChatsMobile\";\nimport UserChatsDesktop from \"./pages/Chats/components/UserChatsDesktop\";\nimport Followers from \"./pages/Followers/Followers\";\nimport Following from \"./pages/Following/Following\";\nimport PostsSection from \"./pages/Profile/components/PostsSection\";\nimport ViewProfile from \"./pages/ViewProfile/ViewProfile\";\nimport AddPost from \"./pages/Addpost/AddPost\";\nimport Activity from \"./pages/Activity/Activity\";\nimport EditProfile from \"./pages/EditProfile/EditProfile\";\nimport IndividualPostPage from \"./pages/IndividualPostPage/IndividualPostPage\";\n\nimport { Status } from \"./generic.types\";\n\nimport \"./App.css\";\nimport PrivateRoute from \"./utils/PrivateRoute/PrivateRoute\";\nimport usePaginatedPosts from \"./utils/custom-hooks/usePaginatedPosts\";\n\nconst App = () => {\n  const auth = useAppSelector((state) => state.auth);\n  const page = useAppSelector((state) => state.posts.page);\n  usePaginatedPosts(page);\n\n  const [status,setStatus] = useState<Status>(\"idle\");  \n  const { width } = useWindowSize();\n  const dispatch = useAppDispatch();\n  const path = useLocation().pathname;\n\n  const { token,login } = auth;\n\n  useEffect(() => {\n    if(!token){\n      setStatus(\"idle\")\n    }\n    \n    (async function(){\n         if(status === \"idle\" && token){\n           await Promise.all([dispatch(checkAuth(token)),dispatch(fetchSavedPosts({token})),dispatch(fetchProfile({token}))])\n           setStatus(\"succeeded\")\n         }\n    })()\n },[status,token,dispatch])\n\n  return (\n    <div>\n       { login && status === \"succeeded\" && <Header/>}\n\n       <Routes>\n          { !login && <Route path=\"/\" element={<Login/>}/>}\n          { !login && <Route path=\"/signup\" element={<Signup/>}/>}\n          { !login && <Route path=\"*\" element={<RouteNotFound/>}/>}\n       </Routes>\n\n       { status === \"succeeded\" &&\n         <Routes>\n           { path !== \"/\" && <ScrollToTop/>}\n           { \n             width >= 700 &&\n             <PrivateRoute path=\"/chats\" element={<Chats/>}>\n               <PrivateRoute path=\"/:chatId\" element={<UserChatsDesktop/>}/>\n             </PrivateRoute> \n           } \n           { width < 700 && <PrivateRoute path=\"/chats\" element={<Chats/>}/>}\n           { width < 700 && <PrivateRoute path=\"/chats/:chatId\" element={<UserChatsMobile/>}/>}\n           \n           <PrivateRoute path=\"/\" element={<Home/>}/>\n           <PrivateRoute path=\"/profile\" element={<Profile/>}>\n              <PrivateRoute path=\"/\" element={<PostsSection/>}/>\n              <PrivateRoute path=\"/save\" element={<PostsSection/>}/>\n           </PrivateRoute>\n           <PrivateRoute path=\"/profile/edit\" element={<EditProfile/>}/>\n           <PrivateRoute path=\"/followers/:userId\" element={<Followers/>}/>\n           <PrivateRoute path=\"/following/:userId\" element={<Following/>}/>\n           <PrivateRoute path=\"/viewprofile/:userId\" element={<ViewProfile/>}/>\n           <PrivateRoute path=\"/comments/:postId\" element={<Comments/>}/>\n           <PrivateRoute path=\"/search\" element={<Search/>}/>\n           <PrivateRoute path=\"/activity\" element={<Activity/>}/>\n           <PrivateRoute path=\"/post/add\" element={<AddPost/>}/>\n           <PrivateRoute path=\"/posts/:postId\" element={<IndividualPostPage/>}/>\n           <Route path=\"*\" element={<RouteNotFound/>}/>\n        </Routes>}\n\n        { login && status === \"succeeded\" && <Footer/>}\n\n        { login && status !== \"succeeded\" && <div className=\"spinner__container\"> <Spinner/> </div> }\n \n        { login && status === \"failed\" && <div className=\"invalid__feedback\">Something went wrong !! please try again later</div> }\n\n    </div>\n  );\n};\n\nexport default App;","import { useEffect, useState } from \"react\";\r\n\r\ntype State ={\r\n    width:number,\r\n    height:number\r\n}\r\n\r\nexport function useWindowSize() {\r\n  const [windowSize, setWindowSize] = useState<State>({\r\n    width:0,\r\n    height:0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      });\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n    handleResize();\r\n\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []); \r\n\r\n  return windowSize;\r\n}","import { Action, configureStore, ThunkAction } from \"@reduxjs/toolkit\";\r\nimport authReducer from \"../features/auth/authSlice\";\r\nimport postsReducer from \"../features/posts/postsSlice\";\r\nimport savedpostsReducer from \"../features/savedposts/savedpostsSlice\";\r\nimport profileReducer from \"../features/profile/profileSlice\";\r\nimport activityReducer from \"../features/activity/activitySlice\";\r\nimport usersReducer from \"../features/users/usersSlice\";\r\nimport chatsReducer from \"../features/chats/chatsSlice\";\r\n\r\nexport const store = configureStore({\r\n    reducer:{\r\n        auth:authReducer,\r\n        posts:postsReducer,\r\n        savedposts:savedpostsReducer,\r\n        profile:profileReducer,\r\n        activity:activityReducer,\r\n        users:usersReducer,\r\n        chats:chatsReducer\r\n    }\r\n})\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppThunk<ReturnType = void> = ThunkAction<\r\n  ReturnType,\r\n  RootState,\r\n  unknown,\r\n  Action<string>\r\n>;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './store/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n       <App />\n     </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}