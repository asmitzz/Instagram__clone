(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(29),i=n.n(a),r=n(2),o=n.n(r),l=n(7),u=n(5),d=n(25),j=function(){return Object(d.b)()},b=d.c,p=n(8);var h,f=function(){var e=Object(p.h)().pathname;return Object(c.useEffect)((function(){window.scroll({behavior:"smooth",top:0})}),[e]),null},m=(n(78),n(0)),v=function(){return Object(m.jsxs)("div",{className:"loader",children:[Object(m.jsx)("div",{className:"loader-circle c1"}),Object(m.jsx)("div",{className:"loader-circle c2"}),Object(m.jsx)("div",{className:"loader-circle c3"}),Object(m.jsx)("div",{className:"loader-circle c4"}),Object(m.jsx)("div",{className:"loader-circle c5"}),Object(m.jsx)("div",{className:"loader-circle c6"}),Object(m.jsx)("div",{className:"loader-circle c7"}),Object(m.jsx)("div",{className:"loader-circle c8"}),Object(m.jsx)("div",{className:"loader-circle c9"})]})},O=(n(80),function(){var e=Object(p.i)();return Object(m.jsxs)("div",{className:"route__not__found",children:[Object(m.jsx)("h1",{children:"404 Route Not Found!!"}),Object(m.jsx)("button",{className:"go__to__home__btn",onClick:function(){return e("/")},children:"GO TO HOMEPAGE"})]})}),x=n(3),_=n(9),g=n.n(_),N="https://insta-clone-10062000.herokuapp.com",w=JSON.parse((null===(h=localStorage)||void 0===h?void 0:h.getItem("token"))||"{}"),k=w&&w.token?w:{token:"",login:!1,user:{_id:""}},y=Object(x.b)("auth/signup",function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat(N,"/signup"),t);case 3:return c=e.sent,e.abrupt("return",c.data);case 7:if(e.prev=7,e.t0=e.catch(0),422!==e.t0.response.status){e.next=11;break}return e.abrupt("return",n.rejectWithValue(e.t0.response.data));case 11:return e.abrupt("return",n.rejectWithValue({message:"something went wrong"}));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),C=Object(x.b)("auth/login",function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat(N,"/signin"),t);case 3:return c=e.sent,e.abrupt("return",c.data);case 7:if(e.prev=7,e.t0=e.catch(0),401!==e.t0.response.status&&422!==e.t0.response.status){e.next=11;break}return e.abrupt("return",n.rejectWithValue(e.t0.response.data));case 11:return e.abrupt("return",n.rejectWithValue({message:"something went wrong"}));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(x.b)("auth/checkauth",function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(N,"/protected"),{headers:{authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(x.c)({name:"auth",initialState:k,reducers:{logout:function(e){localStorage.removeItem("token"),e.token="",e.login=!1,e.user={_id:""}}},extraReducers:function(e){e.addCase(C.fulfilled,(function(e,t){if("token"in t.payload){var n=t.payload,c=n.token,s=n.login,a=n.user;e.token=c,e.login=s,e.user=a,localStorage.setItem("token",JSON.stringify({token:c,login:!0}))}})),e.addCase(S.fulfilled,(function(e,t){if("token"in t.payload){var n=t.payload,c=n.token,s=n.login,a=n.user;e.token=c,e.login=s,e.user=a,localStorage.setItem("token",JSON.stringify({token:c,login:!0}))}})),e.addCase(S.rejected,(function(e){e.token="",e.login=!1,e.user={_id:""},localStorage.removeItem("token")}))}}),B=z.actions.logout,I=z.reducer,M=Object(x.b)("profile/fetchprofile",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,e.next=3,g.a.get("".concat(N,"/profile"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=Object(x.b)("profile/fetchviewprofile",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.userId,e.next=3,g.a.get("".concat(N,"/profile/").concat(c),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=Object(x.b)("profile/fetchfollowers",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.userId,e.next=3,g.a.get("".concat(N,"/connections/followers/").concat(c),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(x.b)("profile/fetchfollowing",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.userId,e.next=3,g.a.get("".concat(N,"/connections/following/").concat(c),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=Object(x.b)("profile/updateconnections",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.userId,e.next=3,g.a.post("".concat(N,"/connections/").concat(c),{},{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(x.b)("profile/update",function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,s,a,i,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.token,s=t.data,a=t.file,i=JSON.stringify(s),r=new FormData,a&&r.append("file",a),r.append("data",i),e.prev=5,e.next=8,g.a.post("".concat(N,"/profile/update"),r,{headers:{Authorization:"Bearer ".concat(c)}});case 8:return l=e.sent,e.abrupt("return",l.data);case 12:if(e.prev=12,e.t0=e.catch(5),422!==e.t0.response.status&&400!==e.t0.response.status){e.next=16;break}return e.abrupt("return",n.rejectWithValue(e.t0.response.data));case 16:return e.abrupt("return",n.rejectWithValue({message:"something went wrong"}));case 17:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()),V=Object(x.c)({name:"profile",initialState:{profile:{_id:"",pic:"",username:"",fullname:"",bio:"",website:"",gender:"",private:!1,email:""},userposts:[],connections:{followers:[],following:[]},status:"idle"},reducers:{UpdateConnections:function(e,t){e.connections=t.payload.connections}},extraReducers:function(e){e.addCase(M.pending,(function(e){e.status="pending"})),e.addCase(M.rejected,(function(e){e.status="failed"})),e.addCase(M.fulfilled,(function(e,t){var n=t.payload,c=n.userposts,s=n.profile,a=n.connections;e.profile=s,e.connections=a,e.userposts=c,e.status="succeeded"})),e.addCase(E.fulfilled,(function(e,t){e.profile=t.payload.profile}))}}),D=V.actions.UpdateConnections,L=V.reducer,F=Object(x.b)("savedposts/fetchsavedposts",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,e.next=3,g.a.get("".concat(N,"/savedposts"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=Object(x.b)("/savedposts/updatesavedposts",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.postId,e.next=3,g.a.post("".concat(N,"/savedposts/").concat(c),{},{headers:{authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=Object(x.c)({name:"savedposts",initialState:{posts:[],status:"idle"},reducers:{},extraReducers:function(e){e.addCase(F.pending,(function(e){e.status="pending"})),e.addCase(F.rejected,(function(e){e.status="failed"})),e.addCase(F.fulfilled,(function(e,t){e.posts=t.payload.posts,e.status="succeeded"})),e.addCase(U.fulfilled,(function(e,t){e.posts=t.payload.posts}))}}).reducer,q=n(10),W=n(6),G=n(4);function J(){var e=Object(c.useRef)(null);return Object(c.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),e}n(98);var Y=function(e){var t=e.valid,n=e.togglePassword,c=e.setTogglePassword;return t?Object(m.jsxs)("div",{className:"feedback",children:[Object(m.jsx)("i",{className:"fa fa-times-circle","aria-hidden":"true"}),c&&Object(m.jsx)("i",{onClick:c?function(){return c((function(e){return!e}))}:function(){},className:n?"fa fa-eye-slash":"fa fa-eye"})]}):Object(m.jsxs)("div",{className:"feedback",children:[Object(m.jsx)("i",{className:"fa fa-check","aria-hidden":"true"}),c&&Object(m.jsx)("i",{onClick:c?function(){return c((function(e){return!e}))}:function(){},className:n?"fa fa-eye-slash":"fa fa-eye"})]})},Z=(n(99),function(e){var t=e.type,n=e.value,c=e.error,s=e.onChange,a=e.name,i=e.placeholder,r=e.togglePassword,o=e.setTogglePassword;return Object(m.jsxs)("div",{className:"form__group",children:[""!==n&&Object(m.jsx)("label",{className:"form__label",children:i}),Object(m.jsx)("input",{type:t,name:a,value:n,onChange:s,placeholder:i,className:"form__control"}),""!==n&&Object(m.jsx)(Y,{valid:c,togglePassword:r,setTogglePassword:o})]})}),$=(n(45),function(){var e=J(),t=j(),n=Object(c.useState)({email:"",fullname:"",username:"",password:""}),s=Object(u.a)(n,2),a=s[0],i=s[1],r=Object(c.useState)({email:!1,fullname:!1,username:!1,password:!1,disabled:!0}),d=Object(u.a)(r,2),b=d[0],p=d[1],h=Object(c.useState)(!1),f=Object(u.a)(h,2),v=f[0],O=f[1],_=Object(c.useState)("idle"),g=Object(u.a)(_,2),N=g[0],w=g[1],k=Object(c.useState)(""),C=Object(u.a)(k,2),S=C[0],z=C[1],B=function(t){if(e.current){var n=t.target,c=n.value,s=n.name;!function(e,t){var n=!1,c=!1,s=!1,a=!1;if(/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/.test(e.email)||(n=!0),/^(?=.*\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$/.test(e.password)||(c=!0),e.username.length<5&&(s=!0),e.fullname.length<3&&(a=!0),!n&&!c&&!s&&!a)return t((function(e){return Object(W.a)(Object(W.a)({},e),{},{email:n,password:c,username:s,fullname:a,disabled:!1})}));t((function(e){return Object(W.a)(Object(W.a)({},e),{},{email:n,password:c,username:s,fullname:a,disabled:!0})}))}(Object(W.a)(Object(W.a)({},a),{},Object(q.a)({},s,c)),p),i((function(e){return Object(W.a)(Object(W.a)({},e),{},Object(q.a)({},s,c))}))}},I=function(){var n=Object(l.a)(o.a.mark((function n(c){var s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.current){n.next=2;break}return n.abrupt("return");case 2:return c.preventDefault(),n.prev=3,w("pending"),n.next=7,t(y(a));case 7:s=n.sent,Object(x.d)(s),i({email:"",fullname:"",username:"",password:""}),p({email:!1,fullname:!1,username:!1,password:!1,disabled:!0}),w("succeeded"),z(""),setTimeout((function(){w("idle")}),3e3),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(3),z(n.t0.message),w("idle");case 20:case"end":return n.stop()}}),n,null,[[3,16]])})));return function(e){return n.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"auth__container",children:[Object(m.jsxs)("form",{className:"section1",onSubmit:I,children:[Object(m.jsx)("div",{className:"insta__logo"}),Object(m.jsx)("p",{className:"signup__title",children:"Sign up to see photos and videos from your friends."}),Object(m.jsx)(Z,{type:"email",name:"email",value:a.email,error:b.email,onChange:B,placeholder:"Email"}),Object(m.jsx)(Z,{type:"text",name:"fullname",value:a.fullname,error:b.fullname,onChange:B,placeholder:"Full Name"}),Object(m.jsx)(Z,{type:"text",name:"username",value:a.username,error:b.username,onChange:B,placeholder:"Username"}),Object(m.jsx)(Z,{type:v?"text":"password",togglePassword:v,setTogglePassword:O,name:"password",value:a.password,error:b.password,onChange:B,placeholder:"Password"}),Object(m.jsx)("input",{type:"submit",className:"submit__btn",disabled:b.disabled||"idle"!==N,value:"pending"===N?"Signing...":"Sign up"}),Object(m.jsx)("small",{className:"auth__invalid__feedback",children:S}),"succeeded"===N&&Object(m.jsx)("small",{className:"auth__valid__feedback",children:"User registered successfully"})]}),Object(m.jsx)("div",{className:"section2",children:Object(m.jsxs)("p",{className:"section2__title",children:["Have an account? ",Object(m.jsx)(G.b,{to:"/",className:"section2__title__Link",children:"Log in"})]})})]})}),Q=function(){var e=J(),t=Object(c.useState)({emailOrUsername:"",password:""}),n=Object(u.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)({emailOrUsername:!1,password:!1,disabled:!0}),r=Object(u.a)(i,2),d=r[0],b=r[1],p=Object(c.useState)(!1),h=Object(u.a)(p,2),f=h[0],v=h[1],O=Object(c.useState)(""),_=Object(u.a)(O,2),g=_[0],N=_[1],w=Object(c.useState)("idle"),k=Object(u.a)(w,2),y=k[0],S=k[1],z=Object(c.useState)("idle"),B=Object(u.a)(z,2),I=B[0],M=B[1],A=j(),P=function(t){if(e.current){var n=t.target,c=n.value,i=n.name;!function(e,t){var n=!1,c=!1;if(e.emailOrUsername.length<5&&(n=!0),/^(?=.*\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$/.test(e.password)||(c=!0),!n&&!c)return t((function(e){return Object(W.a)(Object(W.a)({},e),{},{emailOrUsername:n,password:c,disabled:!1})}));t((function(e){return Object(W.a)(Object(W.a)({},e),{},{emailOrUsername:n,password:c,disabled:!0})}))}(Object(W.a)(Object(W.a)({},s),{},Object(q.a)({},i,c)),b),a((function(e){return Object(W.a)(Object(W.a)({},e),{},Object(q.a)({},i,c))}))}},R=function(){var t=Object(l.a)(o.a.mark((function t(n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.current){t.next=2;break}return t.abrupt("return");case 2:return n.preventDefault(),t.prev=3,S("pending"),t.next=7,A(C(s));case 7:c=t.sent,Object(x.d)(c),a({emailOrUsername:"",password:""}),b({emailOrUsername:!1,password:!1,disabled:!0}),S("succeeded"),N(""),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),N(t.t0.message);case 18:return t.prev=18,S("idle"),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[3,15,18,21]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),M("pending"),e.prev=2,e.next=5,A(C({emailOrUsername:"avengers",password:"demo1234"}));case 5:n=e.sent,Object(x.d)(n),M("idle"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),N("Something went wrong with guest login. Please signup and then try again"),M("idle");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"auth__container",children:[Object(m.jsxs)("form",{className:"section1",children:[Object(m.jsx)("div",{className:"insta__logo"}),Object(m.jsx)("p",{className:"signup__title",children:"Sign up to see photos and videos from your friends."}),Object(m.jsx)(Z,{type:"text",name:"emailOrUsername",value:s.emailOrUsername,error:d.emailOrUsername,onChange:P,placeholder:"Email or username"}),Object(m.jsx)(Z,{type:f?"text":"password",togglePassword:f,setTogglePassword:v,name:"password",value:s.password,error:d.password,onChange:P,placeholder:"Password"}),Object(m.jsx)("input",{type:"submit",className:"submit__btn",onClick:R,disabled:d.disabled||"idle"!==y,value:"idle"===y?"Log In":"Logging..."}),Object(m.jsxs)("div",{className:"separator",children:[Object(m.jsx)("div",{className:"separator__line"}),Object(m.jsx)("div",{className:"separator__text",children:"OR"}),Object(m.jsx)("div",{className:"separator__line"})]}),Object(m.jsx)("button",{className:"submit__btn",disabled:"idle"!==I,onClick:T,children:"idle"===I?"Login as guest":"Logging..."}),Object(m.jsx)("small",{className:"auth__invalid__feedback",children:g})]}),Object(m.jsx)("div",{className:"section2",children:Object(m.jsxs)("p",{className:"section2__title",children:["Don't have an account? ",Object(m.jsx)(G.b,{to:"/signup",className:"section2__title__Link",children:"Sign up"})]})})]})},K=Object(x.b)("activity/fetchactivity",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,e.next=3,g.a.get("".concat(N,"/activities"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),X=Object(x.b)("activity/confirmrequest",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.userId,e.next=3,g.a.post("".concat(N,"/activities/requests/").concat(c),{},{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ee=Object(x.b)("activity/deleterequest",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.userId,e.next=3,g.a.delete("".concat(N,"/activities/requests/").concat(c),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te=Object(x.c)({name:"activity",initialState:{activities:null,status:"idle"},reducers:{resetActivities:function(e){e.status="idle",e.activities=null}},extraReducers:function(e){e.addCase(K.pending,(function(e){e.status="pending"})),e.addCase(K.rejected,(function(e){e.status="failed"})),e.addCase(K.fulfilled,(function(e,t){e.activities=t.payload.activities,e.status="succeeded"})),e.addCase(X.fulfilled,(function(e,t){e.activities=t.payload.activities})),e.addCase(ee.fulfilled,(function(e,t){e.activities=t.payload.activities}))}}),ne=te.actions.resetActivities,ce=te.reducer,se=Object(x.b)("chats/fetchchats",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,e.next=3,g.a.get("".concat(N,"/chats"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=Object(x.b)("chats/createChat",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.userId,e.next=3,g.a.post("".concat(N,"/chats/").concat(c),{},{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=Object(x.b)("chats/sendmessage",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.text,s=t.chatId,e.next=3,g.a.post("".concat(N,"/chats/message/").concat(s),{text:c},{headers:{Authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(x.c)({name:"chats",initialState:{chats:[],status:"idle"},reducers:{updateChat:function(e,t){var n=t.payload.chat,c=e.chats.findIndex((function(e){return e._id===n._id}));e.chats[c]=n},resetChat:function(e){e.status="idle",e.chats=[]}},extraReducers:function(e){e.addCase(se.pending,(function(e){e.status="pending"})),e.addCase(se.rejected,(function(e){e.status="failed"})),e.addCase(se.fulfilled,(function(e,t){e.chats=t.payload.chats,e.status="succeeded"})),e.addCase(ae.fulfilled,(function(e,t){var n=t.payload.chat;e.chats.push(n)}))}}),oe=re.actions,le=oe.updateChat,ue=oe.resetChat,de=re.reducer,je=(n(100),function(e){var t=e.children,n=e.toggle,c=e.className;return Object(m.jsx)("div",{className:"backdrop ".concat(c),onClick:function(){return n(!1)},children:t})}),be=(n(101),function(e){var t=e.toggle,n=Object(p.i)(),c=j(),s=function(e){"/"===e&&(c(B()),c(ue()),c(ne())),n(e),t(!1)};return Object(m.jsxs)("div",{className:"dropbox",children:[Object(m.jsxs)("button",{className:"dropbox__btn",onClick:function(){return s("/profile")},children:[Object(m.jsx)("i",{className:"fas fa-user"}),Object(m.jsx)("span",{children:"Profile"})]}),Object(m.jsxs)("button",{className:"dropbox__btn",onClick:function(){return s("/profile/save")},children:[Object(m.jsx)("i",{className:"fas fa-save"}),Object(m.jsx)("span",{children:"Saved"})]}),Object(m.jsx)("button",{className:"dropbox__btn logout",onClick:function(){return s("/")},children:"Log Out"})]})}),pe=Object(x.b)("users/fetchusers",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.searchTerm,e.next=3,g.a.get("".concat(N,"/users/").concat(c),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),he=Object(x.c)({name:"users",initialState:{users:[],status:"idle"},reducers:{},extraReducers:function(e){e.addCase(pe.pending,(function(e){e.status="pending"})),e.addCase(pe.rejected,(function(e){e.status="failed"})),e.addCase(pe.fulfilled,(function(e,t){e.users=t.payload.users,e.status="idle"}))}}).reducer,fe=function(e){var t=e.user,n=e.setToggleDropbox,c=b((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id}));return Object(m.jsxs)(G.b,{to:t._id===c?"/profile":"/viewprofile/".concat(t._id),onClick:n?function(){return n(!1)}:function(){},className:"searchBox__result",children:[Object(m.jsx)("div",{className:"avatar",children:Object(m.jsx)("img",{className:"avatar__img",src:t.pic,alt:"avatar"})}),Object(m.jsxs)("div",{className:"result__content",children:[Object(m.jsx)("h5",{className:"username",children:t.username}),Object(m.jsx)("div",{className:"fullname",children:t.fullname})]})]})},me=(n(102),function(e){var t=e.setToggleDropbox,n=b((function(e){return e.users})),c=n.users,s=n.status;return Object(m.jsxs)("div",{className:"searchBox",children:[0!==c.length&&"idle"===s&&Object(m.jsx)("div",{className:"searchBox__results",children:c.map((function(e){return Object(m.jsx)(fe,{user:e,setToggleDropbox:t},e._id)}))}),0===c.length&&"idle"===s&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h4",{className:"searchBox__heading",children:"Search"}),Object(m.jsx)("div",{className:"searchBox__empty",children:"No results found"})]}),"pending"===s&&Object(m.jsx)(v,{})]})}),ve=(n(103),function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),i=Object(u.a)(a,2),r=i[0],o=i[1],l=Object(c.useRef)(null),d=b((function(e){return e.auth.token})),p=j();return Object(c.useEffect)((function(){null!==l.current&&clearTimeout(l.current),l.current=setTimeout((function(){l.current=null,""!==r&&p(pe({token:d,searchTerm:r}))}),1e3)}),[r,d,p]),Object(m.jsxs)("div",{className:"search__bar",children:[n&&Object(m.jsx)(je,{toggle:s,className:"search__bar__backdrop"}),Object(m.jsx)("i",{className:"fa fa-search"}),Object(m.jsx)("input",{type:"search",value:r,onFocus:function(){return s(!0)},onChange:function(e){var t=e.target.value;o(t)},className:"search__input",placeholder:"Search"}),n&&Object(m.jsx)(me,{setToggleDropbox:s})]})}),Oe=(n(104),function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],a=j(),i=Object(p.i)(),r=b((function(e){return e.profile})).profile;return Object(m.jsxs)("div",{className:"header",children:[n&&Object(m.jsx)(je,{toggle:s}),Object(m.jsx)(G.c,{end:!0,to:"/",children:Object(m.jsx)("div",{className:"insta__logo",children:Object(m.jsx)("img",{src:"https://i.imgur.com/zqpwkLQ.png",alt:"instagram",width:"100%",height:"100%"})})}),Object(m.jsx)(ve,{}),Object(m.jsxs)("div",{className:"right__section",children:[Object(m.jsxs)(G.c,{end:!0,to:"/",className:"nav__link",activeClassName:"active__link",children:[Object(m.jsx)("svg",{"aria-label":"Home",className:"not__active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z"})}),Object(m.jsx)("svg",{"aria-label":"Home",className:"active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z"})})]}),Object(m.jsxs)(G.c,{end:!0,to:"/post/add",className:"nav__link",activeClassName:"active__link",children:[Object(m.jsx)("div",{className:"add__post__icon1 not__active"}),Object(m.jsx)("div",{className:"add__post__icon2 active"})]}),Object(m.jsxs)(G.c,{end:!0,to:"/chats",className:"nav__link messenger",activeClassName:"active__link",children:[Object(m.jsx)("svg",{"aria-label":"Messenger",className:"not__active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M36.2 16.7L29 22.2c-.5.4-1.2.4-1.7 0l-5.4-4c-1.6-1.2-3.9-.8-5 .9l-6.8 10.7c-.7 1 .6 2.2 1.6 1.5l7.3-5.5c.5-.4 1.2-.4 1.7 0l5.4 4c1.6 1.2 3.9.8 5-.9l6.8-10.7c.6-1.1-.7-2.2-1.7-1.5zM24 1C11 1 1 10.5 1 23.3 1 30 3.7 35.8 8.2 39.8c.4.3.6.8.6 1.3l.2 4.1c0 1 .9 1.8 1.8 1.8.2 0 .5 0 .7-.2l4.6-2c.2-.1.5-.2.7-.2.2 0 .3 0 .5.1 2.1.6 4.3.9 6.7.9 13 0 23-9.5 23-22.3S37 1 24 1zm0 41.6c-2 0-4-.3-5.9-.8-.4-.1-.8-.2-1.3-.2-.7 0-1.3.1-2 .4l-3 1.3V41c0-1.3-.6-2.5-1.6-3.4C6.2 34 4 28.9 4 23.3 4 12.3 12.6 4 24 4s20 8.3 20 19.3-8.6 19.3-20 19.3z"})}),Object(m.jsx)("svg",{"aria-label":"Messenger",className:"active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{clipRule:"evenodd",d:"M10.2 29.8c-.7 1 .6 2.2 1.6 1.5l7.3-5.5c.5-.4 1.2-.4 1.7 0l5.4 4c1.6 1.2 3.9.8 5-.9L38 18.2c.7-1-.6-2.2-1.6-1.5L29 22.2c-.5.4-1.2.4-1.7 0l-5.4-4c-1.6-1.2-3.9-.8-5 .9l-6.7 10.7zM24 1c13 0 23 9.5 23 22.3S37 45.6 24 45.6c-2.3 0-4.6-.3-6.7-.9-.4-.1-.8-.1-1.2.1l-4.6 2c-1.1.6-2.5-.3-2.5-1.6l-.1-4.1c0-.5-.2-1-.6-1.3C3.7 35.8 1 30 1 23.3 1 10.5 11 1 24 1z",fillRule:"evenodd"})})]}),Object(m.jsxs)(G.c,{end:!0,to:"/activity",className:"nav__link",activeClassName:"active__link",children:[Object(m.jsx)("svg",{"aria-label":"Activity Feed",className:"not__active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}),Object(m.jsx)("svg",{"aria-label":"Activity Feed",className:"active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})})]}),Object(m.jsx)("button",{className:"logout__btn",onClick:function(){a(B()),a(ue()),a(ne()),i("/")},children:Object(m.jsx)("i",{className:"fa fa-sign-out"})}),Object(m.jsx)("button",{className:"profile__btn",onClick:function(){s((function(e){return!e}))},children:Object(m.jsx)("img",{className:"profile__icon",alt:"profile",src:r.pic})}),n&&Object(m.jsx)(be,{toggle:s})]})]})}),xe=(n(105),function(){var e=b((function(e){return e.profile})).profile;return Object(m.jsxs)("footer",{className:"footer",children:[Object(m.jsxs)(G.c,{end:!0,to:"/",className:"nav__link",activeClassName:"active__link",children:[Object(m.jsx)("svg",{"aria-label":"Home",className:"not__active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z"})}),Object(m.jsx)("svg",{"aria-label":"Home",className:"active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z"})})]}),Object(m.jsx)(G.c,{end:!0,to:"/search",children:Object(m.jsx)("i",{className:"fa fa-search"})}),Object(m.jsxs)(G.c,{end:!0,to:"/post/add",className:"nav__link",activeClassName:"active__link",children:[Object(m.jsx)("div",{className:"add__post__icon1 not__active"}),Object(m.jsx)("div",{className:"add__post__icon2 active"})]}),Object(m.jsxs)(G.c,{end:!0,to:"/activity",className:"nav__link",activeClassName:"active__link",children:[Object(m.jsx)("svg",{"aria-label":"Activity Feed",className:"not__active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}),Object(m.jsx)("svg",{"aria-label":"Activity Feed",className:"active",fill:"#262626",height:"22",viewBox:"0 0 48 48",width:"22",children:Object(m.jsx)("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})})]}),Object(m.jsx)(G.c,{to:"/profile",children:Object(m.jsx)("div",{className:"avatar",children:Object(m.jsx)("img",{className:"avatar",alt:"profile",src:e.pic})})})]})}),_e=Object(x.b)("posts/fetchPosts",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.page,e.next=3,g.a.get("".concat(N,"/posts?page=").concat(c,"&limit=5"),{headers:{Authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ge=Object(x.b)("posts/fetchcomments",function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.token,s=t.postId,e.next=3,g.a.get("".concat(N,"/posts/").concat(s,"/comment"),{headers:{Authorization:"Bearer ".concat(c)}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ne=Object(x.b)("posts/uploadpost",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,c=t.caption,s=t.token,(a=new FormData).append("file",n),a.append("caption",c),e.next=6,g.a.post("".concat(N,"/posts"),a,{headers:{Authorization:"Bearer ".concat(s)}});case 6:return i=e.sent,e.abrupt("return",i.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),we=Object(x.b)("posts/likepressed",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.postId,e.next=3,g.a.post("".concat(N,"/posts/").concat(c,"/like"),{},{headers:{authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ke=Object(x.b)("posts/commentpressed",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.comment,s=t.postId,e.next=3,g.a.post("".concat(N,"/posts/").concat(s,"/comment"),{comment:c},{headers:{authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ye=Object(x.b)("posts/fetchpost",function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,c=t.postId,e.next=3,g.a.get("".concat(N,"/posts/").concat(c),{headers:{authorization:"Bearer ".concat(n)}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(x.c)({name:"posts",initialState:{posts:[],status:"idle",hasMore:!0,page:1,loading:!0},reducers:{increasePostsPageNumber:function(e){e.page=e.page+1},setLoading:function(e,t){e.loading=t.payload.loading}},extraReducers:function(e){e.addCase(_e.rejected,(function(e){e.status="failed"})),e.addCase(_e.pending,(function(e){e.status="pending"})),e.addCase(_e.fulfilled,(function(e,t){e.status="succeeded",e.hasMore=t.payload.posts.length>0,e.posts=e.posts.concat(t.payload.posts)})),e.addCase(Ne.fulfilled,(function(e,t){e.posts.unshift(t.payload.post)})),e.addCase(we.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.payload.post._id}));e.posts[n]=t.payload.post})),e.addCase(ke.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.payload.post._id}));e.posts[n]=t.payload.post}))}}),Se=Ce.actions,ze=Se.setLoading,Be=Se.increasePostsPageNumber,Ie=Ce.reducer;function Me(e){var t=new Date,n=Math.floor((t.getTime()-e.getTime())/1e3),c=n/31536e3;return c>1?e.toDateString().slice(4):(c=n/2592e3)>1?Math.floor(c)+(Math.floor(c)>1?" MONTHS":" MONTH"):(c=n/86400)>1?Math.floor(c)+(Math.floor(c)>1?" DAYS":" DAY"):(c=n/3600)>1?Math.floor(c)+(Math.floor(c)>1?" HOURS":" HOUR"):(c=n/60)>1?Math.floor(c)+(Math.floor(c)>1?" MINUTES":" MINUTE"):Math.floor(n)+(Math.floor(c)>1?" SECONDS":" SECOND")}var Ae,Pe,Re=function(e){var t=e.like,n=e.postId,c=b((function(e){return e.auth})).token,s=b((function(e){return e.savedposts})).posts.find((function(e){return e._id===n})),a=j(),i=Object(p.i)();return Object(m.jsxs)("div",{className:"post__icons",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{className:"icon",onClick:function(){return a(we({token:c,postId:n}))},children:t?Object(m.jsx)("svg",{"aria-label":"Unlike",style:{marginRight:"0.5rem"},fill:"#ed4956",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}):Object(m.jsx)("svg",{"aria-label":"Like",style:{marginRight:"0.5rem"},fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{d:"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})})}),Object(m.jsx)("button",{className:"icon",onClick:function(){return i("/comments/".concat(n))},children:Object(m.jsx)("svg",{"aria-label":"Comment",fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{clipRule:"evenodd",d:"M47.5 46.1l-2.8-11c1.8-3.3 2.8-7.1 2.8-11.1C47.5 11 37 .5 24 .5S.5 11 .5 24 11 47.5 24 47.5c4 0 7.8-1 11.1-2.8l11 2.8c.8.2 1.6-.6 1.4-1.4zm-3-22.1c0 4-1 7-2.6 10-.2.4-.3.9-.2 1.4l2.1 8.4-8.3-2.1c-.5-.1-1-.1-1.4.2-1.8 1-5.2 2.6-10 2.6-11.4 0-20.6-9.2-20.6-20.5S12.7 3.5 24 3.5 44.5 12.7 44.5 24z",fillRule:"evenodd"})})})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{className:"icon",onClick:function(){return a(U({token:c,postId:n}))},children:s?Object(m.jsx)("svg",{"aria-label":"Remove",fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{d:"M43.5 48c-.4 0-.8-.2-1.1-.4L24 28.9 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1z"})}):Object(m.jsx)("svg",{"aria-label":"Save",fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{d:"M43.5 48c-.4 0-.8-.2-1.1-.4L24 29 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1zM24 26c.8 0 1.6.3 2.2.9l15.8 16V3H6v39.9l15.8-16c.6-.6 1.4-.9 2.2-.9z"})})})})]})},Te=n(15),Ee=n.n(Te),Ve=(n(124),function(e){var t=e.lastElementRef,n=e._id,s=e.file,a=e.postedBy,i=e.caption,r=e.comments,o=e.likes,l=e.createdAt,d=Me(new Date(l)),p=b((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),h=b((function(e){return e.auth})).token,f=j(),v=o.find((function(e){return e===p})),O=s.split(".").pop()||"",x=["jpg","png","jpeg"].includes(O),_=["mp3","mp4"].includes(O),g=Object(c.useState)(""),N=Object(u.a)(g,2),w=N[0],k=N[1];return Object(m.jsxs)("div",{className:"post",children:[Object(m.jsx)("div",{className:"post__header",children:Object(m.jsxs)(G.b,{to:a._id===p?"/profile":"/viewprofile/".concat(a._id),className:"avatar",children:[Object(m.jsx)("img",{className:"avatar__img",alt:"profile",src:a.pic}),Object(m.jsx)("span",{className:"username",children:a.username})]})}),x&&Object(m.jsx)("img",{alt:"pic",width:"100%",height:"auto",src:s}),_&&Object(m.jsx)(Ee.a,{controls:!0,url:s,width:"100%",height:"auto"}),Object(m.jsxs)("div",{className:"post__footer",children:[Object(m.jsx)(Re,{postId:n,like:!!v}),Object(m.jsxs)("h6",{className:"post__likes",children:[o.length," likes"]}),Object(m.jsxs)("div",{className:"post__caption",children:[Object(m.jsx)("strong",{children:a.username})," ",i]}),Object(m.jsx)(G.b,{to:"/comments/".concat(n),className:"post__comments",children:0===r.length?"no comments":"View all ".concat(r.length," comments")}),Object(m.jsxs)("div",{className:"post__time",children:[d," AGO"]}),Object(m.jsxs)("form",{className:"commentBox",ref:t,onSubmit:function(e){e.preventDefault(),f(ke({token:h,comment:w,postId:n})),k("")},children:[Object(m.jsx)("input",{type:"text",value:w,onChange:function(e){return k(e.target.value)},className:"add__comment",placeholder:"Add a comment..."}),Object(m.jsx)("button",{type:"submit",className:"post__btn",disabled:""===w,children:"Post"})]})]})]})}),De=function(){var e=b((function(e){return e.profile.profile})),t=b((function(e){return e.profile}));return Object(m.jsxs)("div",{className:"profile__box",children:[Object(m.jsxs)(G.b,{to:"/profile",className:"avatar",children:[Object(m.jsx)("img",{className:"avatar__img",alt:"profile",src:null===e||void 0===e?void 0:e.pic}),Object(m.jsx)("span",{className:"fullname",children:null===e||void 0===e?void 0:e.fullname})]}),Object(m.jsxs)("div",{className:"profile__details",children:[Object(m.jsxs)(G.b,{to:"/profile",className:"profile__detail",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("span",{children:[" ",t.userposts.length]})}),Object(m.jsx)("span",{children:" Posts"})]}),Object(m.jsxs)(G.b,{to:"/followers/".concat(null===e||void 0===e?void 0:e._id),className:"profile__detail",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("i",{className:"far fa-user"}),Object(m.jsxs)("span",{children:[" ",t.connections.followers.length]})]}),Object(m.jsx)("span",{children:" Followers"})]}),Object(m.jsxs)(G.b,{to:"/following/".concat(null===e||void 0===e?void 0:e._id),className:"profile__detail",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("i",{className:"far fa-user"}),Object(m.jsxs)("span",{children:[" ",t.connections.following.length]})]}),Object(m.jsx)("span",{children:" Following"})]})]})]})},Le=(n(125),function(){var e=b((function(e){return e.posts})),t=e.hasMore,n=e.loading,s=e.posts,a=j(),i=Object(c.useRef)(),r=Object(c.useCallback)((function(e){n||(i.current&&i.current.disconnect(),i.current=new IntersectionObserver((function(e){e[0].isIntersecting&&t&&a(Be())})),e&&i.current.observe(e))}),[n,a,t]);return Object(m.jsxs)("div",{className:"home__content",children:[Object(m.jsxs)("div",{className:"left__section",children:[s.map((function(e,t){return t+1===s.length?Object(m.jsx)(Ve,Object(W.a)({lastElementRef:r},e),e._id):Object(m.jsx)(Ve,Object(W.a)({},e),e._id)})),Object(m.jsx)("div",{style:{margin:"1.5rem 0"},children:n&&Object(m.jsx)(v,{})}),!n&&0===s.length&&Object(m.jsx)("div",{className:"no__posts__found",children:"Follow your friends to see posts"})]}),Object(m.jsx)("div",{className:"right__section",children:Object(m.jsx)(De,{})})]})}),Fe=function(){return Object(m.jsx)("div",{children:Object(m.jsx)(Le,{})})},Ue=function(){var e=b((function(e){return e.profile})),t=e.connections,n=e.profile,c=e.userposts,s=Object(p.i)();return Object(m.jsxs)("div",{className:"profile__section",children:[Object(m.jsx)("img",{className:"profile__avatar",alt:"profile",src:n.pic}),Object(m.jsx)("span",{className:"username__mobile",children:n.username}),Object(m.jsxs)("div",{className:"profile__details",children:[Object(m.jsxs)("div",{className:"section__1",children:[Object(m.jsx)("span",{className:"username__desktop",children:n.username}),Object(m.jsx)("button",{className:"edit__profile__btn",onClick:function(){return s("/profile/edit")},children:"Edit Profile"})]}),Object(m.jsxs)("div",{className:"section__2",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{children:c.length})," posts"]}),Object(m.jsxs)(G.b,{to:"/followers/".concat(n._id),className:"nav__link",children:[Object(m.jsx)("span",{children:null===t||void 0===t?void 0:t.followers.length})," followers"]}),Object(m.jsxs)(G.b,{to:"/following/".concat(n._id),className:"nav__link",children:[Object(m.jsx)("span",{children:null===t||void 0===t?void 0:t.following.length})," following"]})]}),Object(m.jsxs)("div",{className:"section__3",children:[Object(m.jsx)("div",{className:"fullname",children:n.fullname}),Object(m.jsx)("p",{className:"bio",children:n.bio}),Object(m.jsx)("a",{href:n.website,rel:"noreferrer",target:"_blank",className:"website__link",children:n.website})]})]})]})},He=(n(50),function(){return Object(m.jsxs)("div",{className:"profile__container",children:[Object(m.jsx)(Ue,{}),Object(m.jsx)(p.b,{})]})}),qe=(n(126),function(){var e=J(),t=j(),n=Object(p.j)().postId,s=b((function(e){return e.auth})).token,a=Object(c.useState)(null),i=Object(u.a)(a,2),r=i[0],d=i[1],h=Object(c.useState)("idle"),f=Object(u.a)(h,2),O=f[0],_=f[1],g=(null===r||void 0===r?void 0:r.createdAt)?Me(new Date(null===r||void 0===r?void 0:r.createdAt)):0,N=Object(p.i)();return Object(c.useEffect)((function(){Object(l.a)(o.a.mark((function c(){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e.current&&t(ge({token:s,postId:n})).then(x.d).then((function(e){d(e.post),_("succeeded")}));case 1:case"end":return c.stop()}}),c)})))()}),[t,s,n,e]),Object(m.jsxs)("div",{className:"comments__container",children:["succeeded"===O&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"comments__header",children:[Object(m.jsx)("button",{className:"backBtn",onClick:function(){return N(-1)},children:Object(m.jsx)("i",{className:"fa fa-arrow-left","aria-hidden":"true"})}),Object(m.jsx)("h3",{children:"Comments"})]}),Object(m.jsxs)("div",{className:"post__caption",children:[Object(m.jsx)("div",{className:"avatar",children:Object(m.jsx)("img",{className:"avatar",alt:"post",src:null===r||void 0===r?void 0:r.postedBy.pic})}),Object(m.jsxs)("div",{className:"caption__content",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"username",children:null===r||void 0===r?void 0:r.postedBy.username}),Object(m.jsx)("span",{className:"caption",children:null===r||void 0===r?void 0:r.caption})]}),Object(m.jsx)("div",{children:Object(m.jsx)("span",{className:"post__time",children:g})})]})]})]}),null===r||void 0===r?void 0:r.comments.map((function(e){var t=Me(new Date(e.createdAt));return Object(m.jsxs)("div",{className:"comments",children:[Object(m.jsx)("div",{className:"avatar",children:Object(m.jsx)("img",{className:"avatar",alt:"post",src:e.user.pic})}),Object(m.jsxs)("div",{className:"caption__content",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"username",children:e.user.username}),Object(m.jsx)("span",{className:"caption",children:e.text})]}),Object(m.jsx)("div",{children:Object(m.jsx)("span",{className:"post__time",children:t})})]})]},e._id)})),"succeeded"!==O&&Object(m.jsx)("div",{className:"spinner__container",children:Object(m.jsx)(v,{})})]})}),We=(n(127),function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),i=Object(u.a)(a,2),r=i[0],o=i[1],l=Object(c.useRef)(null),d=b((function(e){return e.auth.token})),p=b((function(e){return e.users})),h=p.users,f=p.status,O=j();return Object(c.useEffect)((function(){null!==l.current&&clearTimeout(l.current),l.current=setTimeout((function(){l.current=null,""!==r&&O(pe({token:d,searchTerm:r}))}),1e3)}),[r,d,O]),Object(m.jsxs)("div",{className:"search__container",children:["pending"===f&&Object(m.jsx)("div",{className:"spinner__container",children:Object(m.jsx)(v,{})}),Object(m.jsxs)("div",{className:"search__header",children:[n&&Object(m.jsx)("button",{className:"back__btn",children:Object(m.jsx)("i",{className:"fa fa-arrow-left","aria-hidden":"true"})}),Object(m.jsx)("input",{className:"search__input",value:r,placeholder:"Search",onChange:function(e){var t=e.target.value;o(t)},onBlur:function(){return s(!1)},onFocus:function(){return s(!0)}})]}),Object(m.jsx)("div",{className:"searchBox__results",children:h.map((function(e){return Object(m.jsx)(fe,{user:e},e._id)}))})]})}),Ge=function(){var e=Object(p.h)().pathname,t=b((function(e){return e.chats})).chats,n=b((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),c=b((function(e){return e.profile.profile.username})),s=t.filter((function(t){return 0!==t.messages.length||e==="/chats/".concat(t._id)}));return Object(m.jsxs)("div",{className:"userslist",children:[Object(m.jsx)("header",{className:"userslist__header",children:c}),s.map((function(e){var t=e.users.find((function(e){return e._id!==n}));return Object(m.jsxs)(G.b,{to:"/chats/".concat(e._id),state:{messages:e.messages},className:"users",children:[Object(m.jsx)("img",{width:"60px",className:"user__pic",alt:"users",height:"60px",src:null===t||void 0===t?void 0:t.pic}),Object(m.jsx)("div",{className:"user__details",children:Object(m.jsx)("div",{className:"username",children:null===t||void 0===t?void 0:t.username})})]},e._id)})),0===s.length&&Object(m.jsx)("div",{className:"nochatsfound",children:"No chats found"})]})},Je=(n(128),function(){var e=j(),t=b((function(e){return e.chats})).status,n=b((function(e){return e.auth.token}));return Object(c.useEffect)((function(){"idle"===t&&e(se({token:n}))}),[t,e,n]),Object(m.jsxs)("div",{className:"chats__box",children:["succeeded"===t&&Object(m.jsxs)("div",{className:"chats__container",children:[Object(m.jsx)(Ge,{}),Object(m.jsx)(p.b,{})]}),"succeeded"!==t&&Object(m.jsx)("div",{className:"spinner__container",children:Object(m.jsx)(v,{})})]})}),Ye=n(30),Ze=n.n(Ye),$e=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!1),i=Object(u.a)(a,2),r=i[0],o=i[1],l=Object(c.useRef)(null),d=Object(c.useRef)(null),h=Object(p.j)().chatId,f=b((function(e){return e.chats})).chats,v=b((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),O=b((function(e){return e.auth.token})),_=j(),g=f.find((function(e){return e._id===h})),N=null===g||void 0===g?void 0:g.users.find((function(e){return e._id!==v})),w=b((function(e){return e.chats})).status;Object(c.useEffect)((function(){"idle"===w&&_(se({token:O}))}),[w,_,O]),Object(c.useEffect)((function(){Ae=Ze()("https://insta-clone-10062000.herokuapp.com"),v&&Ae.emit("joinRoom",h,v),Ae.on("receiveMsg",(function(e){_(le({chat:e}))})),Ae.on("typing",(function(){o(!0)})),Ae.on("stopTyping",(function(){o(!1)}))}),[h,v,_]),Object(c.useEffect)((function(){var e;null===(e=l.current)||void 0===e||e.scrollIntoView()}),[null===g||void 0===g?void 0:g.messages]);return Object(m.jsxs)("div",{className:"userchats userchatsmobile",children:[Object(m.jsxs)("div",{className:"chats",children:[null===g||void 0===g?void 0:g.messages.map((function(e){var t,n;return(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t._id)!==v?Object(m.jsxs)("div",{className:"received",children:[Object(m.jsx)(G.b,{to:"/viewprofile/".concat(null===N||void 0===N?void 0:N._id),children:Object(m.jsx)("img",{width:"30px",className:"user__pic",alt:"users",height:"30px",src:null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.pic})}),Object(m.jsx)("p",{className:"received__message",children:null===e||void 0===e?void 0:e.text})]},null===e||void 0===e?void 0:e._id):Object(m.jsx)("div",{className:"send",children:Object(m.jsx)("p",{className:"send__message",children:null===e||void 0===e?void 0:e.text})},null===e||void 0===e?void 0:e._id)})),Object(m.jsx)("div",{ref:l})]}),Object(m.jsxs)("form",{className:"userchats__form",onSubmit:function(e){e.preventDefault(),g&&""!==n&&(_(ie({token:O,text:n,chatId:null===g||void 0===g?void 0:g._id})).then(x.d).then((function(e){Ae.emit("sendMessage",h,e.chat)})),s(""))},children:[r&&Object(m.jsxs)("span",{className:"typing",children:[Object(m.jsx)("strong",{children:null===N||void 0===N?void 0:N.username})," is typing..."]}),Object(m.jsxs)("div",{className:"form__group",children:[Object(m.jsx)("input",{type:"text",value:n,onChange:function(e){s(e.target.value),null!==d.current&&clearTimeout(d.current),Ae.emit("typing",h),d.current=setTimeout((function(){d.current=null,Ae.emit("stopTyping",h)}),500)},className:"chats__input",placeholder:"Message..."}),Object(m.jsx)("input",{type:"submit",className:"send__btn",disabled:""===n,value:"Send"})]})]})]})},Qe=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!1),i=Object(u.a)(a,2),r=i[0],o=i[1],l=Object(c.useState)(!1),d=Object(u.a)(l,2),h=d[0],f=d[1],v=Object(c.useRef)(null),O=Object(c.useRef)(null),_=Object(p.j)().chatId,g=b((function(e){return e.chats})).chats,N=b((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),w=b((function(e){return e.auth.token})),k=j(),y=g.find((function(e){return e._id===_})),C=null===y||void 0===y?void 0:y.users.find((function(e){return e._id!==N}));Object(c.useEffect)((function(){Pe=Ze()("https://insta-clone-10062000.herokuapp.com/"),N&&Pe.emit("joinRoom",_,N),Pe.on("receiveMsg",(function(e){k(le({chat:e}))})),Pe.on("typing",(function(){o(!0)})),Pe.on("stopTyping",(function(){o(!1)}))}),[_,N,k]),Object(c.useEffect)((function(){var e;null===(e=v.current)||void 0===e||e.scrollIntoView()}),[null===y||void 0===y?void 0:y.messages]);return Object(m.jsxs)("div",{className:"userchats",children:[Object(m.jsx)("header",{children:Object(m.jsxs)(G.b,{to:"/viewprofile/".concat(null===C||void 0===C?void 0:C._id),className:"userchats__header",children:[Object(m.jsx)("img",{width:"30px",className:"user__pic",alt:"users",height:"30px",src:null===C||void 0===C?void 0:C.pic}),Object(m.jsx)("div",{className:"username",children:null===C||void 0===C?void 0:C.username})]})}),Object(m.jsxs)("div",{className:"chats",children:[null===y||void 0===y?void 0:y.messages.map((function(e){var t,n;return(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t._id)!==N?Object(m.jsxs)("div",{className:"received",children:[Object(m.jsx)(G.b,{to:"/viewprofile/".concat(null===C||void 0===C?void 0:C._id),children:Object(m.jsx)("img",{width:"30px",className:"user__pic",alt:"users",height:"30px",src:null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.pic})}),Object(m.jsx)("p",{className:"received__message",children:null===e||void 0===e?void 0:e.text})]},null===e||void 0===e?void 0:e._id):Object(m.jsx)("div",{className:"send",children:Object(m.jsx)("p",{className:"send__message",children:null===e||void 0===e?void 0:e.text})},null===e||void 0===e?void 0:e._id)})),Object(m.jsx)("div",{ref:v})]}),Object(m.jsxs)("form",{className:"userchats__form",onSubmit:function(e){e.preventDefault(),y&&""!==n&&(f(!0),k(ie({token:w,text:n,chatId:null===y||void 0===y?void 0:y._id})).then(x.d).then((function(e){Pe.emit("sendMessage",_,e.chat),f(!1),s("")})))},children:[r&&Object(m.jsxs)("span",{className:"typing",children:[Object(m.jsx)("strong",{children:null===C||void 0===C?void 0:C.username})," is typing..."]}),h&&Object(m.jsx)("span",{className:"sending",children:"sending..."}),Object(m.jsxs)("div",{className:"form__group",children:[Object(m.jsx)("input",{type:"text",value:n,onChange:function(e){s(e.target.value),null!==O.current&&clearTimeout(O.current),Pe.emit("typing",_),O.current=setTimeout((function(){O.current=null,Pe.emit("stopTyping",_)}),500)},className:"chats__input",placeholder:"Message..."}),Object(m.jsx)("input",{type:"submit",className:"send__btn",disabled:""===n||h,value:"Send"})]})]})]})},Ke=(n(158),function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1],a=j(),i=b((function(e){return e.auth.token})),r=Object(p.j)().userId,o=Object(c.useState)("idle"),l=Object(u.a)(o,2),d=l[0],h=l[1];return Object(c.useEffect)((function(){a(P({token:i,userId:r})).then(x.d).then((function(e){s(e.followers),h("succeeded")}))}),[i,r,a]),Object(m.jsxs)("div",{className:"follow__container",children:[Object(m.jsx)("h4",{className:"follow__heading",children:"Followers"}),n.map((function(e){return Object(m.jsx)("div",{className:"follower",children:Object(m.jsxs)(G.b,{to:"/viewprofile/".concat(e._id),className:"user",children:[Object(m.jsx)("img",{className:"user__pic",alt:"users",src:e.pic}),Object(m.jsxs)("div",{className:"user__details",children:[Object(m.jsx)("span",{className:"username",children:e.username}),Object(m.jsx)("span",{className:"fullname",children:e.fullname})]})]})},e._id)})),0===n.length&&"succeeded"===d&&Object(m.jsx)("p",{className:"no__followers__found",children:"No followers found"}),"succeeded"!==d&&Object(m.jsxs)("div",{className:"spinner__container",children:[" ",Object(m.jsx)(v,{})," "]})]})}),Xe=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],s=t[1],a=j(),i=b((function(e){return e.auth.token})),r=Object(p.j)().userId,o=Object(c.useState)("idle"),l=Object(u.a)(o,2),d=l[0],h=l[1];return Object(c.useEffect)((function(){a(R({token:i,userId:r})).then(x.d).then((function(e){s(e.following),h("succeeded")}))}),[i,r,a]),Object(m.jsxs)("div",{className:"follow__container",children:[Object(m.jsx)("h4",{className:"follow__heading",children:"Following"}),n.map((function(e){return Object(m.jsx)("div",{className:"follower",children:Object(m.jsxs)(G.b,{to:"/viewprofile/".concat(e._id),className:"user",children:[Object(m.jsx)("img",{className:"user__pic",alt:"users",src:e.pic}),Object(m.jsxs)("div",{className:"user__details",children:[Object(m.jsx)("span",{className:"username",children:e.username}),Object(m.jsx)("span",{className:"fullname",children:e.fullname})]})]})},e._id)})),0===n.length&&"succeeded"===d&&Object(m.jsx)("p",{className:"no__followers__found",children:"No following found"}),"succeeded"!==d&&Object(m.jsxs)("div",{className:"spinner__container",children:[" ",Object(m.jsx)(v,{})," "]})]})},et=function(){var e=Object(p.h)().pathname,t=Object(p.i)(),n=b((function(e){return e.profile.userposts})),c=b((function(e){return e.savedposts.posts})),s="/profile"===e?n:c;return Object(m.jsxs)("div",{className:"posts__section",children:[Object(m.jsxs)("div",{className:"section__1",children:[Object(m.jsxs)("button",{className:"/profile"===e?"post__btn active":"post__btn",onClick:function(){return t("/profile")},children:[Object(m.jsx)("svg",{"aria-label":"Posts",fill:"#262626",height:"12",viewBox:"0 0 48 48",width:"12",children:Object(m.jsx)("path",{clipRule:"evenodd",d:"M45 1.5H3c-.8 0-1.5.7-1.5 1.5v42c0 .8.7 1.5 1.5 1.5h42c.8 0 1.5-.7 1.5-1.5V3c0-.8-.7-1.5-1.5-1.5zm-40.5 3h11v11h-11v-11zm0 14h11v11h-11v-11zm11 25h-11v-11h11v11zm14 0h-11v-11h11v11zm0-14h-11v-11h11v11zm0-14h-11v-11h11v11zm14 28h-11v-11h11v11zm0-14h-11v-11h11v11zm0-14h-11v-11h11v11z",fillRule:"evenodd"})})," ","POSTS"]}),Object(m.jsxs)("button",{className:"/profile/save"===e?"saved__btn active":"saved__btn",onClick:function(){return t("/profile/save")},children:[Object(m.jsx)("svg",{"aria-label":"Saved",fill:"#262626",height:"12",viewBox:"0 0 48 48",width:"12",children:Object(m.jsx)("path",{d:"M43.5 48c-.4 0-.8-.2-1.1-.4L24 29 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1zM24 26c.8 0 1.6.3 2.2.9l15.8 16V3H6v39.9l15.8-16c.6-.6 1.4-.9 2.2-.9z"})})," ","SAVED"]})]}),Object(m.jsx)("div",{className:"section__2",children:s.map((function(e){var t=e.file.split(".").pop()||"",n=["jpg","png","jpeg"].includes(t),c=["mp3","mp4"].includes(t);return Object(m.jsxs)(G.b,{to:"/posts/".concat(e._id),children:[n&&Object(m.jsx)("img",{width:"100%",alt:"post",height:"auto",src:e.file}),c&&Object(m.jsx)(Ee.a,{url:e.file,controls:!0,style:{background:"black"},width:"100%",height:"auto"})]},e._id)}))})]})},tt=function(e){var t=e.profile,n=e.posts,s=e.isYouFollowingUser,a=e.activities,i=e.connections,r=e.setData,o=b((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),l=b((function(e){return e.auth.token})),u=b((function(e){return e.chats})),d=u.chats,h=u.status,f=j(),v=Object(p.i)(),O=i.following.find((function(e){return e===o})),_=null===a||void 0===a?void 0:a.requests.find((function(e){return e===o})),g=function(){f(T({token:l,userId:t._id})).then(x.d).then((function(e){r((function(t){if(t)return Object(W.a)(Object(W.a)({},t),{},{connections:e.userconnections,activities:e.activities})})),f(D({connections:e.yourconnections}))}))};Object(c.useEffect)((function(){"idle"===h&&f(se({token:l}))}),[h,f,l]);return Object(m.jsxs)("div",{className:"profile__section",children:[Object(m.jsx)("img",{className:"profile__avatar",alt:"profile",src:t.pic}),Object(m.jsx)("span",{className:"username__mobile",children:t.username}),Object(m.jsxs)("div",{className:"profile__details",children:[Object(m.jsxs)("div",{className:"section__1",children:[Object(m.jsx)("span",{className:"username__desktop",children:t.username}),Object(m.jsxs)("div",{className:"profile__btn__container",children:[s?Object(m.jsx)("button",{className:"secondary__btn",onClick:g,children:"Following"}):_?Object(m.jsx)("button",{className:"secondary__btn",onClick:g,children:"Requested"}):O?Object(m.jsx)("button",{className:"primary__btn",onClick:g,children:"Follow back"}):Object(m.jsx)("button",{className:"primary__btn",onClick:g,children:"Follow"}),Object(m.jsx)("button",{className:"secondary__btn",onClick:function(){return function(e){var t=d.find((function(t){return t.users.find((function(t){return t._id===e}))}));if(!t)return console.log("not found"),void f(ae({token:l,userId:e})).then(x.d).then((function(e){v("/chats/".concat(e.chat._id))}));console.log("found"),v("/chats/".concat(t._id))}(t._id)},children:"Message"})]})]}),Object(m.jsxs)("div",{className:"section__2",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{children:n.length})," posts"]}),Object(m.jsxs)(G.b,{to:s||!t.private?"/followers/".concat(t._id):"",className:"nav__link",children:[Object(m.jsx)("span",{children:null===i||void 0===i?void 0:i.followers.length})," followers"]}),Object(m.jsxs)(G.b,{to:s||!t.private?"/following/".concat(t._id):"",className:"nav__link",children:[Object(m.jsx)("span",{children:null===i||void 0===i?void 0:i.following.length})," following"]})]}),Object(m.jsxs)("div",{className:"section__3",children:[Object(m.jsx)("div",{className:"fullname",children:t.fullname}),Object(m.jsx)("p",{className:"bio",children:t.bio}),Object(m.jsx)("a",{href:t.website,rel:"noreferrer",target:"_blank",className:"website__link",children:t.website})]})]})]})},nt=function(e){var t=e.posts,n=e.accountPrivate,c=e.isYouFollowingUser;return Object(m.jsxs)("div",{className:"posts__section",children:[Object(m.jsx)("div",{className:"section__1",children:Object(m.jsxs)("button",{className:"post__btn active",children:[Object(m.jsx)("svg",{"aria-label":"Posts",fill:"#262626",height:"12",viewBox:"0 0 48 48",width:"12",children:Object(m.jsx)("path",{clipRule:"evenodd",d:"M45 1.5H3c-.8 0-1.5.7-1.5 1.5v42c0 .8.7 1.5 1.5 1.5h42c.8 0 1.5-.7 1.5-1.5V3c0-.8-.7-1.5-1.5-1.5zm-40.5 3h11v11h-11v-11zm0 14h11v11h-11v-11zm11 25h-11v-11h11v11zm14 0h-11v-11h11v11zm0-14h-11v-11h11v11zm0-14h-11v-11h11v11zm14 28h-11v-11h11v11zm0-14h-11v-11h11v11zm0-14h-11v-11h11v11z",fillRule:"evenodd"})})," ","POSTS"]})}),(!n||c)&&Object(m.jsx)("div",{className:"section__2",children:t.map((function(e){var t=e.file.split(".").pop()||"",n=["jpg","png","jpeg"].includes(t),c=["mp3","mp4"].includes(t);return Object(m.jsxs)(G.b,{to:"/posts/".concat(e._id),children:[n&&Object(m.jsx)("img",{width:"100%",className:"post__file",alt:"post",height:"auto",src:e.file}),c&&Object(m.jsx)(Ee.a,{url:e.file,width:"100%",height:"auto"})]},e._id)}))}),!c&&n&&Object(m.jsxs)("div",{className:"private__account__template",children:[Object(m.jsx)("i",{className:"fa fa-lock",children:" This Account is Private"}),Object(m.jsx)("p",{className:"template__content",children:"Follow to see their photos and videos."})]})]})},ct=(n(159),function(){var e=j(),t=J(),n=b((function(e){return e.auth.token})),s=b((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),a=Object(p.j)().userId,i=Object(c.useState)(),r=Object(u.a)(i,2),d=r[0],h=r[1],f=Object(c.useState)("idle"),O=Object(u.a)(f,2),_=O[0],g=O[1],N=null===d||void 0===d?void 0:d.connections.followers.find((function(e){return e===s}));return Object(c.useEffect)((function(){Object(l.a)(o.a.mark((function c(){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:t.current&&e(A({token:n,userId:a})).then(x.d).then((function(e){h(e),g("succeeded")}));case 1:case"end":return c.stop()}}),c)})))()}),[e,n,a,t]),Object(m.jsxs)("div",{className:"profile__container viewprofile",children:["succeeded"!==_&&Object(m.jsxs)("div",{className:"spinner__container",children:[" ",Object(m.jsx)(v,{})," "]}),d&&Object(m.jsx)(tt,{isYouFollowingUser:N,profile:null===d||void 0===d?void 0:d.profile,activities:d.activities,posts:null===d||void 0===d?void 0:d.userposts,connections:null===d||void 0===d?void 0:d.connections,setData:h}),d&&Object(m.jsx)(nt,{isYouFollowingUser:N,posts:null===d||void 0===d?void 0:d.userposts,accountPrivate:d.profile.private})]})}),st=(n(160),function(){var e=J(),t=Object(c.useState)({src:null,extension:"",caption:""}),n=Object(u.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(null),r=Object(u.a)(i,2),d=r[0],p=r[1],h=Object(c.useState)("idle"),f=Object(u.a)(h,2),v=f[0],O=f[1],_=Object(c.useState)(!1),g=Object(u.a)(_,2),N=g[0],w=g[1],k=Object(c.useState)(!1),y=Object(u.a)(k,2),C=y[0],S=y[1],z=[s.src].every(Boolean)&&"idle"===v,B=["jpg","png","jpeg"].includes(s.extension),I="mp4"===s.extension,M=b((function(e){return e.auth})).token,A=j(),P=function(e){w(!1);var t=e.target,n=t.name,c=t.type,s=t.value,i=t.files;if("file"===c&&i){var r=i[0].name.split(".").pop()||"";if(["jpg","png","jpeg","mp4"].includes(r)){var o=new FileReader;o.readAsDataURL(i[0]),o.onloadstart=function(){S(!0)},o.onloadend=function(){S(!1),p(i[0]),a((function(e){var t;return Object(W.a)(Object(W.a)({},e),{},(t={},Object(q.a)(t,n,o.result),Object(q.a)(t,"extension",r),t))}))}}else w(!0)}else a((function(e){return Object(W.a)(Object(W.a)({},e),{},Object(q.a)({},n,s))}))},R=function(){var t=Object(l.a)(o.a.mark((function t(n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),e.current){t.next=3;break}return t.abrupt("return");case 3:if(!d||!z){t.next=21;break}return t.prev=4,O("pending"),t.next=8,A(Ne({file:d,caption:s.caption,token:M}));case 8:c=t.sent,Object(x.d)(c),a({src:null,caption:"",extension:""}),p(null),O("succeeded"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),O("failed");case 18:return t.prev=18,setTimeout((function(){O("idle")}),3e3),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[4,15,18,21]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"addpost__container",children:[N&&Object(m.jsx)("div",{className:"invalid__feedback",children:"Please select only image and videos"}),C&&Object(m.jsx)("div",{className:"valid__feedback",children:"Processing..."}),"failed"===v&&Object(m.jsx)("div",{className:"invalid__feedback",children:"something went wrong!!"}),"pending"===v&&Object(m.jsx)("div",{className:"valid__feedback",children:"Uploading..."}),"succeeded"===v&&Object(m.jsx)("div",{className:"valid__feedback",children:"post successfully uploaded!!"}),B&&"string"===typeof s.src&&Object(m.jsxs)("div",{className:"file__container",children:[Object(m.jsx)("button",{className:"dismiss__btn",onClick:function(){return a((function(e){return Object(W.a)(Object(W.a)({},e),{},{src:null})}))},children:Object(m.jsx)("i",{className:"fa fa-window-close"})}),Object(m.jsx)("img",{className:"file",alt:"users",src:s.src})]}),I&&"string"===typeof s.src&&Object(m.jsxs)("div",{className:"file__container",children:[Object(m.jsx)("button",{className:"dismiss__btn",onClick:function(){return a((function(e){return Object(W.a)(Object(W.a)({},e),{},{src:null})}))},children:Object(m.jsx)("i",{className:"fa fa-window-close"})}),Object(m.jsx)(Ee.a,{width:"100%",height:"100%",controls:!0,url:s.src})]}),Object(m.jsxs)("form",{onSubmit:R,children:[!s.src&&!C&&Object(m.jsxs)("div",{className:"form__group upload__icon",children:[Object(m.jsx)("i",{className:"fa fa-plus"}),Object(m.jsx)("input",{type:"file",name:"src",className:"upload__file",onChange:P,accept:".jpg,.jpeg,.png,.mp4"}),Object(m.jsx)("small",{})]}),Object(m.jsx)(Z,{type:"text",name:"caption",value:s.caption,error:!1,onChange:P,placeholder:"Caption"}),Object(m.jsx)("div",{className:"form__group",children:Object(m.jsx)("input",{type:"submit",disabled:!z,className:"submit__btn",value:["idle","succeeded"].includes(v)?"POST":"POSTING..."})})]})]})}),at=(n(161),function(){var e=b((function(e){return e.activity})),t=e.activities,n=e.status,s=b((function(e){return e.auth.token})),a=j();Object(c.useEffect)((function(){"idle"===n&&a(K({token:s}))}),[n,s,a]);return Object(m.jsxs)("div",{className:"activity",children:["succeeded"!==n&&Object(m.jsxs)("div",{className:"spinner__container",children:[" ",Object(m.jsx)(v,{})," "]}),Object(m.jsx)("h4",{className:"activity__heading",children:"Activity"}),null===t||void 0===t?void 0:t.requests.map((function(e){return Object(m.jsxs)("div",{className:"activity__content",children:[Object(m.jsxs)(G.b,{to:"",className:"userpic__and__activity",children:[Object(m.jsx)("img",{alt:"profile",className:"userpic",src:e.pic}),Object(m.jsxs)("p",{className:"description",children:[Object(m.jsx)("strong",{children:e.username})," has requested to follow you."]})]}),Object(m.jsx)("button",{className:"primary__btn",onClick:function(){return t=e._id,void a(X({token:s,userId:t})).then(x.d).then((function(e){a(D({connections:e.connections}))}));var t},children:"Confirm"}),Object(m.jsx)("button",{className:"secondary__btn",onClick:function(){return t=e._id,void a(ee({token:s,userId:t}));var t},children:"Delete"})]},e._id)})).reverse(),null===t||void 0===t?void 0:t.activity.map((function(e){var t,n=null===e||void 0===e||null===(t=e.file)||void 0===t?void 0:t.split(".").pop(),c=["jpg","png","jpeg"].some((function(e){return e===n})),s=["mp3","mp4"].some((function(e){return e===n}));return Object(m.jsxs)(G.b,{to:"/viewprofile/".concat(e.user._id),className:"activity__content",children:[Object(m.jsxs)("div",{className:"userpic__and__activity",children:[Object(m.jsx)("img",{alt:"profile",className:"userpic",src:e.user.pic}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"description",children:[Object(m.jsx)("strong",{children:e.user.username})," ",e.text]}),Object(m.jsx)("span",{className:"timestamp",children:Me(new Date(e.createdAt))})]})]}),c&&Object(m.jsx)("img",{alt:"post",className:"post",src:e.file}),s&&Object(m.jsx)(Ee.a,{width:"50px",height:"50px",url:e.file})]},e._id)})).reverse()]})}),it=function(e,t){var n=!1,c=!1,s=!1;if(/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/.test(e.email)||(s=!0),e.username.length<5&&(n=!0),e.fullname.length<3&&(c=!0),!s&&!n&&!c)return t((function(e){return Object(W.a)(Object(W.a)({},e),{},{email:s,username:n,fullname:c,disabled:!1})}));t((function(e){return Object(W.a)(Object(W.a)({},e),{},{email:s,username:n,fullname:c,disabled:!0})}))},rt=(n(162),function(){var e=b((function(e){return e.profile.profile})),t=j(),n=b((function(e){return e.auth.token}));Object(c.useEffect)((function(){e&&r(e)}),[e]);var s=Object(c.useState)({_id:"",username:"",fullname:"",email:"",bio:"",pic:"",private:!1,website:"",gender:""}),a=Object(u.a)(s,2),i=a[0],r=a[1],d=Object(c.useState)({username:!1,fullname:!1,email:!1,disabled:!0}),p=Object(u.a)(d,2),h=p[0],f=p[1],v=Object(c.useState)("idle"),O=Object(u.a)(v,2),_=O[0],g=O[1],N=Object(c.useState)(""),w=Object(u.a)(N,2),k=w[0],y=w[1],C=Object(c.useState)(!1),S=Object(u.a)(C,2),z=S[0],B=S[1],I=Object(c.useState)(null),M=Object(u.a)(I,2),A=M[0],P=M[1],R=function(e){var t=e.target,n=t.name,c=t.value,s=t.type,a=t.files;if("private"===n)return r((function(e){return Object(W.a)(Object(W.a)({},e),{},Object(q.a)({},n,"yes"===c))})),void it(Object(W.a)(Object(W.a)({},i),{},Object(q.a)({},n,"yes"===c)),f);if("file"===s&&a){var o=a[0].name.split(".").pop()||"";if(["jpg","png","jpeg"].includes(o)){var l=new FileReader;l.readAsDataURL(a[0]),l.onloadend=function(){P(a[0]),r((function(e){return Object(W.a)(Object(W.a)({},e),{},Object(q.a)({},n,l.result))}))},B(!1),f((function(e){return Object(W.a)(Object(W.a)({},e),{},{disabled:!1})}))}else g("failed"),y("Invalid image"),setTimeout((function(){g("idle")}),2e3),B(!1)}else r((function(e){return Object(W.a)(Object(W.a)({},e),{},Object(q.a)({},n,c))})),it(Object(W.a)(Object(W.a)({},i),{},Object(q.a)({},n,c)),f)},T=function(){var e=Object(l.a)(o.a.mark((function e(){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g("pending"),e.next=4,t(E({token:n,data:i,file:A}));case 4:c=e.sent,Object(x.d)(c),g("succeeded"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),g("failed"),y(e.t0.message);case 13:return e.prev=13,f({username:!1,fullname:!1,email:!1,disabled:!0}),setTimeout((function(){g("idle")}),2e3),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,9,13,17]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"edit__profile",children:[z&&Object(m.jsx)(je,{toggle:B,className:"editprofile__backdrop"}),z&&Object(m.jsxs)("div",{className:"popup__container",children:[Object(m.jsx)("h4",{className:"popup__heading",children:"Change Profile Photo"}),Object(m.jsxs)("div",{className:"upload__btn__container",children:[Object(m.jsx)("input",{type:"file",name:"pic",accept:".png,.jpg,.jpeg",className:"uploadfile",onChange:R}),Object(m.jsx)("div",{className:"popup__options upload__btn",children:"Upload Photo"})]}),Object(m.jsx)("button",{className:"popup__options cancel__btn",onClick:function(){return B(!1)},children:"Cancel"})]}),Object(m.jsxs)("section",{className:"section__1",children:[Object(m.jsx)("img",{src:null===i||void 0===i?void 0:i.pic,alt:"pic",className:"userPic"}),Object(m.jsxs)("div",{className:"username__container",children:[Object(m.jsx)("div",{className:"username",children:i.username}),Object(m.jsx)("button",{className:"change__pic__btn",onClick:function(){return B(!0)},children:"Change Profile Photo"})]})]}),Object(m.jsxs)("section",{className:"section__2",children:[Object(m.jsx)(Z,{type:"text",error:h.fullname,name:"fullname",value:i.fullname,onChange:R,placeholder:"fullname"}),Object(m.jsx)(Z,{type:"text",error:h.username,name:"username",value:i.username,onChange:R,placeholder:"username"}),Object(m.jsx)(Z,{type:"text",error:!1,name:"website",value:i.website,onChange:R,placeholder:"website"}),Object(m.jsx)(Z,{type:"text",error:!1,name:"bio",value:i.bio,onChange:R,placeholder:"bio"}),Object(m.jsx)(Z,{type:"email",error:h.email,name:"email",value:i.email,onChange:R,placeholder:"email"}),Object(m.jsxs)("label",{htmlFor:"gender",className:"gender__label",children:["Gender:",Object(m.jsx)("input",{type:"radio",className:"radio__input",name:"gender",onChange:R,checked:"male"===i.gender,value:"male"}),"male",Object(m.jsx)("input",{type:"radio",className:"radio__input",name:"gender",onChange:R,checked:"female"===i.gender,value:"female"}),"female"]}),Object(m.jsxs)("label",{htmlFor:"private",className:"private__label",children:["Private:",Object(m.jsx)("input",{type:"radio",className:"radio__input",onChange:R,checked:i.private,name:"private",value:"yes"}),"yes",Object(m.jsx)("input",{type:"radio",className:"radio__input",onChange:R,checked:!i.private,name:"private",value:"no"}),"no"]}),Object(m.jsx)("button",{className:"submit__btn",onClick:T,disabled:h.disabled||"pending"===_,children:"pending"===_?"Saving...":"Submit"})]}),"succeeded"===_&&Object(m.jsx)("div",{className:"valid__feedback",children:"Profile saved."}),"failed"===_&&Object(m.jsx)("div",{className:"invalid__feedback",children:k})]})}),ot=function(e){var t=e.like,n=e.postId,c=e.setPost,s=b((function(e){return e.auth})).token,a=b((function(e){return e.savedposts})).posts.find((function(e){return e._id===n})),i=j(),r=Object(p.i)();return Object(m.jsxs)("div",{className:"post__icons",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{className:"icon",onClick:function(){i(we({token:s,postId:n})).then(x.d).then((function(e){c(e.post)}))},children:t?Object(m.jsx)("svg",{"aria-label":"Unlike",style:{marginRight:"0.5rem"},fill:"#ed4956",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}):Object(m.jsx)("svg",{"aria-label":"Like",style:{marginRight:"0.5rem"},fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{d:"M34.6 6.1c5.7 0 10.4 5.2 10.4 11.5 0 6.8-5.9 11-11.5 16S25 41.3 24 41.9c-1.1-.7-4.7-4-9.5-8.3-5.7-5-11.5-9.2-11.5-16C3 11.3 7.7 6.1 13.4 6.1c4.2 0 6.5 2 8.1 4.3 1.9 2.6 2.2 3.9 2.5 3.9.3 0 .6-1.3 2.5-3.9 1.6-2.3 3.9-4.3 8.1-4.3m0-3c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5.6 0 1.1-.2 1.6-.5 1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"})})}),Object(m.jsx)("button",{className:"icon",onClick:function(){return r("/comments/".concat(n))},children:Object(m.jsx)("svg",{"aria-label":"Comment",fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{clipRule:"evenodd",d:"M47.5 46.1l-2.8-11c1.8-3.3 2.8-7.1 2.8-11.1C47.5 11 37 .5 24 .5S.5 11 .5 24 11 47.5 24 47.5c4 0 7.8-1 11.1-2.8l11 2.8c.8.2 1.6-.6 1.4-1.4zm-3-22.1c0 4-1 7-2.6 10-.2.4-.3.9-.2 1.4l2.1 8.4-8.3-2.1c-.5-.1-1-.1-1.4.2-1.8 1-5.2 2.6-10 2.6-11.4 0-20.6-9.2-20.6-20.5S12.7 3.5 24 3.5 44.5 12.7 44.5 24z",fillRule:"evenodd"})})})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{className:"icon",onClick:function(){return i(U({token:s,postId:n}))},children:a?Object(m.jsx)("svg",{"aria-label":"Remove",fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{d:"M43.5 48c-.4 0-.8-.2-1.1-.4L24 28.9 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1z"})}):Object(m.jsx)("svg",{"aria-label":"Save",fill:"#262626",height:"24",viewBox:"0 0 48 48",width:"24",children:Object(m.jsx)("path",{d:"M43.5 48c-.4 0-.8-.2-1.1-.4L24 29 5.6 47.6c-.4.4-1.1.6-1.6.3-.6-.2-1-.8-1-1.4v-45C3 .7 3.7 0 4.5 0h39c.8 0 1.5.7 1.5 1.5v45c0 .6-.4 1.2-.9 1.4-.2.1-.4.1-.6.1zM24 26c.8 0 1.6.3 2.2.9l15.8 16V3H6v39.9l15.8-16c.6-.6 1.4-.9 2.2-.9z"})})})})]})},lt=(n(163),function(){var e=J(),t=j(),n=b((function(e){return e.auth})).token,s=Object(p.j)().postId,a=Object(c.useState)("idle"),i=Object(u.a)(a,2),r=i[0],d=i[1],h=Object(c.useState)({_id:"",file:"",postedBy:{_id:"",pic:"",username:"",fullname:""},caption:"",likes:[],comments:[],createdAt:""}),f=Object(u.a)(h,2),O=f[0],_=f[1],g=O.file.split(".").pop()||"",N=["jpg","png","jpeg"].includes(g),w=["mp3","mp4"].includes(g),k=b((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t._id})),y=O.likes.find((function(e){return e===k})),C=Me(new Date(O.createdAt)),S=Object(c.useState)(""),z=Object(u.a)(S,2),B=z[0],I=z[1];return Object(c.useEffect)((function(){Object(l.a)(o.a.mark((function c(){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e.current&&t(ye({token:n,postId:s})).then(x.d).then((function(e){_(e.post),d("succeeded")}));case 1:case"end":return c.stop()}}),c)})))()}),[t,e,n,s]),Object(m.jsxs)("div",{className:"post individualPost",children:["succeeded"!==r&&Object(m.jsx)("div",{className:"spinner__container",children:Object(m.jsx)(v,{})}),Object(m.jsxs)("div",{className:"post__header",children:[Object(m.jsxs)(G.b,{to:O.postedBy._id===k?"/profile":"/viewprofile/".concat(O.postedBy._id),className:"avatar",children:[Object(m.jsx)("img",{className:"avatar__img",alt:"profile",src:O.postedBy.pic}),Object(m.jsx)("span",{className:"username",children:O.postedBy.username})]}),Object(m.jsx)("div",{className:"options",children:"..."})]}),N&&Object(m.jsx)("img",{alt:"pic",width:"100%",style:{maxHeight:"700px",objectFit:"cover"},height:"auto",src:O.file}),w&&Object(m.jsx)(Ee.a,{controls:!0,url:O.file,width:"100%",style:{maxHeight:"700px"},height:"auto"}),Object(m.jsxs)("div",{className:"post__footer",children:[Object(m.jsx)(ot,{setPost:_,postId:O._id,like:!!y}),Object(m.jsxs)("h6",{className:"post__likes",children:[O.likes.length," likes"]}),Object(m.jsxs)("div",{className:"post__caption",children:[Object(m.jsx)("strong",{children:O.postedBy.username})," ",O.caption]}),Object(m.jsx)(G.b,{to:"/comments/".concat(O._id),className:"post__comments",children:0===O.comments.length?"no comments":"View all ".concat(O.comments.length," comments")}),Object(m.jsxs)("div",{className:"post__time",children:[C," AGO"]}),Object(m.jsxs)("form",{className:"commentBox",onSubmit:function(e){e.preventDefault(),t(ke({token:n,comment:B,postId:s})).then(x.d).then((function(e){_(e.post)})),I("")},children:[Object(m.jsx)("input",{type:"text",value:B,onChange:function(e){return I(e.target.value)},className:"add__comment",placeholder:"Add a comment..."}),Object(m.jsx)("button",{type:"submit",className:"post__btn",disabled:""===B,children:"Post"})]})]})]})}),ut=(n(164),n(67)),dt=function(e){var t=e.path,n=e.children,c=Object(ut.a)(e,["path","children"]);return b((function(e){return e.auth.login}))?Object(m.jsx)(p.c,Object(W.a)(Object(W.a)({path:t},c),{},{children:n})):Object(m.jsx)(p.a,{state:{from:t},to:"/",replace:!0})},jt=function(e){var t=j(),n=b((function(e){return e.auth.token}));return Object(c.useEffect)((function(){t(ze({loading:!0}));try{t(_e({token:n,page:e})).then(x.d).then((function(){t(ze({loading:!1}))}))}catch(c){}}),[e,t,n]),null},bt=function(){var e=b((function(e){return e.auth})),t=b((function(e){return e.posts.page}));jt(t);var n=Object(c.useState)("idle"),s=Object(u.a)(n,2),a=s[0],i=s[1],r=function(){var e=Object(c.useState)({width:0,height:0}),t=Object(u.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){function e(){s({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}().width,d=j(),h=Object(p.h)().pathname,x=e.token,_=e.login;return Object(c.useEffect)((function(){x||i("idle"),Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("idle"!==a||!x){e.next=4;break}return e.next=3,Promise.all([d(S(x)),d(F({token:x})),d(M({token:x}))]);case 3:i("succeeded");case 4:case"end":return e.stop()}}),e)})))()}),[a,x,d]),Object(m.jsxs)("div",{children:[_&&"succeeded"===a&&Object(m.jsx)(Oe,{}),Object(m.jsxs)(p.e,{children:[!_&&Object(m.jsx)(p.c,{path:"/",element:Object(m.jsx)(Q,{})}),!_&&Object(m.jsx)(p.c,{path:"/signup",element:Object(m.jsx)($,{})}),!_&&Object(m.jsx)(p.c,{path:"*",element:Object(m.jsx)(O,{})})]}),"succeeded"===a&&Object(m.jsxs)(p.e,{children:["/"!==h&&Object(m.jsx)(f,{}),r>=700&&Object(m.jsx)(dt,{path:"/chats",element:Object(m.jsx)(Je,{}),children:Object(m.jsx)(dt,{path:"/:chatId",element:Object(m.jsx)(Qe,{})})}),r<700&&Object(m.jsx)(dt,{path:"/chats",element:Object(m.jsx)(Je,{})}),r<700&&Object(m.jsx)(dt,{path:"/chats/:chatId",element:Object(m.jsx)($e,{})}),Object(m.jsx)(dt,{path:"/",element:Object(m.jsx)(Fe,{})}),Object(m.jsxs)(dt,{path:"/profile",element:Object(m.jsx)(He,{}),children:[Object(m.jsx)(dt,{path:"/",element:Object(m.jsx)(et,{})}),Object(m.jsx)(dt,{path:"/save",element:Object(m.jsx)(et,{})})]}),Object(m.jsx)(dt,{path:"/profile/edit",element:Object(m.jsx)(rt,{})}),Object(m.jsx)(dt,{path:"/followers/:userId",element:Object(m.jsx)(Ke,{})}),Object(m.jsx)(dt,{path:"/following/:userId",element:Object(m.jsx)(Xe,{})}),Object(m.jsx)(dt,{path:"/viewprofile/:userId",element:Object(m.jsx)(ct,{})}),Object(m.jsx)(dt,{path:"/comments/:postId",element:Object(m.jsx)(qe,{})}),Object(m.jsx)(dt,{path:"/search",element:Object(m.jsx)(We,{})}),Object(m.jsx)(dt,{path:"/activity",element:Object(m.jsx)(at,{})}),Object(m.jsx)(dt,{path:"/post/add",element:Object(m.jsx)(st,{})}),Object(m.jsx)(dt,{path:"/posts/:postId",element:Object(m.jsx)(lt,{})}),Object(m.jsx)(p.c,{path:"*",element:Object(m.jsx)(O,{})})]}),_&&"succeeded"===a&&Object(m.jsx)(xe,{}),_&&"succeeded"!==a&&Object(m.jsxs)("div",{className:"spinner__container",children:[" ",Object(m.jsx)(v,{})," "]}),_&&"failed"===a&&Object(m.jsx)("div",{className:"invalid__feedback",children:"Something went wrong !! please try again later"})]})},pt=Object(x.a)({reducer:{auth:I,posts:Ie,savedposts:H,profile:L,activity:ce,users:he,chats:de}});i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(d.a,{store:pt,children:Object(m.jsx)(G.a,{children:Object(m.jsx)(bt,{})})})}),document.getElementById("root"))},45:function(e,t,n){},50:function(e,t,n){},78:function(e,t,n){},80:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[165,1,2]]]);
//# sourceMappingURL=main.6bf6891f.chunk.js.map